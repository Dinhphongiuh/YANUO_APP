{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DinhPhongIUH\\\\Desktop\\\\nhap\\\\Yanuo_mobile_Redux\\\\screens\\\\context\\\\socketContext.js\";\nimport React, { createContext, useContext, useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport io from 'socket.io-client';\nimport { REACT_APP_API_URL } from '../../constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SocketContext = createContext();\nexport const SocketProvider = ({\n  children\n}) => {\n  const profile = useSelector(state => state.meSlice.userProfile);\n  const socket = useRef(null);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  useEffect(() => {\n    if (profile && profile._id) {\n      socket.current = io(REACT_APP_API_URL);\n      socket.current.emit(\"new-user-add\", profile._id);\n      socket.current.on('get-users', users => {\n        setOnlineUsers(users);\n        console.log('online: ', users);\n      });\n    }\n    return () => {\n      if (socket.current) {\n        socket.current.disconnect();\n      }\n    };\n  }, [profile]);\n  return _jsxDEV(SocketContext.Provider, {\n    value: socket.current,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n};\nexport const useSocket = () => {\n  return useContext(SocketContext);\n};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useRef","useState","useDispatch","useSelector","io","REACT_APP_API_URL","jsxDEV","_jsxDEV","SocketContext","SocketProvider","children","profile","state","meSlice","userProfile","socket","onlineUsers","setOnlineUsers","_id","current","emit","on","users","console","log","disconnect","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","useSocket"],"sources":["C:/Users/DinhPhongIUH/Desktop/nhap/Yanuo_mobile_Redux/screens/context/socketContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport io from 'socket.io-client';\r\nimport { REACT_APP_API_URL } from '../../constants';\r\n\r\nconst SocketContext = createContext();\r\n\r\nexport const SocketProvider = ({ children }) => {\r\n    const profile = useSelector(state => state.meSlice.userProfile);\r\n    const socket = useRef(null);\r\n    const [onlineUsers, setOnlineUsers] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if (profile && profile._id) {\r\n            socket.current = io(REACT_APP_API_URL);\r\n            socket.current.emit(\"new-user-add\", profile._id);\r\n            socket.current.on('get-users', (users) => {\r\n                setOnlineUsers(users);\r\n                console.log('online: ', users);\r\n            });\r\n        }\r\n\r\n        return () => {\r\n            if (socket.current) {\r\n                socket.current.disconnect();\r\n            }\r\n        };\r\n    }, [profile]);\r\n\r\n    return (\r\n        <SocketContext.Provider value={socket.current}>\r\n            {children}\r\n        </SocketContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useSocket = () => {\r\n    return useContext(SocketContext);\r\n};\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACrF,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,OAAOC,EAAE,MAAM,kBAAkB;AACjC,SAASC,iBAAiB,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpD,MAAMC,aAAa,GAAGX,aAAa,CAAC,CAAC;AAErC,OAAO,MAAMY,cAAc,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAC5C,MAAMC,OAAO,GAAGR,WAAW,CAACS,KAAK,IAAIA,KAAK,CAACC,OAAO,CAACC,WAAW,CAAC;EAC/D,MAAMC,MAAM,GAAGf,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAM,CAACgB,WAAW,EAAEC,cAAc,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAElDF,SAAS,CAAC,MAAM;IACZ,IAAIY,OAAO,IAAIA,OAAO,CAACO,GAAG,EAAE;MACxBH,MAAM,CAACI,OAAO,GAAGf,EAAE,CAACC,iBAAiB,CAAC;MACtCU,MAAM,CAACI,OAAO,CAACC,IAAI,CAAC,cAAc,EAAET,OAAO,CAACO,GAAG,CAAC;MAChDH,MAAM,CAACI,OAAO,CAACE,EAAE,CAAC,WAAW,EAAGC,KAAK,IAAK;QACtCL,cAAc,CAACK,KAAK,CAAC;QACrBC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEF,KAAK,CAAC;MAClC,CAAC,CAAC;IACN;IAEA,OAAO,MAAM;MACT,IAAIP,MAAM,CAACI,OAAO,EAAE;QAChBJ,MAAM,CAACI,OAAO,CAACM,UAAU,CAAC,CAAC;MAC/B;IACJ,CAAC;EACL,CAAC,EAAE,CAACd,OAAO,CAAC,CAAC;EAEb,OACIJ,OAAA,CAACC,aAAa,CAACkB,QAAQ;IAACC,KAAK,EAAEZ,MAAM,CAACI,OAAQ;IAAAT,QAAA,EACzCA;EAAQ;IAAAkB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAEjC,CAAC;AAED,OAAO,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAC3B,OAAOlC,UAAU,CAACU,aAAa,CAAC;AACpC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}