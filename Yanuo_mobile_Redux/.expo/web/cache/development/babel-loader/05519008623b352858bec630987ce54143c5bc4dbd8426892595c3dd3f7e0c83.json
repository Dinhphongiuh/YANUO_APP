{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport friendApi from '../../api/friendApi';\nconst KEY = 'friend';\nconst initialState = {\n  isLoading: false,\n  listFriends: [],\n  searchFriend: {},\n  friendRequests: [],\n  friendSuggests: []\n};\nexport const fetchFriends = createAsyncThunk(`${KEY}/fetchFriends`, async (params, thunkApi) => {\n  const data = await friendApi.fetchFriends(params);\n  return data;\n});\nconst friendSlice = createSlice({\n  name: KEY,\n  initialState,\n  reducers: {\n    setLoading: (state, action) => {\n      state.isLoading = action.payload;\n    },\n    setSearchFriend: (state, action) => {\n      state.searchFriend = action.payload;\n    },\n    updateFriendStatus: (state, action) => {\n      const oldSearchFriend = state.searchFriend;\n      const status = action.payload;\n      const newSearchFriend = _objectSpread(_objectSpread({}, oldSearchFriend), {}, {\n        status\n      });\n      state.searchFriend = newSearchFriend;\n    },\n    addNewFriendRequest: (state, action) => {\n      state.friendRequests = action.payload;\n    },\n    inviteFriendRequest: (state, action) => {\n      const details = action.payload;\n      const oldFriendRequests = state.friendRequests;\n      state.friendRequests = [...oldFriendRequests, details];\n      state.searchFriend.status = friendType.FOLLOWER;\n    },\n    cancelMyFriendRequest: (state, action) => {\n      const {\n        userId,\n        type\n      } = action.payload;\n      const myOldFriendRequests = state.myFriendRequests;\n      const myNewFriendRequests = myOldFriendRequests.filter(requestEle => requestEle._id !== userId);\n      state.myFriendRequests = myNewFriendRequests;\n      state.searchFriend.status = type ? friendType.FRIEND : friendType.NOT_FRIEND;\n    },\n    deleteFriendRequest: (state, action) => {\n      const userId = action.payload;\n      const oldFriendRequests = state.friendRequests;\n      const newFriendRequests = oldFriendRequests.filter(requestEle => requestEle._id !== userId);\n      state.friendRequests = newFriendRequests;\n      state.searchFriend.status = friendType.NOT_FRIEND;\n    },\n    resetFriendSlice: (state, action) => {\n      Object.assign(state, initialState);\n    },\n    deleteFriend: (state, action) => {\n      const userId = action.payload;\n      const oldFriends = state.listFriends;\n      const newFriends = oldFriends.filter(requestEle => requestEle._id !== userId);\n      state.listFriends = newFriends;\n      state.searchFriend.status = friendType.NOT_FRIEND;\n    }\n  }\n});\nconst {\n  reducer,\n  actions\n} = friendSlice;\nexport const {\n  setLoading,\n  setSearchFriend,\n  updateFriendStatus,\n  addNewFriendRequest,\n  cancelMyFriendRequest,\n  deleteFriendRequest,\n  inviteFriendRequest,\n  resetFriendSlice,\n  deleteFriend\n} = actions;\nexport default reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","friendApi","KEY","initialState","isLoading","listFriends","searchFriend","friendRequests","friendSuggests","fetchFriends","params","thunkApi","data","friendSlice","name","reducers","setLoading","state","action","payload","setSearchFriend","updateFriendStatus","oldSearchFriend","status","newSearchFriend","_objectSpread","addNewFriendRequest","inviteFriendRequest","details","oldFriendRequests","friendType","FOLLOWER","cancelMyFriendRequest","userId","type","myOldFriendRequests","myFriendRequests","myNewFriendRequests","filter","requestEle","_id","FRIEND","NOT_FRIEND","deleteFriendRequest","newFriendRequests","resetFriendSlice","Object","assign","deleteFriend","oldFriends","newFriends","reducer","actions"],"sources":["C:/Users/DinhPhongIUH/Desktop/nhap/Yanuo_mobile_Redux/redux/slices/friendSlice.js"],"sourcesContent":["import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\r\nimport friendApi from '../../api/friendApi';\r\n\r\nconst KEY = 'friend';\r\n\r\nconst initialState = {\r\n    isLoading: false,\r\n    listFriends: [],\r\n    searchFriend: {},\r\n    friendRequests: [],\r\n    friendSuggests: [],\r\n};\r\n\r\nexport const fetchFriends = createAsyncThunk(\r\n    `${KEY}/fetchFriends`,\r\n    async (params, thunkApi) => {\r\n        const data = await friendApi.fetchFriends(params);\r\n        return data;\r\n    },\r\n);\r\n\r\nconst friendSlice = createSlice({\r\n    name: KEY,\r\n    initialState,\r\n    reducers: {\r\n        setLoading: (state, action) => {\r\n            state.isLoading = action.payload;\r\n        },\r\n        setSearchFriend: (state, action) => {\r\n            state.searchFriend = action.payload;\r\n        },\r\n        updateFriendStatus: (state, action) => {\r\n            const oldSearchFriend = state.searchFriend;\r\n            const status = action.payload;\r\n            const newSearchFriend = {...oldSearchFriend, status};\r\n            state.searchFriend = newSearchFriend;\r\n        },\r\n        addNewFriendRequest: (state, action) => {\r\n            // const myOldFriendRequests = state.myFriendRequests;\r\n            // const newFriendRequest = state.searchFriend;\r\n            // const myNewFriendRequests = [...myOldFriendRequests, newFriendRequest];\r\n            // state.myFriendRequests  = myNewFriendRequests;\r\n            state.friendRequests = action.payload;\r\n        },\r\n        inviteFriendRequest: (state, action) => {\r\n            const details = action.payload;\r\n            const oldFriendRequests = state.friendRequests;\r\n            state.friendRequests = [...oldFriendRequests, details];\r\n            state.searchFriend.status = friendType.FOLLOWER;\r\n        },\r\n        cancelMyFriendRequest: (state, action) => {\r\n            const {userId, type} = action.payload;\r\n            const myOldFriendRequests = state.myFriendRequests;\r\n            // delete request from list\r\n            const myNewFriendRequests = myOldFriendRequests.filter(\r\n              requestEle => requestEle._id !== userId,\r\n            );\r\n            state.myFriendRequests = myNewFriendRequests;\r\n            state.searchFriend.status = type\r\n              ? friendType.FRIEND\r\n              : friendType.NOT_FRIEND;\r\n        },\r\n        deleteFriendRequest: (state, action) => {\r\n            const userId = action.payload;\r\n            const oldFriendRequests = state.friendRequests;\r\n            // delete request from list\r\n            const newFriendRequests = oldFriendRequests.filter(\r\n              requestEle => requestEle._id !== userId,\r\n            );\r\n            state.friendRequests = newFriendRequests;\r\n            state.searchFriend.status = friendType.NOT_FRIEND;\r\n        },\r\n        resetFriendSlice: (state, action) => {\r\n            Object.assign(state, initialState);\r\n        },\r\n        deleteFriend: (state, action) => {\r\n            const userId = action.payload;\r\n            const oldFriends = state.listFriends;\r\n            // delete from list\r\n            const newFriends = oldFriends.filter(\r\n              requestEle => requestEle._id !== userId,\r\n            );\r\n            state.listFriends = newFriends;\r\n            state.searchFriend.status = friendType.NOT_FRIEND;\r\n        },\r\n    }\r\n});\r\n\r\nconst {reducer, actions} = friendSlice;\r\nexport const {\r\n  setLoading,\r\n  setSearchFriend,\r\n  updateFriendStatus,\r\n  addNewFriendRequest,\r\n  cancelMyFriendRequest,\r\n  deleteFriendRequest,\r\n  inviteFriendRequest,\r\n  resetFriendSlice,\r\n  deleteFriend,\r\n} = actions;\r\nexport default reducer;"],"mappings":";;;AAAA,SAAQA,gBAAgB,EAAEC,WAAW,QAAO,kBAAkB;AAC9D,OAAOC,SAAS,MAAM,qBAAqB;AAE3C,MAAMC,GAAG,GAAG,QAAQ;AAEpB,MAAMC,YAAY,GAAG;EACjBC,SAAS,EAAE,KAAK;EAChBC,WAAW,EAAE,EAAE;EACfC,YAAY,EAAE,CAAC,CAAC;EAChBC,cAAc,EAAE,EAAE;EAClBC,cAAc,EAAE;AACpB,CAAC;AAED,OAAO,MAAMC,YAAY,GAAGV,gBAAgB,CACvC,GAAEG,GAAI,eAAc,EACrB,OAAOQ,MAAM,EAAEC,QAAQ,KAAK;EACxB,MAAMC,IAAI,GAAG,MAAMX,SAAS,CAACQ,YAAY,CAACC,MAAM,CAAC;EACjD,OAAOE,IAAI;AACf,CACJ,CAAC;AAED,MAAMC,WAAW,GAAGb,WAAW,CAAC;EAC5Bc,IAAI,EAAEZ,GAAG;EACTC,YAAY;EACZY,QAAQ,EAAE;IACNC,UAAU,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC3BD,KAAK,CAACb,SAAS,GAAGc,MAAM,CAACC,OAAO;IACpC,CAAC;IACDC,eAAe,EAAEA,CAACH,KAAK,EAAEC,MAAM,KAAK;MAChCD,KAAK,CAACX,YAAY,GAAGY,MAAM,CAACC,OAAO;IACvC,CAAC;IACDE,kBAAkB,EAAEA,CAACJ,KAAK,EAAEC,MAAM,KAAK;MACnC,MAAMI,eAAe,GAAGL,KAAK,CAACX,YAAY;MAC1C,MAAMiB,MAAM,GAAGL,MAAM,CAACC,OAAO;MAC7B,MAAMK,eAAe,GAAAC,aAAA,CAAAA,aAAA,KAAOH,eAAe;QAAEC;MAAM,EAAC;MACpDN,KAAK,CAACX,YAAY,GAAGkB,eAAe;IACxC,CAAC;IACDE,mBAAmB,EAAEA,CAACT,KAAK,EAAEC,MAAM,KAAK;MAKpCD,KAAK,CAACV,cAAc,GAAGW,MAAM,CAACC,OAAO;IACzC,CAAC;IACDQ,mBAAmB,EAAEA,CAACV,KAAK,EAAEC,MAAM,KAAK;MACpC,MAAMU,OAAO,GAAGV,MAAM,CAACC,OAAO;MAC9B,MAAMU,iBAAiB,GAAGZ,KAAK,CAACV,cAAc;MAC9CU,KAAK,CAACV,cAAc,GAAG,CAAC,GAAGsB,iBAAiB,EAAED,OAAO,CAAC;MACtDX,KAAK,CAACX,YAAY,CAACiB,MAAM,GAAGO,UAAU,CAACC,QAAQ;IACnD,CAAC;IACDC,qBAAqB,EAAEA,CAACf,KAAK,EAAEC,MAAM,KAAK;MACtC,MAAM;QAACe,MAAM;QAAEC;MAAI,CAAC,GAAGhB,MAAM,CAACC,OAAO;MACrC,MAAMgB,mBAAmB,GAAGlB,KAAK,CAACmB,gBAAgB;MAElD,MAAMC,mBAAmB,GAAGF,mBAAmB,CAACG,MAAM,CACpDC,UAAU,IAAIA,UAAU,CAACC,GAAG,KAAKP,MACnC,CAAC;MACDhB,KAAK,CAACmB,gBAAgB,GAAGC,mBAAmB;MAC5CpB,KAAK,CAACX,YAAY,CAACiB,MAAM,GAAGW,IAAI,GAC5BJ,UAAU,CAACW,MAAM,GACjBX,UAAU,CAACY,UAAU;IAC7B,CAAC;IACDC,mBAAmB,EAAEA,CAAC1B,KAAK,EAAEC,MAAM,KAAK;MACpC,MAAMe,MAAM,GAAGf,MAAM,CAACC,OAAO;MAC7B,MAAMU,iBAAiB,GAAGZ,KAAK,CAACV,cAAc;MAE9C,MAAMqC,iBAAiB,GAAGf,iBAAiB,CAACS,MAAM,CAChDC,UAAU,IAAIA,UAAU,CAACC,GAAG,KAAKP,MACnC,CAAC;MACDhB,KAAK,CAACV,cAAc,GAAGqC,iBAAiB;MACxC3B,KAAK,CAACX,YAAY,CAACiB,MAAM,GAAGO,UAAU,CAACY,UAAU;IACrD,CAAC;IACDG,gBAAgB,EAAEA,CAAC5B,KAAK,EAAEC,MAAM,KAAK;MACjC4B,MAAM,CAACC,MAAM,CAAC9B,KAAK,EAAEd,YAAY,CAAC;IACtC,CAAC;IACD6C,YAAY,EAAEA,CAAC/B,KAAK,EAAEC,MAAM,KAAK;MAC7B,MAAMe,MAAM,GAAGf,MAAM,CAACC,OAAO;MAC7B,MAAM8B,UAAU,GAAGhC,KAAK,CAACZ,WAAW;MAEpC,MAAM6C,UAAU,GAAGD,UAAU,CAACX,MAAM,CAClCC,UAAU,IAAIA,UAAU,CAACC,GAAG,KAAKP,MACnC,CAAC;MACDhB,KAAK,CAACZ,WAAW,GAAG6C,UAAU;MAC9BjC,KAAK,CAACX,YAAY,CAACiB,MAAM,GAAGO,UAAU,CAACY,UAAU;IACrD;EACJ;AACJ,CAAC,CAAC;AAEF,MAAM;EAACS,OAAO;EAAEC;AAAO,CAAC,GAAGvC,WAAW;AACtC,OAAO,MAAM;EACXG,UAAU;EACVI,eAAe;EACfC,kBAAkB;EAClBK,mBAAmB;EACnBM,qBAAqB;EACrBW,mBAAmB;EACnBhB,mBAAmB;EACnBkB,gBAAgB;EAChBG;AACF,CAAC,GAAGI,OAAO;AACX,eAAeD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}