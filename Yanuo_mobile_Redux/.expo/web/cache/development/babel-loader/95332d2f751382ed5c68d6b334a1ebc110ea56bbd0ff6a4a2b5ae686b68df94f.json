{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nconst _excluded = [\"receiverId\"];\nvar _jsxFileName = \"C:\\\\Users\\\\DinhPhongIUH\\\\Desktop\\\\nhap\\\\Yanuo_mobile_Redux\\\\screens\\\\ChatScreen.js\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport useWindowDimensions from \"react-native-web/dist/exports/useWindowDimensions\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport HeaderChatView from './HeaderChat';\nimport ChatViewBT from './ChatViewBT';\nimport { useKeyboard } from '@react-native-community/hooks';\nimport EmojiPicker from '../components/message/emoijs/EmojiPicker';\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { userChats } from '../api/ChatRequests';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addMessage, deleteOne, getConversition, getMessages, getPinMessage, pinMessage, readMessage, recallMessage, unPinMessage } from '../api/MessageRequests';\nimport { getUser } from '../api/UserRequests';\nimport { useMessage } from './context/chatContext';\nimport MessageButton from './components/MessageButton';\nimport Message from './messageComponents/Message';\nimport EmojiLike from './facebookSVG-Emoj/EmojiLike';\nimport EmojiLove from './facebookSVG-Emoj/EmojiLove';\nimport EmojiCare from './facebookSVG-Emoj/EmojiCare';\nimport EmojiHaha from './facebookSVG-Emoj/EmojiHaha';\nimport EmojiWow from './facebookSVG-Emoj/EmojiWow';\nimport EmojiSad from './facebookSVG-Emoj/EmojiSad';\nimport EmojiAngry from './facebookSVG-Emoj/EmojiAngry';\nimport { MotiView, AnimatePresence } from \"moti\";\nimport Backdrop from './components/Backdrop';\nimport EmojiItem from './components/EmojiItem';\nimport Hint from './components/Hint';\nimport { PanGestureHandler } from 'react-native-gesture-handler';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\nimport * as MediaLibrary from 'expo-media-library';\nimport PortalView from './messageComponents/ProtalView';\nimport { Host } from 'react-native-portalize';\nimport ActionSheet from 'react-native-actionsheet';\nimport BottomSheet from '@gorhom/bottom-sheet';\nimport CallAudio from './messageComponents/callAudioSCR';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst testMessData = [{\n  type: 'text',\n  content: {\n    text: 'check out this coll picture I took'\n  },\n  sender: {\n    name: 'Jrane',\n    avatar: 'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile'\n  },\n  isSender: false,\n  createdAt: '2024-04-18-01T09:40:00Z'\n}, {\n  type: 'image',\n  content: {\n    imageURL: 'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile'\n  },\n  sender: {\n    name: 'John',\n    avatar: 'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile'\n  }\n}, {\n  type: 'text',\n  content: {\n    text: 'Hey, how are you?'\n  },\n  sender: {\n    name: 'Jane',\n    avatar: 'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile'\n  },\n  isSender: true,\n  createdAt: '2024-04-19-01T09:40:00Z'\n}, {\n  type: 'text',\n  content: {\n    text: 'Hey, how are you?'\n  },\n  sender: {\n    name: 'Jane',\n    avatar: 'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile'\n  },\n  isSender: true,\n  createdAt: '2024-04-19-01T09:40:00Z'\n}, {\n  type: 'image',\n  content: {\n    imageURL: 'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile'\n  },\n  sender: {\n    name: 'John',\n    avatar: 'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile'\n  }\n}];\nconst {\n  height,\n  width\n} = Dimensions.get('window');\nconst items = [{\n  emojis: _jsxDEV(EmojiLike, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 14\n  }, this),\n  title: \"like\",\n  color: \"rgb(32, 120, 244)\"\n}, {\n  emojis: _jsxDEV(EmojiLove, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 14\n  }, this),\n  title: \"love\",\n  color: \"rgb(243, 62, 88)\"\n}, {\n  emojis: _jsxDEV(EmojiCare, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 14\n  }, this),\n  title: \"care\",\n  color: \"rgb(247, 177, 37)\"\n}, {\n  emojis: _jsxDEV(EmojiHaha, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 14\n  }, this),\n  title: \"haha\",\n  color: \"rgb(247, 177, 37)\"\n}, {\n  emojis: _jsxDEV(EmojiWow, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 14\n  }, this),\n  title: \"wow\",\n  color: \"rgb(247, 177, 37)\"\n}, {\n  emojis: _jsxDEV(EmojiSad, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 14\n  }, this),\n  title: \"sad\",\n  color: \"rgb(247, 177, 37)\"\n}, {\n  emojis: _jsxDEV(EmojiAngry, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 14\n  }, this),\n  title: \"angry\",\n  color: \"rgb(233, 113, 15)\"\n}];\nexport default function Chat({\n  navigation,\n  route\n}) {\n  const profile = useSelector(state => state.meSlice.userProfile);\n  const chat = route.params.chat;\n  const currentUser = route.params.currentUser;\n  const setSendMessage = route.params.setSendMessage;\n  const socket = route.params.socket;\n  const sendMessage = route.params.sendMessage;\n  const {\n    receiveMessage,\n    setReceiveMessage\n  } = useMessage();\n  const isGroupChat = chat.type === 'group';\n  const anotherName = isGroupChat ? chat.groupName : route.params.memberId;\n  const setCon = route.params.setCon;\n  useEffect(() => {\n    const fetchConversition = async () => {\n      try {\n        const res = await getConversition(profile._id);\n        setCon(res.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    const readMess = async () => {\n      try {\n        const res = await readMessage({\n          chatId: chat._id,\n          userId: profile._id\n        });\n        console.log('kết quả red', res.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    readMess();\n    fetchConversition();\n  }, [chat._id]);\n  const [userData, setUserData] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [replyTo, setReplyTo] = useState(null);\n  const [listPinMessge, setListPinMessage] = useState(null);\n  useEffect(() => {\n    const fetchPinMessage = async () => {\n      try {\n        const res = await getPinMessage(chat._id);\n        if (res.data.success) {\n          setListPinMessage(res.data.pinnedMessagesDetails);\n        } else setListPinMessage([]);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchPinMessage();\n  }, []);\n  useEffect(() => {\n    const fetchPinMessage = async () => {\n      try {\n        const res = await getPinMessage(chat._id);\n        if (res.data.success) setListPinMessage(res.data.pinnedMessagesDetails);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    socket.current.on('receive-pinMessage', data => {\n      const {\n          receiverId\n        } = data,\n        messageData = _objectWithoutProperties(data, _excluded);\n      if (listPinMessge === null) fetchPinMessage();else setListPinMessage(prevListPinMessage => [...prevListPinMessage, messageData]);\n    });\n  }, []);\n  useEffect(() => {\n    const fetchPinMessage = async () => {\n      try {\n        const res = await getPinMessage(chat._id);\n        if (res.data.success) setListPinMessage(res.data.pinnedMessagesDetails);\n      } catch (error) {\n        setListPinMessage(null);\n        console.log(error);\n      }\n    };\n    socket.current.on('receive-unpinMessage', data => {\n      fetchPinMessage();\n    });\n  }, []);\n  const [selectedShareMess, setSelectedShareMess] = useState(null);\n  const [conversition, setConversition] = useState([]);\n  const [isBottomSheetShareMess, setIsBottomSheetShareMess] = useState(false);\n  const snapPoints = useMemo(() => ['1%', '90%', '90%'], []);\n  const bottomSheetRefShareMess = useRef(null);\n  const handleClosePress = () => {\n    setSelectedShareMess(null);\n    bottomSheetRefShareMess.current?.snapToIndex(0);\n  };\n  const handleOpenPress = async _id => {\n    const selectedMessage = messages.find(item => item._id === _id);\n    setSelectedShareMess(selectedMessage);\n    bottomSheetRefShareMess.current?.snapToIndex(1);\n    setIsBottomSheetShareMess(true);\n    try {\n      const res = await getConversition(profile._id);\n      setConversition(res.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  function BubbleMessage({\n    author,\n    message,\n    mediaUrl,\n    currentUser,\n    _id,\n    senderId,\n    replyMess\n  }) {\n    let repliedMessage = null;\n    const isPinned = listPinMessge && listPinMessge.some(item => item.messageId === _id);\n    console.log('sada', isPinned);\n    if (replyMess.replyTo) {\n      repliedMessage = messages.find(message => message._id === replyMess.replyTo);\n      console.log('9713', repliedMessage);\n    }\n    const handlerecallMessage = async () => {\n      console.log(_id);\n      const data = {\n        messageId: _id,\n        senderId: senderId\n      };\n      try {\n        const res = await recallMessage(data);\n        if (res.data.success) {\n          setMessages(prevMessages => {\n            return prevMessages.map(message => {\n              if (message._id === _id) {\n                if (message.type === \"text\") {\n                  return _objectSpread(_objectSpread({}, message), {}, {\n                    text: 'Đã thu hồi 1 tin nhắn'\n                  });\n                } else if (message.type === \"media\") {\n                  return _objectSpread(_objectSpread({}, message), {}, {\n                    text: 'Đã thu hồi 1 file',\n                    mediaUrl: []\n                  });\n                }\n              }\n              return message;\n            });\n          });\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    const handleDeleteOne = async () => {\n      const data = {\n        message_id: _id,\n        _id: profile._id\n      };\n      try {\n        const res = await deleteOne(data);\n        if (res.data.success) {\n          setMessages(messages.filter(message => message._id !== data.message_id));\n          console.log('delete success');\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    handleActionSheetPress = index => {\n      switch (index) {\n        case 0:\n          {\n            if (isGroupChat) {\n              const receiverId = chat.members.filter(id => id !== profile._id);\n              console.log('tesaxChat', receiverId);\n              data = {\n                id: _id,\n                receiverId: receiverId\n              };\n            } else {\n              const receiverId = chat.members.find(id => id !== profile._id);\n              data = {\n                id: _id,\n                receiverId: receiverId\n              };\n            }\n            console.log('ddqwea', data);\n            socket.current.emit(\"recall-message\", data);\n            handlerecallMessage();\n            break;\n          }\n        case 1:\n          {\n            handleDeleteOne();\n            break;\n          }\n        default:\n          break;\n      }\n    };\n    const [current, setCurrent] = useState(null);\n    const [show, setShow] = useState(false);\n    const [showHint, setShowHint] = useState(false);\n    const btnPressHandler = () => {\n      setCurrent(null);\n      setShow(true);\n      setShowHint(false);\n    };\n    const onClose = () => {\n      setShow(false);\n      setShowHint(false);\n      setCurrent(null);\n    };\n    const onGesture = event => {\n      if (event.nativeEvent.absoluteY >= 0 && event.nativeEvent.absoluteY <= 490 && event.nativeEvent.absoluteX >= 16 && event.nativeEvent.absoluteX <= 367) {\n        setShowHint(false);\n        const currentItem = Math.floor(event.nativeEvent.x / 50);\n        if (currentItem >= 0 && currentItem < items.length) {\n          setCurrent(currentItem);\n        } else {\n          setCurrent(null);\n        }\n      } else {\n        setCurrent(null);\n        setShowHint(true);\n      }\n    };\n    const gestureEnded = () => {\n      setShow(false);\n      setShowHint(false);\n    };\n    const emoijPressHanler = index => {\n      setShow(false);\n      setShowHint(false);\n      setCurrent(index);\n    };\n    useEffect(() => {\n      socket.current.on(\"recall-message-receive\", data => {\n        const {\n          id\n        } = data;\n        setMessages(prevMessages => {\n          return prevMessages.map(message => {\n            if (message._id === id) {\n              if (message.type === \"text\") {\n                return _objectSpread(_objectSpread({}, message), {}, {\n                  text: 'Đã thu hồi 1 tin nhắn'\n                });\n              } else if (message.type === \"media\") {\n                return _objectSpread(_objectSpread({}, message), {}, {\n                  text: 'Đã thu hồi 1 file',\n                  mediaUrl: []\n                });\n              }\n            }\n            return message;\n          });\n        });\n      });\n    }, []);\n    const handlePinMessage = async () => {\n      const data = {\n        chatId: chat._id,\n        messageId: _id,\n        userId: profile._id\n      };\n      try {\n        const res = await pinMessage(data);\n        if (res.data.success) {\n          const res = await getPinMessage(chat._id);\n          setListPinMessage(res.data.pinnedMessagesDetails);\n          if (!isGroupChat) {\n            receiverId = chat.members.find(id => id !== profile._id);\n          } else {\n            receiverId = chat.members.filter(id => id !== profile._id);\n          }\n          const data = _objectSpread(_objectSpread({}, res.data.pinnedMessagesDetails), {}, {\n            receiverId\n          });\n          socket.current.emit(\"pinMessage\", data);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    const handleUnpinMessage = async () => {\n      const data = {\n        chatId: chat._id,\n        messageId: _id\n      };\n      try {\n        const res = await unPinMessage(data);\n        if (res.data.success) {\n          if (!isGroupChat) {\n            receiverId = chat.members.find(id => id !== profile._id);\n          } else {\n            receiverId = chat.members.filter(id => id !== profile._id);\n          }\n          const data = {\n            _id,\n            receiverId\n          };\n          socket.current.emit(\"unPinMessage\", data);\n          const res1 = await getPinMessage(chat._id);\n          console.log('ress1', res1.data);\n          setListPinMessage(res1.data.pinnedMessagesDetails);\n        }\n      } catch (error) {\n        setListPinMessage(null);\n        if (!isGroupChat) {\n          receiverId = chat.members.find(id => id !== profile._id);\n        } else {\n          receiverId = chat.members.filter(id => id !== profile._id);\n        }\n        const data = _objectSpread(_objectSpread({}, res.data.pinnedMessagesDetails), {}, {\n          receiverId\n        });\n        socket.current.emit(\"unPinMessage\", data);\n        console.log(error);\n      }\n    };\n    return _jsxDEV(_Fragment, {\n      children: [_jsxDEV(AnimatePresence, {\n        children: show && _jsxDEV(_Fragment, {\n          children: [_jsxDEV(PanGestureHandler, {\n            onGestureEvent: onGesture,\n            onEnded: gestureEnded,\n            children: _jsxDEV(MotiView, {\n              style: {\n                position: 'absolute',\n                height: 50,\n                justifyContent: 'center',\n                zIndex: 100,\n                top: -50\n              },\n              from: {\n                opacity: 0\n              },\n              animate: {\n                opacity: 1\n              },\n              children: _jsxDEV(MotiView, {\n                style: {\n                  alignItems: 'center'\n                },\n                from: {\n                  translateY: 40,\n                  opacity: 1\n                },\n                animate: {\n                  translateY: 0,\n                  opacity: 1\n                },\n                exit: {\n                  translateY: 40,\n                  opacity: 0\n                },\n                transition: {\n                  duration: 800\n                },\n                children: _jsxDEV(View, {\n                  style: {\n                    flexDirection: 'row',\n                    borderRadius: 33,\n                    backgroundColor: '#fff',\n                    shadowColor: \"#000\",\n                    shadowOffset: {\n                      width: 0,\n                      height: 2\n                    },\n                    shadowOpacity: 0,\n                    shadowRadius: 1\n                  },\n                  children: items.map((item, index) => _jsxDEV(EmojiItem, {\n                    onPress: () => emoijPressHanler(index),\n                    data: item,\n                    index: index,\n                    scaled: current === index\n                  }, item.title, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 574,\n                    columnNumber: 33\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 559,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 17\n          }, this), _jsxDEV(PanGestureHandler, {\n            onGestureEvent: onGesture,\n            onEnded: gestureEnded,\n            children: _jsxDEV(MotiView, {\n              style: {\n                position: 'absolute',\n                height: 50,\n                justifyContent: 'center',\n                zIndex: 100,\n                top: 100\n              },\n              from: {\n                opacity: 0\n              },\n              animate: {\n                opacity: 1\n              },\n              children: _jsxDEV(MotiView, {\n                style: {\n                  alignItems: 'center'\n                },\n                from: {\n                  translateY: 40,\n                  opacity: 1\n                },\n                animate: {\n                  translateY: 0,\n                  opacity: 1\n                },\n                exit: {\n                  translateY: 40,\n                  opacity: 0\n                },\n                transition: {\n                  duration: 800\n                },\n                children: _jsxDEV(View, {\n                  style: {\n                    width: 150,\n                    borderRadius: 8,\n                    backgroundColor: '#fff',\n                    shadowColor: \"#000\",\n                    shadowOffset: {\n                      width: 0,\n                      height: 2\n                    },\n                    shadowOpacity: 0,\n                    shadowRadius: 1,\n                    padding: 10,\n                    position: 'absolute',\n                    left: 0,\n                    zIndex: 100\n                  },\n                  children: _jsxDEV(View, {\n                    style: {\n                      width: '100%',\n                      top: -100\n                    },\n                    children: [_jsxDEV(TouchableOpacity, {\n                      style: {\n                        width: '100%',\n                        flexDirection: 'row',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        borderBottomWidth: 1,\n                        height: 30,\n                        borderColor: '#e0e0e0'\n                      },\n                      onPress: () => setReplyTo({\n                        messageId: _id,\n                        _id: senderId,\n                        message: message\n                      }),\n                      children: [_jsxDEV(Text, {\n                        children: \"Tr\\u1EA3 l\\u1EDDi\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 623,\n                        columnNumber: 41\n                      }, this), _jsxDEV(Image, {\n                        source: require('./Icon/shareDark.png'),\n                        resizeMode: \"contain\",\n                        style: {\n                          transform: [{\n                            scaleX: -1\n                          }],\n                          width: 20,\n                          height: 20\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 624,\n                        columnNumber: 41\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 619,\n                      columnNumber: 37\n                    }, this), _jsxDEV(TouchableOpacity, {\n                      style: {\n                        width: '100%',\n                        flexDirection: 'row',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        borderBottomWidth: 1,\n                        height: 30,\n                        borderColor: '#e0e0e0'\n                      },\n                      children: [_jsxDEV(Text, {\n                        children: \"Sao ch\\xE9p\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 633,\n                        columnNumber: 41\n                      }, this), _jsxDEV(Image, {\n                        source: require('./Icon/coppy.png'),\n                        resizeMode: \"contain\",\n                        style: {\n                          transform: [{\n                            scaleX: -1\n                          }],\n                          width: 20,\n                          height: 20\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 634,\n                        columnNumber: 41\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 630,\n                      columnNumber: 37\n                    }, this), _jsxDEV(TouchableOpacity, {\n                      style: {\n                        width: '100%',\n                        flexDirection: 'row',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        borderBottomWidth: 1,\n                        height: 30,\n                        borderColor: '#e0e0e0'\n                      },\n                      onPress: () => handleOpenPress(_id),\n                      children: [_jsxDEV(Text, {\n                        children: \"Chuy\\u1EC3n ti\\u1EBFp\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 644,\n                        columnNumber: 41\n                      }, this), _jsxDEV(Image, {\n                        source: require('./Icon/shareDark.png'),\n                        resizeMode: \"contain\",\n                        style: {\n                          transform: [{\n                            scaleX: -1\n                          }],\n                          width: 20,\n                          height: 20\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 645,\n                        columnNumber: 41\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 640,\n                      columnNumber: 37\n                    }, this), _jsxDEV(TouchableOpacity, {\n                      style: {\n                        width: '100%',\n                        flexDirection: 'row',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        height: 30\n                      },\n                      onPress: () => !isPinned ? handlePinMessage() : handleUnpinMessage(),\n                      children: [_jsxDEV(Text, {\n                        style: {\n                          color: isPinned ? 'red' : null\n                        },\n                        children: !isPinned ? 'Ghim' : 'Bỏ ghim'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 655,\n                        columnNumber: 41\n                      }, this), _jsxDEV(Image, {\n                        source: require('./Icon/pinBlack.png'),\n                        resizeMode: \"contain\",\n                        style: {\n                          width: 20,\n                          height: 20\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 656,\n                        columnNumber: 41\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 651,\n                      columnNumber: 37\n                    }, this), _jsxDEV(TouchableOpacity, {\n                      style: {\n                        width: '100%',\n                        flexDirection: 'row',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        height: 30\n                      },\n                      onPress: () => actionSheet.current.show(),\n                      children: [_jsxDEV(Text, {\n                        style: {\n                          color: 'red'\n                        },\n                        children: \"Xo\\xE1, thu h\\u1ED3i\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 666,\n                        columnNumber: 41\n                      }, this), _jsxDEV(Image, {\n                        source: require('./Icon/trashRed.png'),\n                        resizeMode: \"contain\",\n                        style: {\n                          transform: [{\n                            scaleX: -1\n                          }],\n                          width: 20,\n                          height: 20\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 667,\n                        columnNumber: 41\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 662,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 618,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 598,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 13\n      }, this), show && _jsxDEV(Hint, {\n        hint: showHint\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 682,\n        columnNumber: 22\n      }, this), show && _jsxDEV(Backdrop, {\n        onPress: onClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 683,\n        columnNumber: 22\n      }, this), _jsxDEV(MessageButton, {\n        onLongPress: btnPressHandler,\n        author: author,\n        text: message,\n        profile: profile,\n        color: current === null ? '#000' : items[current].color,\n        emoji: current ? items[current === null ? 0 : current].emojis : null,\n        mediaUrl: mediaUrl,\n        currentUser: currentUser,\n        isGroupChat: isGroupChat,\n        navigation: navigation,\n        senderId: senderId,\n        replyMess: replyMess,\n        repliedMessage: repliedMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 684,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true);\n  }\n  useEffect(() => {\n    const fetchMessages = async () => {\n      try {\n        const {\n          data\n        } = await getMessages(chat._id, profile._id);\n        setMessages(data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    socket.current.on(\"receive-media\", data => {\n      fetchMessages();\n    });\n  }, [Chat, messages]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  useEffect(() => {\n    if (receiveMessage !== null && receiveMessage.chatId === chat._id) {\n      setMessages([...messages, receiveMessage]);\n    }\n  }, [receiveMessage]);\n  useEffect(() => {\n    const userId = chat?.members?.find(id => id !== currentUser);\n    console.log('s231', userId);\n    const getUserData = async () => {\n      try {\n        const res = await getUser(userId);\n        if (res.data.success) setUserData(res.data.user);\n        console.log('tsdasd: ', res.data.user);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    if (chat !== null) getUserData();\n  }, [chat, currentUser]);\n  useEffect(() => {\n    const fetchMessages = async () => {\n      try {\n        const {\n          data\n        } = await getMessages(chat._id, profile._id);\n        setMessages(data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    if (chat !== null) fetchMessages();\n  }, [chat]);\n  const heightAnim = useRef(new Animated.Value(0)).current;\n  const [openImageLib, setOpenImageLib] = useState(null);\n  const imagePiOpen = () => {\n    Keyboard.dismiss();\n    console.log('cccc', openImageLib);\n    fetchImages();\n    setOpenImageLib(!openImageLib);\n    Animated.timing(heightAnim, {\n      toValue: openImageLib ? 300 : 0,\n      duration: 400,\n      useNativeDriver: false\n    }).start();\n    setSelectedImages([]);\n  };\n  const [testAlbum, setAlbum] = useState([]);\n  const fetchImages = async () => {\n    const {\n      status\n    } = await MediaLibrary.requestPermissionsAsync();\n    if (status !== 'granted') {\n      alert('Chúng tôi cần quyền truy cập hình ảnh của bạn!');\n      return;\n    }\n    const album = await MediaLibrary.getAssetsAsync({\n      mediaType: 'all',\n      first: 100\n    });\n    const imageArrayPromises = album.assets.map(async asset => {\n      const assetInfo = await MediaLibrary.getAssetInfoAsync(asset.id);\n      return assetInfo.localUri;\n    });\n    const imageArray = await Promise.all(imageArrayPromises);\n    setAlbum(imageArray);\n  };\n  const [selectedImages, setSelectedImages] = useState([]);\n  const handleSelectImage = uri => {\n    if (selectedImages.includes(uri)) {\n      setSelectedImages(selectedImages.filter(item => item !== uri));\n    } else {\n      setSelectedImages([...selectedImages, uri]);\n    }\n    console.log('seee', testAlbum[0]);\n  };\n  const flatListRef = useRef();\n  const scrollToBottom = () => {\n    flatListRef.current.scrollToEnd({\n      animated: true\n    });\n  };\n  const {\n    height1\n  } = useWindowDimensions();\n  const [messageCordinates, setMessageCordinates] = useState({\n    x: 0,\n    y: 0\n  });\n  const [selectedMessage, setSelectedMessage] = useState(null);\n  const [yLocation, setYlocation] = useState({\n    x: 0,\n    y: 0\n  });\n  const [isSender, setSender] = useState(false);\n  const onLongPress = (e, message, touchpadRef) => {\n    const {\n      pageY,\n      locationY\n    } = e.nativeEvent;\n    let y = pageY - locationY;\n    const isLessDisatanceFromTop = y < 100;\n    const isLessDisatanceFromBottom = height1 - y < message?.layoutHeight;\n    if (isLessDisatanceFromBottom) {\n      console.log('Bottoom');\n      y = y - message?.layoutHeight;\n    }\n    if (isLessDisatanceFromTop) {\n      console.log('BottoomTop');\n      y = y + message?.layoutHeight;\n    }\n    console.log('distance', isLessDisatanceFromTop);\n    setMessageCordinates({\n      x: 0,\n      y: pageY - locationY\n    });\n    console.log('yLocation', touchpadRef);\n    setYlocation({\n      x: 0,\n      y: touchpadRef + (pageY - locationY)\n    });\n    setSelectedMessage(message);\n  };\n  let actionSheet = React.createRef();\n  const handlePressShareMess = async item => {\n    const handleSend = async () => {\n      const message = {\n        chatId: item.chatId,\n        senderId: profile._id,\n        text: selectedShareMess.text\n      };\n      if (!isGroupChat) {\n        receiverId = chat.members.find(id => id !== currentUser);\n      } else {\n        receiverId = chat.members.filter(id => id !== currentUser);\n      }\n      setSendMessage(_objectSpread(_objectSpread({}, message), {}, {\n        receiverId\n      }));\n      try {\n        const {\n          data\n        } = await addMessage(message);\n        setMessages([...messages, data]);\n        setMess(\"\");\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    console.log('replyy', selectedShareMess);\n    if (selectedShareMess.type === 'text') {\n      handleSend();\n      console.log('gửi tin nhắn');\n    } else {\n      console.log('gửi file', selectedShareMess.mediaUrl);\n    }\n  };\n  const [modalCallAudioVisible, setModalCallAudioVisible] = useState(false);\n  return _jsxDEV(Host, {\n    children: _jsxDEV(GestureHandlerRootView, {\n      style: {\n        flex: 1\n      },\n      children: [_jsxDEV(TouchableWithoutFeedback, {\n        onPress: () => !openImageLib ? imagePiOpen() : null,\n        children: _jsxDEV(SafeAreaView, {\n          style: styles.container,\n          children: [isGroupChat ? _jsxDEV(HeaderChatView, {\n            chat: chat,\n            groupName: chat.groupName,\n            userData: userData,\n            navigation: navigation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1056,\n            columnNumber: 17\n          }, this) : _jsxDEV(HeaderChatView, {\n            userData: userData,\n            navigation: navigation,\n            setModalCallAudioVisible: setModalCallAudioVisible\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1057,\n            columnNumber: 17\n          }, this), _jsxDEV(KeyboardAvoidingView, {\n            keyboardVerticalOffset: 0,\n            behavior: Platform.OS === \"ios\" ? \"padding\" : undefined,\n            children: _jsxDEV(View, {\n              style: {\n                width: '100%',\n                height: '100%',\n                backgroundColor: '#fff',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              },\n              children: [_jsxDEV(FlatList, {\n                ref: flatListRef,\n                data: messages,\n                renderItem: ({\n                  item\n                }) => _jsxDEV(BubbleMessage, {\n                  author: item.senderId,\n                  message: item.text,\n                  createdAt: item.createdAt,\n                  mediaUrl: item.text === '' ? item.mediaUrl : null,\n                  _id: item._id,\n                  senderId: item.senderId,\n                  replyMess: item\n                }, item._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1075,\n                  columnNumber: 33\n                }, this),\n                keyExtractor: item => item.createdAt,\n                contentContainerStyle: {\n                  paddingHorizontal: 10,\n                  gap: 10\n                },\n                style: {\n                  width: width,\n                  minHeight: '85%',\n                  height: '80%'\n                },\n                automaticallyAdjustKeyboardInsets: true,\n                onContentSizeChange: scrollToBottom,\n                onLayout: scrollToBottom\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1070,\n                columnNumber: 25\n              }, this), _jsxDEV(PortalView, {\n                selectedMessage: selectedMessage,\n                messageCordinates: messageCordinates,\n                yLocation: yLocation,\n                setSelectedMessage: setSelectedMessage,\n                isSender: isSender,\n                items: items\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1096,\n                columnNumber: 21\n              }, this), _jsxDEV(ChatViewBT, {\n                currentUser: currentUser,\n                chat: chat,\n                setMessages: setMessages,\n                messages: messages,\n                setSendMessage: true,\n                socket: socket,\n                imagePiOpen: imagePiOpen,\n                selectedImages: selectedImages,\n                setSelectedImages: setSelectedImages,\n                replyTo: replyTo,\n                setReplyTo: setReplyTo,\n                listPinMessge: listPinMessge,\n                setListPinMessge: setListPinMessage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1104,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1065,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1060,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1054,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1051,\n        columnNumber: 9\n      }, this), _jsxDEV(Animated.View, {\n        style: {\n          width: '100%',\n          height: heightAnim,\n          backgroundColor: '#fff',\n          marginTop: 50\n        },\n        children: _jsxDEV(ScrollView, {\n          style: {\n            width: '100%',\n            height: '100%'\n          },\n          children: _jsxDEV(View, {\n            style: {\n              flexDirection: 'row',\n              width: '100%',\n              flexWrap: 'wrap'\n            },\n            children: [_jsxDEV(TouchableOpacity, {\n              style: {\n                width: 125,\n                height: 120\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1118,\n              columnNumber: 21\n            }, this), testAlbum.map((item, index) => _jsxDEV(TouchableOpacity, {\n              style: {\n                width: 125,\n                height: 120,\n                backgroundColor: 'pink',\n                borderWidth: 1,\n                borderColor: '#fff'\n              },\n              children: [_jsxDEV(Image, {\n                source: {\n                  uri: item\n                },\n                style: {\n                  width: '100%',\n                  height: '100%'\n                },\n                resizeMode: \"cover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1126,\n                columnNumber: 29\n              }, this), _jsxDEV(TouchableOpacity, {\n                style: {\n                  width: 24,\n                  height: 24,\n                  borderRadius: 20,\n                  position: 'absolute',\n                  right: 0,\n                  margin: 10,\n                  borderWidth: 1,\n                  borderColor: '#fff',\n                  backgroundColor: selectedImages.includes(item) ? '#009ef9' : 'rgba(0,0,0,0.2)',\n                  justifyContent: 'center',\n                  alignItems: 'center'\n                },\n                onPress: () => handleSelectImage(item),\n                children: selectedImages.indexOf(item) > 0 ? _jsxDEV(Text, {\n                  style: {\n                    color: '#fff',\n                    fontWeight: 'bold'\n                  },\n                  children: selectedImages.indexOf(item) + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1136,\n                  columnNumber: 37\n                }, this) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1131,\n                columnNumber: 29\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1122,\n              columnNumber: 25\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1117,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1114,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1113,\n        columnNumber: 9\n      }, this), _jsxDEV(ActionSheet, {\n        ref: actionSheet,\n        options: ['Thu hồi với mọi người', 'Thu hồi với bạn', 'Huỷ'],\n        cancelButtonIndex: 2,\n        onPress: index => {\n          handleActionSheetPress(index);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1144,\n        columnNumber: 9\n      }, this), _jsxDEV(BottomSheet, {\n        ref: bottomSheetRefShareMess,\n        snapPoints: snapPoints,\n        style: {\n          shadowColor: \"#000\",\n          shadowOffset: {\n            width: 0,\n            height: 2\n          },\n          shadowOpacity: 0.25,\n          shadowRadius: 3.84,\n          elevation: 5\n        },\n        onChange: index => {\n          index != 0 ? setIsBottomSheetShareMess(true) : setIsBottomSheetShareMess(false);\n        },\n        handleIndicatorStyle: {\n          backgroundColor: '#fff'\n        },\n        children: _jsxDEV(View, {\n          style: {\n            width: '100%',\n            alignItems: 'center'\n          },\n          children: [_jsxDEV(View, {\n            style: {\n              width: '90%',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              flexDirection: 'row'\n            },\n            children: [_jsxDEV(TouchableOpacity, {\n              onPress: () => handleClosePress(),\n              children: _jsxDEV(Text, {\n                style: {\n                  color: '#2f79e7',\n                  fontWeight: '700'\n                },\n                children: \"Xong\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1172,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1169,\n              columnNumber: 21\n            }, this), _jsxDEV(Text, {\n              style: {\n                fontWeight: 'bold',\n                fontSize: 16\n              },\n              children: \"G\\u1EEDi \\u0111\\u1EBFn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1174,\n              columnNumber: 21\n            }, this), _jsxDEV(TouchableOpacity, {\n              children: _jsxDEV(Text, {\n                style: {\n                  color: '#2f79e7',\n                  fontWeight: '700'\n                },\n                children: \"T\\u1EA1o nh\\xF3m\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1176,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1175,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1168,\n            columnNumber: 17\n          }, this), _jsxDEV(View, {\n            style: {\n              width: '90%',\n              height: 45,\n              backgroundColor: '#f5f5f5',\n              borderRadius: 10,\n              padding: 10,\n              flexDirection: 'row',\n              alignItems: 'center',\n              marginTop: 15\n            },\n            children: [_jsxDEV(Image, {\n              source: require('./Icon/Search114.png'),\n              resizeMode: \"contain\",\n              style: {\n                width: 20,\n                height: 20,\n                marginRight: 10\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1180,\n              columnNumber: 21\n            }, this), _jsxDEV(TextInput, {\n              placeholder: \"T\\xECm ki\\u1EBFm\",\n              style: {\n                width: '90%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1185,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1179,\n            columnNumber: 17\n          }, this), _jsxDEV(View, {\n            style: {\n              width: '90%',\n              alignItems: 'center'\n            },\n            children: _jsxDEV(ScrollView, {\n              style: {\n                width: '100%',\n                height: '100%'\n              },\n              children: conversition.map((item, index) => _jsxDEV(View, {\n                style: {\n                  width: '100%',\n                  height: 50,\n                  flexDirection: 'row',\n                  alignItems: 'center',\n                  justifyContent: 'space-between',\n                  marginVertical: 15\n                },\n                children: [_jsxDEV(View, {\n                  style: {\n                    width: 50,\n                    height: 50\n                  },\n                  children: _jsxDEV(Image, {\n                    source: {\n                      uri: item.type === 'group' ? item.groupAvatar : item.avatar\n                    },\n                    resizeMode: \"cover\",\n                    style: {\n                      width: '100%',\n                      height: '100%',\n                      borderRadius: 50\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1199,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1196,\n                  columnNumber: 33\n                }, this), _jsxDEV(Text, {\n                  style: {\n                    fontSize: 16,\n                    fontWeight: 'bold',\n                    width: '62%',\n                    marginLeft: 20\n                  },\n                  children: item.type === 'group' ? item.groupName : item.userName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1205,\n                  columnNumber: 33\n                }, this), _jsxDEV(TouchableOpacity, {\n                  style: {\n                    width: 50,\n                    height: 30,\n                    backgroundColor: '#f5f5f5',\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                    borderRadius: 30\n                  },\n                  onPress: () => handlePressShareMess(item),\n                  children: _jsxDEV(Text, {\n                    style: {\n                      fontSize: 16,\n                      fontWeight: 'bold'\n                    },\n                    children: \"G\\u1EEDi\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1210,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1206,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1195,\n                columnNumber: 29\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1191,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1190,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1167,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1151,\n        columnNumber: 9\n      }, this), _jsxDEV(Modal, {\n        animationType: \"fade\",\n        transparent: true,\n        visible: modalCallAudioVisible,\n        children: _jsxDEV(CallAudio, {\n          setModalCallAudioVisible: setModalCallAudioVisible,\n          userData: userData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1224,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1219,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1050,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1048,\n    columnNumber: 9\n  }, this);\n}\n;\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: '#009ef9'\n  }\n});","map":{"version":3,"names":["HeaderChatView","ChatViewBT","useKeyboard","EmojiPicker","React","useEffect","useMemo","useRef","useState","userChats","useDispatch","useSelector","addMessage","deleteOne","getConversition","getMessages","getPinMessage","pinMessage","readMessage","recallMessage","unPinMessage","getUser","useMessage","MessageButton","Message","EmojiLike","EmojiLove","EmojiCare","EmojiHaha","EmojiWow","EmojiSad","EmojiAngry","MotiView","AnimatePresence","Backdrop","EmojiItem","Hint","PanGestureHandler","GestureHandlerRootView","MediaLibrary","PortalView","Host","ActionSheet","BottomSheet","CallAudio","jsxDEV","_jsxDEV","Fragment","_Fragment","testMessData","type","content","text","sender","name","avatar","isSender","createdAt","imageURL","height","width","Dimensions","get","items","emojis","fileName","_jsxFileName","lineNumber","columnNumber","title","color","Chat","navigation","route","profile","state","meSlice","userProfile","chat","params","currentUser","setSendMessage","socket","sendMessage","receiveMessage","setReceiveMessage","isGroupChat","anotherName","groupName","memberId","setCon","fetchConversition","res","_id","data","error","console","log","readMess","chatId","userId","userData","setUserData","messages","setMessages","replyTo","setReplyTo","listPinMessge","setListPinMessage","fetchPinMessage","success","pinnedMessagesDetails","current","on","receiverId","messageData","_objectWithoutProperties","_excluded","prevListPinMessage","selectedShareMess","setSelectedShareMess","conversition","setConversition","isBottomSheetShareMess","setIsBottomSheetShareMess","snapPoints","bottomSheetRefShareMess","handleClosePress","snapToIndex","handleOpenPress","selectedMessage","find","item","BubbleMessage","author","message","mediaUrl","senderId","replyMess","repliedMessage","isPinned","some","messageId","handlerecallMessage","prevMessages","map","_objectSpread","handleDeleteOne","message_id","filter","handleActionSheetPress","index","members","id","emit","setCurrent","show","setShow","showHint","setShowHint","btnPressHandler","onClose","onGesture","event","nativeEvent","absoluteY","absoluteX","currentItem","Math","floor","x","length","gestureEnded","emoijPressHanler","handlePinMessage","handleUnpinMessage","res1","children","onGestureEvent","onEnded","style","position","justifyContent","zIndex","top","from","opacity","animate","alignItems","translateY","exit","transition","duration","View","flexDirection","borderRadius","backgroundColor","shadowColor","shadowOffset","shadowOpacity","shadowRadius","onPress","scaled","padding","left","TouchableOpacity","borderBottomWidth","borderColor","Text","Image","source","require","resizeMode","transform","scaleX","actionSheet","hint","onLongPress","emoji","fetchMessages","newMessage","setNewMessage","getUserData","user","heightAnim","Animated","Value","openImageLib","setOpenImageLib","imagePiOpen","Keyboard","dismiss","fetchImages","timing","toValue","useNativeDriver","start","setSelectedImages","testAlbum","setAlbum","status","requestPermissionsAsync","alert","album","getAssetsAsync","mediaType","first","imageArrayPromises","assets","asset","assetInfo","getAssetInfoAsync","localUri","imageArray","Promise","all","selectedImages","handleSelectImage","uri","includes","flatListRef","scrollToBottom","scrollToEnd","animated","height1","useWindowDimensions","messageCordinates","setMessageCordinates","y","setSelectedMessage","yLocation","setYlocation","setSender","e","touchpadRef","pageY","locationY","isLessDisatanceFromTop","isLessDisatanceFromBottom","layoutHeight","createRef","handlePressShareMess","handleSend","setMess","modalCallAudioVisible","setModalCallAudioVisible","flex","TouchableWithoutFeedback","SafeAreaView","styles","container","KeyboardAvoidingView","keyboardVerticalOffset","behavior","Platform","OS","undefined","FlatList","ref","renderItem","keyExtractor","contentContainerStyle","paddingHorizontal","gap","minHeight","automaticallyAdjustKeyboardInsets","onContentSizeChange","onLayout","setListPinMessge","marginTop","ScrollView","flexWrap","borderWidth","right","margin","indexOf","fontWeight","options","cancelButtonIndex","elevation","onChange","handleIndicatorStyle","fontSize","marginRight","TextInput","placeholder","marginVertical","groupAvatar","marginLeft","userName","Modal","animationType","transparent","visible","StyleSheet","create"],"sources":["C:/Users/DinhPhongIUH/Desktop/nhap/Yanuo_mobile_Redux/screens/ChatScreen.js"],"sourcesContent":["import { StyleSheet, Text, View, Image, TouchableOpacity, SafeAreaView, Dimensions, Animated, TouchableWithoutFeedback, ScrollView, PanResponder, KeyboardAvoidingView, FlatList, Platform, Keyboard, useWindowDimensions, TextInput, Modal} from 'react-native';\r\nimport HeaderChatView from './HeaderChat';\r\nimport ChatViewBT from './ChatViewBT';\r\nimport {useKeyboard} from '@react-native-community/hooks';\r\nimport EmojiPicker from '../components/message/emoijs/EmojiPicker';\r\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { userChats } from '../api/ChatRequests';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { addMessage, deleteOne, getConversition, getMessages, getPinMessage, pinMessage, readMessage, recallMessage, unPinMessage } from '../api/MessageRequests';\r\nimport { getUser } from '../api/UserRequests';\r\nimport { useMessage } from './context/chatContext';\r\nimport MessageButton from './components/MessageButton';\r\nimport Message from './messageComponents/Message';\r\n\r\nimport EmojiLike from './facebookSVG-Emoj/EmojiLike';\r\nimport EmojiLove from './facebookSVG-Emoj/EmojiLove';\r\nimport EmojiCare from './facebookSVG-Emoj/EmojiCare';\r\nimport EmojiHaha from './facebookSVG-Emoj/EmojiHaha';\r\nimport EmojiWow from './facebookSVG-Emoj/EmojiWow';\r\nimport EmojiSad from './facebookSVG-Emoj/EmojiSad';\r\nimport EmojiAngry from './facebookSVG-Emoj/EmojiAngry';\r\nimport {MotiView, AnimatePresence} from \"moti\";\r\nimport Backdrop from './components/Backdrop';\r\nimport EmojiItem from './components/EmojiItem';\r\nimport Hint from './components/Hint';\r\nimport {PanGestureHandler } from 'react-native-gesture-handler';\r\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';  \r\nimport * as MediaLibrary from 'expo-media-library';\r\nimport PortalView from './messageComponents/ProtalView';\r\nimport {Host} from 'react-native-portalize';\r\nimport ActionSheet from 'react-native-actionsheet';\r\nimport BottomSheet from '@gorhom/bottom-sheet';\r\nimport CallAudio from './messageComponents/callAudioSCR';\r\n\r\n\r\n// import d from '@react-native-community/camerarol'\r\n\r\n// import { GestureHandlerRootView } from 'react-native-gesture-handler';\r\n\r\nconst testMessData = [{\r\n    type: 'text',\r\n    content: {\r\n        text: 'check out this coll picture I took'\r\n    },\r\n    sender: {\r\n        name: 'Jrane',\r\n        avatar: 'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile'\r\n    },\r\n    isSender: false,\r\n    createdAt: '2024-04-18-01T09:40:00Z'\r\n    },\r\n    {\r\n        type: 'image',\r\n        content: {\r\n          imageURL: 'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile',\r\n        },\r\n        sender: {\r\n          name: 'John',\r\n          avatar:\r\n            'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile',\r\n        }\r\n    },\r\n    {\r\n        type: 'text',\r\n        content: {\r\n          text: 'Hey, how are you?',\r\n        },\r\n        sender: {\r\n          name: 'Jane',\r\n          avatar: 'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile',\r\n        },\r\n        isSender: true,\r\n        createdAt: '2024-04-19-01T09:40:00Z',\r\n    },\r\n    {\r\n        type: 'text',\r\n        content: {\r\n          text: 'Hey, how are you?',\r\n        },\r\n        sender: {\r\n          name: 'Jane',\r\n          avatar: 'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile',\r\n        },\r\n        isSender: true,\r\n        createdAt: '2024-04-19-01T09:40:00Z',\r\n    },\r\n    {\r\n        type: 'image',\r\n        content: {\r\n          imageURL: 'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile',\r\n        },\r\n        sender: {\r\n          name: 'John',\r\n          avatar:\r\n            'https://demoyanuo1.s3.ap-southeast-1.amazonaws.com/6610563c575e7e8334874f0d_profile',\r\n        }\r\n    },\r\n]\r\nconst {height, width} = Dimensions.get('window');\r\nconst items = [\r\n    {emojis: <EmojiLike/>, title: \"like\", color: \"rgb(32, 120, 244)\"},\r\n    {emojis: <EmojiLove/>, title: \"love\", color: \"rgb(243, 62, 88)\"},\r\n    {emojis: <EmojiCare/>, title: \"care\", color: \"rgb(247, 177, 37)\"},\r\n    {emojis: <EmojiHaha/>, title: \"haha\", color: \"rgb(247, 177, 37)\"},\r\n    {emojis: <EmojiWow/>, title: \"wow\", color: \"rgb(247, 177, 37)\"},\r\n    {emojis: <EmojiSad/>, title: \"sad\", color: \"rgb(247, 177, 37)\"},\r\n    {emojis: <EmojiAngry/>, title: \"angry\", color: \"rgb(233, 113, 15)\"}\r\n]\r\nexport default function Chat({navigation, route}) {\r\n    // chat, currentUser, setSendMessage, recivedMessage\r\n    const profile = useSelector(state => state.meSlice.userProfile);\r\n    // const chat = '';\r\n    const chat = route.params.chat;\r\n    const currentUser = route.params.currentUser;\r\n    const setSendMessage = route.params.setSendMessage;\r\n    // const receiveMessage = route.params.receiveMessage;\r\n    // const anotherName = route.params.memberId;\r\n    const socket = route.params.socket;\r\n    const sendMessage = route.params.sendMessage;\r\n    // const setReceiveMessage = route.params.setReceiveMessage;\r\n    const {receiveMessage, setReceiveMessage} = useMessage();\r\n    // const setConversition = route.params.setConversition;\r\n\r\n    const isGroupChat = chat.type === 'group';\r\n    // Lấy danh sách các memberId cho chat nhóm, nếu không phải chat nhóm thì lấy memberId của người dùng khác\r\n    const anotherName = isGroupChat ? chat.groupName : route.params.memberId;\r\n    // console.log('isoeqma', route.params.setCon);\r\n    const setCon = route.params.setCon;\r\n    \r\n    // console.log('dzxs', chat.type);\r\n    // đọc tin nhắn\r\n    useEffect(() => {\r\n        const fetchConversition = async () => {\r\n            try\r\n            {\r\n                const res = await getConversition(profile._id);\r\n                // console.log('xx::', res.data);\r\n                setCon(res.data)\r\n            }\r\n            catch (error)\r\n            {\r\n                console.log(error);\r\n            }\r\n        };\r\n        const readMess = async() => {\r\n            try\r\n            {\r\n                const res = await readMessage({chatId: chat._id, userId: profile._id});\r\n                console.log('kết quả red', res.data);\r\n                // if (res.data.succcess)\r\n                    // awa fetchConversition();\r\n            }   \r\n            catch (error)\r\n            {\r\n                console.log(error);\r\n            }\r\n        }\r\n        readMess();\r\n        fetchConversition();\r\n    }, [chat._id]);\r\n\r\n    const [userData, setUserData] = useState('');\r\n    const [messages, setMessages] = useState([]);\r\n    // console.log('check Mess', messages);\r\n    const [replyTo, setReplyTo] = useState(null);\r\n    // console.log('replyd', replyTo);\r\n    const [listPinMessge, setListPinMessage] = useState(null);\r\n    useEffect(() => {\r\n        const fetchPinMessage = async() => {\r\n            try\r\n            {\r\n                const res = await getPinMessage(chat._id);\r\n                // console.log('teczx', res.data);\r\n                if (res.data.success)\r\n                {\r\n                    // console.log('sucaaa', res.data);\r\n                    setListPinMessage(res.data.pinnedMessagesDetails);\r\n                }\r\n                else\r\n                    setListPinMessage([]);\r\n            }\r\n            catch (error)\r\n            {\r\n                console.log(error);\r\n            }\r\n        }\r\n        fetchPinMessage();\r\n    }, []);\r\n\r\n    // socket pin\r\n    useEffect(() => {\r\n        const fetchPinMessage = async() => {\r\n            try\r\n            {\r\n                const res = await getPinMessage(chat._id);\r\n                if (res.data.success)\r\n                    setListPinMessage(res.data.pinnedMessagesDetails)\r\n            }\r\n            catch (error)\r\n            {\r\n                console.log(error);\r\n            }\r\n        }\r\n\r\n        socket.current.on('receive-pinMessage', (data) => {\r\n            const { receiverId, ...messageData } = data;\r\n            // console.log('checkk re', messageData);\r\n            if (listPinMessge === null)\r\n                fetchPinMessage();\r\n            else\r\n                setListPinMessage(prevListPinMessage => [...prevListPinMessage, messageData]);\r\n        })\r\n    }, []);\r\n\r\n    // socket unPin\r\n    useEffect(() => {\r\n        const fetchPinMessage = async() => {\r\n            try\r\n            {\r\n                const res = await getPinMessage(chat._id);\r\n                if (res.data.success)\r\n                    setListPinMessage(res.data.pinnedMessagesDetails)\r\n            }\r\n            catch (error)\r\n            {\r\n                setListPinMessage(null);\r\n                console.log(error);\r\n            }\r\n        }\r\n\r\n        socket.current.on('receive-unpinMessage', (data) => {\r\n            // console.log('đang un Pin');\r\n            fetchPinMessage();\r\n        })\r\n    }, []);\r\n\r\n     // BottomSheet chuyển tiếp tin nhắn\r\n    const [selectedShareMess, setSelectedShareMess] = useState(null);\r\n    const [conversition, setConversition] = useState([]);\r\n     const [isBottomSheetShareMess, setIsBottomSheetShareMess] = useState(false);\r\n     const snapPoints = useMemo(() => ['1%', '90%', '90%',], []);\r\n     const bottomSheetRefShareMess = useRef(null);\r\n     const handleClosePress = () => \r\n     {\r\n        setSelectedShareMess(null); \r\n        bottomSheetRefShareMess.current?.snapToIndex(0);\r\n     }\r\n     const handleOpenPress = async(_id) => {\r\n        // console.log('messAd', _id);\r\n        const selectedMessage = messages.find(item => item._id === _id);\r\n        // console.log('sah' ,selectedMessage);\r\n        setSelectedShareMess(selectedMessage);\r\n        bottomSheetRefShareMess.current?.snapToIndex(1);\r\n        setIsBottomSheetShareMess(true);\r\n        try\r\n        {\r\n            const res = await getConversition(profile._id)\r\n            // if (res.data.success)\r\n            // {\r\n            setConversition(res.data);\r\n            // }\r\n        }\r\n        catch (error)\r\n        {\r\n            console.log(error);\r\n        }\r\n        \r\n    };\r\n\r\n\r\n    // console.log('pinnn', listPinMessge);\r\n    function BubbleMessage({author, message, mediaUrl, currentUser, _id, senderId, replyMess}) {\r\n        \r\n        // console.log('092321', replyMess);\r\n        let repliedMessage = null;\r\n        const isPinned = listPinMessge && listPinMessge.some(item => item.messageId === _id);\r\n        console.log('sada', isPinned);\r\n        if (replyMess.replyTo)\r\n        {\r\n            // console.log('sadas13', replyMess.replyTo);\r\n            repliedMessage = messages.find(message => message._id === replyMess.replyTo);\r\n            console.log('9713', repliedMessage);\r\n        }\r\n        const handlerecallMessage = async() => {\r\n            console.log(_id);\r\n            const data = {\r\n                messageId: _id,\r\n                senderId: senderId\r\n            }\r\n            try\r\n            {\r\n                const res = await recallMessage(data);\r\n                if (res.data.success)\r\n                {\r\n                    setMessages((prevMessages) => {\r\n                        return prevMessages.map((message) => {\r\n                            if (message._id === _id) {\r\n                                // Nếu tin nhắn có type là \"text\", cập nhật nội dung\r\n                                if (message.type === \"text\") {\r\n                                    return { ...message, text: 'Đã thu hồi 1 tin nhắn' };\r\n                                }\r\n                                // Nếu tin nhắn là media, cập nhật nội dung khác\r\n                                else if (message.type === \"media\") {\r\n                                    return { ...message, text: 'Đã thu hồi 1 file', mediaUrl: [] };\r\n                                }\r\n                            }\r\n                            return message;\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n            catch (error)\r\n            {\r\n                console.log(error);\r\n            }\r\n        }\r\n\r\n        const handleDeleteOne = async() => {\r\n            const data = {\r\n                message_id: _id,\r\n                _id: profile._id\r\n            }\r\n\r\n            try\r\n            {\r\n                const res = await deleteOne(data);\r\n                if (res.data.success)\r\n                {\r\n                    setMessages(messages.filter(message => message._id !== data.message_id));\r\n                    console.log('delete success');\r\n                }\r\n            }\r\n            catch (error)\r\n            {\r\n                console.log(error);\r\n            }\r\n        }\r\n\r\n        handleActionSheetPress = (index) => {\r\n            switch(index)\r\n            {\r\n                case 0: \r\n                {\r\n                    if (isGroupChat)\r\n                    {\r\n                        const receiverId = chat.members.filter((id) => id !== profile._id);\r\n                        console.log('tesaxChat', receiverId);\r\n                        data = {\r\n                            id: _id,\r\n                            receiverId: receiverId\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        const receiverId = chat.members.find((id) => id !== profile._id);\r\n                        data = {\r\n                            id: _id,\r\n                            receiverId: receiverId\r\n                        }\r\n                    }\r\n                    console.log('ddqwea', data);\r\n                    socket.current.emit(\"recall-message\", data)\r\n                    handlerecallMessage();\r\n                    break\r\n                }\r\n                case 1: \r\n                {\r\n                    handleDeleteOne();\r\n                    break;\r\n                }\r\n                default: \r\n                    break;\r\n            }\r\n        }\r\n        // const meId = chat?.members?.find((id) => id !== currentUser);\r\n        const [current, setCurrent] = useState(null);\r\n        const [show, setShow] = useState(false);\r\n        const [showHint, setShowHint] = useState(false);\r\n\r\n        const btnPressHandler = () => {\r\n            setCurrent(null);\r\n            setShow(true);\r\n            setShowHint(false);\r\n        }\r\n\r\n        const onClose = () => {\r\n            setShow(false);\r\n            setShowHint(false);\r\n            setCurrent(null);\r\n        }\r\n\r\n        const onGesture = (event) => {\r\n            // console.log(event.nativeEvent.absoluteY)\r\n            if (\r\n                event.nativeEvent.absoluteY >= 0 &&\r\n                event.nativeEvent.absoluteY <= 490 &&\r\n                event.nativeEvent.absoluteX >= 16 &&\r\n                event.nativeEvent.absoluteX <= 367\r\n              ) {\r\n                setShowHint(false);\r\n                // when move finger beside any of emoji should select\r\n                const currentItem = Math.floor(event.nativeEvent.x / 50);\r\n                if (currentItem >= 0 && currentItem < items.length) {\r\n                  setCurrent(currentItem);\r\n                } else {\r\n                  setCurrent(null);\r\n                }\r\n              } else {\r\n                setCurrent(null);\r\n                setShowHint(true);\r\n              }\r\n        }\r\n\r\n        const gestureEnded = () => {\r\n            setShow(false);\r\n            setShowHint(false);\r\n        };\r\n\r\n        const emoijPressHanler = (index) => {\r\n            setShow(false);\r\n            setShowHint(false);\r\n            setCurrent(index);\r\n        }\r\n\r\n        useEffect(() => {\r\n            // console.log('133');\r\n            socket.current.on(\"recall-message-receive\", (data) => {\r\n                const { id } = data;\r\n                // console.log('Nhận được', id);\r\n                // Cập nhật state chỉ khi có tin nhắn với _id tương ứng\r\n                setMessages((prevMessages) => {\r\n                    return prevMessages.map((message) => {\r\n                        if (message._id === id) {\r\n                            // Nếu tin nhắn có type là \"text\", cập nhật nội dung\r\n                            if (message.type === \"text\") {\r\n                                return { ...message, text: 'Đã thu hồi 1 tin nhắn' };\r\n                            }\r\n                            // Nếu tin nhắn là media, cập nhật nội dung khác\r\n                            else if (message.type === \"media\") {\r\n                                return { ...message, text: 'Đã thu hồi 1 file', mediaUrl: [] };\r\n                            }\r\n                        }\r\n                        return message;\r\n                    });\r\n                });\r\n            });\r\n            // Xóa event listener khi component unmount hoặc khi messages thay đổi\r\n            // return () => {\r\n            //     socket.current.off(\"recall-message-receive\");\r\n            // };\r\n        }, []); // Dependency array chỉ chứa messages        \r\n\r\n        // console.log('texd: ', buttonHeight)\r\n        // ghim tin nhắn\r\n        const handlePinMessage = async() => {\r\n            const data = {\r\n                chatId: chat._id,\r\n                messageId: _id,\r\n                userId: profile._id\r\n            }\r\n            try\r\n            {\r\n                const res = await pinMessage(data);\r\n                // console.log('kkkk', res.data.result);\r\n                if (res.data.success)\r\n                {\r\n                    const res = await getPinMessage(chat._id);\r\n\r\n                    setListPinMessage(res.data.pinnedMessagesDetails)\r\n                    \r\n                    // socket\r\n                    if (!isGroupChat)\r\n                    {\r\n                        receiverId = chat.members.find((id) => id !== profile._id);\r\n                    }\r\n                    else\r\n                    {\r\n                        receiverId = chat.members.filter((id) => id !== profile._id);\r\n                    }\r\n                    const data = ({...res.data.pinnedMessagesDetails, receiverId});\r\n                    socket.current.emit(\"pinMessage\", data);\r\n                }\r\n            }\r\n            catch (error)\r\n            {\r\n                console.log(error);\r\n            }\r\n        }\r\n\r\n        // bỏ pin\r\n        const handleUnpinMessage = async() => {\r\n            // console.log('đang bỏ pin');\r\n\r\n            const data = {\r\n                chatId: chat._id,\r\n                messageId: _id,\r\n            }\r\n            try\r\n            {\r\n                const res = await unPinMessage(data);\r\n                if (res.data.success)\r\n                {\r\n                    // socket\r\n                    if (!isGroupChat)\r\n                    {\r\n                        receiverId = chat.members.find((id) => id !== profile._id);\r\n                    }\r\n                    else\r\n                    {\r\n                        receiverId = chat.members.filter((id) => id !== profile._id);\r\n                    }\r\n                    const data = ({_id, receiverId});\r\n                    socket.current.emit(\"unPinMessage\", data);\r\n                    \r\n                    const res1 = await getPinMessage(chat._id)\r\n                    console.log('ress1', res1.data);\r\n                    // if (!res1.data.success)\r\n                        // setListPinMessage(null)\r\n                    setListPinMessage(res1.data.pinnedMessagesDetails)\r\n                    \r\n                }\r\n            }\r\n            catch (error)\r\n            {\r\n                setListPinMessage(null);\r\n                 // socket\r\n                 if (!isGroupChat)\r\n                 {\r\n                     receiverId = chat.members.find((id) => id !== profile._id);\r\n                 }\r\n                 else\r\n                 {\r\n                     receiverId = chat.members.filter((id) => id !== profile._id);\r\n                 }\r\n                 const data = ({...res.data.pinnedMessagesDetails, receiverId});\r\n                 socket.current.emit(\"unPinMessage\", data);\r\n                console.log(error);\r\n            }\r\n        }\r\n\r\n        return (\r\n            <>\r\n            <AnimatePresence>\r\n                {show && (\r\n                <>\r\n                <PanGestureHandler onGestureEvent={onGesture} onEnded={gestureEnded}>\r\n                    <MotiView \r\n                        style={{position: 'absolute', height: 50, justifyContent: 'center', zIndex: 100, top: -50}} \r\n                        from={{opacity: 0}} \r\n                        animate={{opacity: 1}}\r\n                    >\r\n                        <MotiView \r\n                            style={{alignItems: 'center'}} \r\n                            from={{translateY: 40, opacity: 1}} \r\n                            animate={{translateY: 0, opacity: 1}}\r\n                            exit={{translateY: 40, opacity: 0}}\r\n                            transition={{duration: 800}}\r\n                        >\r\n                            <View \r\n                                style={{ //emojiBox\r\n                                    flexDirection: 'row', \r\n                                    borderRadius: 33, \r\n                                    backgroundColor: '#fff', \r\n                                    shadowColor: \"#000\",\r\n                                    shadowOffset: {\r\n                                        width: 0,\r\n                                        height: 2,\r\n                                    },\r\n                                    shadowOpacity: 0,\r\n                                    shadowRadius: 1,\r\n                                }}\r\n                            >\r\n                                {items.map((item, index) => (\r\n                                <EmojiItem \r\n                                    onPress= {() => emoijPressHanler(index)}\r\n                                    key={item.title} data={item} \r\n                                    index={index} \r\n                                    scaled={current === index}\r\n                                />\r\n                                ))}\r\n                            </View>\r\n                        </MotiView>\r\n                    </MotiView>\r\n                </PanGestureHandler>\r\n                <PanGestureHandler onGestureEvent={onGesture} onEnded={gestureEnded}>\r\n                    <MotiView \r\n                        style={{position: 'absolute', height: 50, justifyContent: 'center', zIndex: 100, top: 100}} \r\n                        from={{opacity: 0}} \r\n                        animate={{opacity: 1}}\r\n                    >\r\n                        <MotiView \r\n                            style={{alignItems: 'center'}} \r\n                            from={{translateY: 40, opacity: 1}} \r\n                            animate={{translateY: 0, opacity: 1}}\r\n                            exit={{translateY: 40, opacity: 0}}\r\n                            transition={{duration: 800}}\r\n                        >\r\n                            <View \r\n                                style={{ //emojiBox\r\n                                    // flexDirection: 'row', \r\n                                    width: 150,\r\n                                    borderRadius: 8, \r\n                                    backgroundColor: '#fff', \r\n                                    shadowColor: \"#000\",\r\n                                    shadowOffset: {\r\n                                        width: 0,\r\n                                        height: 2,\r\n                                    },\r\n                                    shadowOpacity: 0,\r\n                                    shadowRadius: 1,\r\n                                    padding: 10,\r\n                                    // bottom: -19,\r\n                                    position: 'absolute',\r\n                                    left: 0,\r\n                                    zIndex: 100,\r\n                                }}\r\n                            >\r\n                                <View style={{width: '100%', top: -100}}>\r\n                                    <TouchableOpacity\r\n                                        style={{width: '100%', flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', borderBottomWidth: 1, height: 30, borderColor: '#e0e0e0'}}\r\n                                        onPress={() => setReplyTo({messageId: _id, _id: senderId, message: message})}\r\n                                    >\r\n                                        <Text>Trả lời</Text>\r\n                                        <Image\r\n                                            source={require('./Icon/shareDark.png')}\r\n                                            resizeMode='contain'\r\n                                            style={{transform: [{scaleX: -1}], width: 20, height: 20}}\r\n                                        ></Image>\r\n                                    </TouchableOpacity>\r\n                                    <TouchableOpacity\r\n                                        style={{width: '100%', flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', borderBottomWidth: 1, height: 30, borderColor: '#e0e0e0'}}\r\n                                    >\r\n                                        <Text>Sao chép</Text>\r\n                                        <Image\r\n                                            source={require('./Icon/coppy.png')}\r\n                                            resizeMode='contain'\r\n                                            style={{transform: [{scaleX: -1}], width: 20, height: 20}}\r\n                                        ></Image>\r\n                                    </TouchableOpacity>\r\n                                    <TouchableOpacity\r\n                                        style={{width: '100%', flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', borderBottomWidth: 1, height: 30, borderColor: '#e0e0e0'}}\r\n                                        onPress={() => handleOpenPress(_id)}\r\n                                    >\r\n                                        <Text>Chuyển tiếp</Text>\r\n                                        <Image\r\n                                            source={require('./Icon/shareDark.png')}\r\n                                            resizeMode='contain'\r\n                                            style={{transform: [{scaleX: -1}], width: 20, height: 20}}\r\n                                        ></Image>\r\n                                    </TouchableOpacity>\r\n                                    <TouchableOpacity\r\n                                        style={{width: '100%', flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', height: 30}}\r\n                                        onPress={() => !isPinned ? handlePinMessage() : handleUnpinMessage()}\r\n                                    >\r\n                                        <Text style={{color: isPinned ? 'red' : null}}>{!isPinned ? 'Ghim' : 'Bỏ ghim'}</Text>\r\n                                        <Image\r\n                                            source={require('./Icon/pinBlack.png')}\r\n                                            resizeMode='contain'\r\n                                            style={{width: 20, height: 20}}\r\n                                        ></Image>\r\n                                    </TouchableOpacity>\r\n                                    <TouchableOpacity\r\n                                        style={{width: '100%', flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', height: 30}}\r\n                                        onPress={() => actionSheet.current.show()}\r\n                                    >\r\n                                        <Text style={{color: 'red'}}>Xoá, thu hồi</Text>\r\n                                        <Image\r\n                                            source={require('./Icon/trashRed.png')}\r\n                                            resizeMode='contain'\r\n                                            style={{transform: [{scaleX: -1}], width: 20, height: 20}}\r\n                                        ></Image>\r\n                                    </TouchableOpacity>\r\n                                    \r\n                                </View>\r\n                            </View>\r\n                        </MotiView>\r\n                    </MotiView>\r\n                </PanGestureHandler>\r\n                </>\r\n            )}           \r\n            </AnimatePresence>\r\n            {show && <Hint hint={showHint}></Hint> }\r\n            {show && <Backdrop onPress={onClose}/> }\r\n            <MessageButton \r\n                onLongPress={btnPressHandler}\r\n                author={author} \r\n                text={message} \r\n                profile={profile} \r\n                color={current === null ? '#000' : items[current].color}\r\n                emoji={current ? items[current === null ? 0 : current].emojis : null}\r\n                mediaUrl={mediaUrl}\r\n                currentUser={currentUser}\r\n                isGroupChat={isGroupChat}\r\n                navigation={navigation}\r\n                senderId={senderId}\r\n                replyMess={replyMess}\r\n                repliedMessage={repliedMessage}\r\n            ></MessageButton>\r\n                \r\n            </>\r\n            // <TouchableOpacity\r\n            //     style={{\r\n            //         backgroundColor: author === profile._id ? \"#d0f0fd\" : \"#fefefe\", \r\n            //         maxWidth: \"80%\",\r\n            //         alignSelf: author === profile._id ? 'flex-end' : 'flex-start',\r\n            //         padding: 10,\r\n            //         borderRadius: 10,\r\n            //         borderWidth: 1,\r\n            //         borderColor: '#d7dada',\r\n            //         marginTop: 5\r\n            //     }}\r\n            // >\r\n            //     <Text style={{color: '#121212'}}>{message}</Text>\r\n            // </TouchableOpacity>\r\n        )\r\n    }\r\n    // sen message socket server\r\n    // useEffect(() => {\r\n    //     if (sendMessage !== null)\r\n    //     {\r\n    //         socket.current.emit('send-message', sendMessage)\r\n    //     }\r\n    // }, [sendMessage])\r\n    //   // receive Message from socketServer\r\n    // useEffect(() => {\r\n    //     socket.current.on(\"receive-message\", (data) => {\r\n            \r\n    //     })\r\n    // }, []);\r\n    // rêcive media\r\n    useEffect(() => {\r\n        const fetchMessages = async () => {\r\n            try\r\n            {\r\n                // const {data} = await getMessages(chat._id, profile._id);\r\n                const {data} = await getMessages(chat._id, profile._id);\r\n                // console.log('testt', data)\r\n                setMessages(data);\r\n                // console.log('xx::', data[0].text);\r\n            }\r\n            catch (error)\r\n            {\r\n                console.log(error);\r\n            }\r\n        };\r\n        socket.current.on(\"receive-media\", (data) => {\r\n            // console.log('tesssss', data);\r\n            fetchMessages();\r\n        })\r\n    }, [Chat, messages])\r\n\r\n    //\r\n\r\n    // const user = useSelector(state => state.meSlice.userProfile);\r\n    // console.log(user)\r\n    // const [chats, setChats] = useState([]);\r\n    // const [currentChat, setCurrentChat] = useState(null);\r\n\r\n    // useEffect(() => {\r\n    //     const getChats = async() => {\r\n    //         try\r\n    //         {\r\n    //             const {data} = await userChats(user._id);\r\n    //             setChats(data);\r\n    //             // console.log('ddL: ',data);\r\n    //         }\r\n    //         catch (error) {\r\n    //             console.log(error);\r\n    //         }\r\n    //     }\r\n    //     getChats()\r\n    // }, [user])\r\n\r\n    // \r\n\r\n    // \r\n    // \r\n    // const [userData, setUserData] = useState('');\r\n    // const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState(\"\");\r\n    // console.log('another User: ', userData)\r\n\r\n    useEffect(() => {\r\n        if (receiveMessage !== null && receiveMessage.chatId === chat._id)\r\n        {\r\n            setMessages([...messages, receiveMessage])\r\n        }\r\n    }, [receiveMessage])\r\n\r\n    // fetch data header\r\n    // console.log('cu: ', navigation.params)\r\n    useEffect(() => {\r\n        // const userId = chat?.members?.find((id) => id !== currentUser);\r\n        const userId = chat?.members?.find((id) => id !== currentUser);\r\n        console.log('s231', userId);\r\n        const getUserData = async() => {\r\n            try\r\n            {\r\n                const res = await getUser(userId);\r\n                if (res.data.success)\r\n                    setUserData(res.data.user);\r\n                    console.log('tsdasd: ',res.data.user)\r\n            }\r\n            catch (error)\r\n            {\r\n                console.log(error);\r\n            }\r\n        };\r\n\r\n        if (chat !== null)\r\n            getUserData();\r\n    }, [chat, currentUser]);\r\n\r\n    // fetch messages\r\n    useEffect(() => {\r\n        const fetchMessages = async () => {\r\n            try\r\n            {\r\n                // const {data} = await getMessages(chat._id);\r\n                const {data} = await getMessages(chat._id, profile._id);\r\n                // console.log('testt', data)\r\n                setMessages(data);\r\n                // console.log('xx::', data[0].text);\r\n            }\r\n            catch (error)\r\n            {\r\n                console.log(error);\r\n            }\r\n        };\r\n\r\n        if (chat !== null)\r\n            fetchMessages();\r\n    }, [chat]);\r\n    // console.log('d11: ', messages);  \r\n\r\n    // always scroll to last Message\r\n    // useEffect(() => {\r\n    //     scroll.current?.scrollIntoView({behavior: 'smooth'});\r\n    // }, [messages]);\r\n\r\n    // receve Message from parent component\r\n    // useEffect(() => {\r\n    //     console.log(\"Message Arrived: \", recivedMessage)\r\n    //     if (recivedMessage !== null && recivedMessage.chatId === chat._id)\r\n    //     {\r\n    //         setMessages([...messages, recivedMessage]);\r\n    //     }\r\n    // }, [recivedMessage]);\r\n\r\n    //demo pick image\r\n    const heightAnim = useRef(new Animated.Value(0)).current;\r\n    const [openImageLib, setOpenImageLib] = useState(null);\r\n    const imagePiOpen = () => {\r\n        Keyboard.dismiss();\r\n        console.log('cccc', openImageLib);\r\n        fetchImages();\r\n        setOpenImageLib(!openImageLib);\r\n        Animated.timing(heightAnim, {\r\n            toValue: openImageLib ? 300 : 0, // Giá trị cuối cùng là 200\r\n            duration: 400, // Thời gian chạy animation là 1000 milliseconds (1 giây)\r\n            useNativeDriver: false // Sử dụng Native driver hay không\r\n        }).start(); // Bắt đầu animation\r\n        setSelectedImages([]);\r\n    };\r\n\r\n    // imagePiOpen();\r\n    const [testAlbum, setAlbum] = useState([]);\r\n    \r\n    const fetchImages = async () => {\r\n        // Xin quyền truy cập thư viện máy\r\n        const { status } = await MediaLibrary.requestPermissionsAsync();\r\n        if (status !== 'granted') {\r\n            alert('Chúng tôi cần quyền truy cập hình ảnh của bạn!');\r\n            return;\r\n        }\r\n    \r\n        // Lấy tất cả hình ảnh từ thư viện máy\r\n        const album = await MediaLibrary.getAssetsAsync({\r\n            mediaType: 'all', // Chỉ lấy hình ảnh và video\r\n            first: 100\r\n        });\r\n    \r\n        // Lấy URI cục bộ cho mỗi asset và gán vào mảng testAlbum\r\n        const imageArrayPromises = album.assets.map(async (asset) => {\r\n            const assetInfo = await MediaLibrary.getAssetInfoAsync(asset.id);\r\n            return assetInfo.localUri; // Sử dụng localUri thay vì uri\r\n        });\r\n    \r\n        // Đợi tất cả promises hoàn thành\r\n        const imageArray = await Promise.all(imageArrayPromises);\r\n        setAlbum(imageArray); // Cập nhật state\r\n    };\r\n    \r\n    //selected image\r\n    const [selectedImages, setSelectedImages] = useState([]);\r\n\r\n    // Hàm để xử lý việc chọn/bỏ chọn hình ảnh\r\n    const handleSelectImage = (uri) => {\r\n        if (selectedImages.includes(uri)) {\r\n            // Nếu hình ảnh đã được chọn, bỏ chọn nó\r\n            setSelectedImages(selectedImages.filter(item => item !== uri));\r\n        } else {\r\n            // Nếu hình ảnh chưa được chọn, thêm vào mảng\r\n            setSelectedImages([...selectedImages, uri]);\r\n        }\r\n        console.log('seee',testAlbum[0])\r\n    };\r\n    const flatListRef = useRef();\r\n\r\n    // Hàm để cuộn đến cuối danh sách\r\n    const scrollToBottom = () => {\r\n        flatListRef.current.scrollToEnd({ animated: true });\r\n    };\r\n\r\n    // Test new Message\r\n    const {height1} = useWindowDimensions();\r\n    const [messageCordinates, setMessageCordinates] = useState({x: 0, y: 0});\r\n    const [selectedMessage, setSelectedMessage] = useState(null);\r\n    const [yLocation, setYlocation] = useState({x: 0, y: 0});\r\n    const [isSender, setSender] = useState(false);\r\n    const onLongPress = (e, message, touchpadRef) => {\r\n        // console.log('onLongPress', e.nativeEvent);\r\n        const {pageY, locationY} = e.nativeEvent;\r\n        let y = pageY - locationY;\r\n\r\n        const isLessDisatanceFromTop = y < 100;\r\n        const isLessDisatanceFromBottom = height1 - y < message?.layoutHeight;\r\n        // const isLessDisatanceFromBottom = message?.layoutHeight > 256;\r\n        // const isLessDisatanceFromBottom = height1 - y ;\r\n        // let localY = touchpadRef - (pageY - locationY);\r\n        // console.log('loca1', touchpadRef);\r\n        if (isLessDisatanceFromBottom)\r\n        {\r\n            console.log('Bottoom');\r\n            y = y - message?.layoutHeight;\r\n            // localY = touchpadRef - (pageY - locationY);\r\n            // console.log('loca2', localY);\r\n        }\r\n        \r\n        if (isLessDisatanceFromTop)\r\n        {\r\n            console.log('BottoomTop');\r\n            y = y + message?.layoutHeight;\r\n            // localY = touchpadRef + (pageY - locationY);\r\n            // console.log('loca3', localY);\r\n\r\n        }\r\n        console.log('distance', isLessDisatanceFromTop);\r\n\r\n        setMessageCordinates({\r\n            x: 0,\r\n            y: pageY - locationY\r\n        });\r\n        console.log('yLocation', touchpadRef);\r\n        setYlocation({x: 0, y: touchpadRef + (pageY - locationY)});\r\n        // setYlocation({x: 0, y: localY});\r\n        setSelectedMessage(message);\r\n    }\r\n    // console.log('ópd', messageCordinates);\r\n\r\n    // action sheet\r\n    let actionSheet = React.createRef();\r\n\r\n    // console.log('cadax', conversition);\r\n    // chuyển tiếp tin nhắn\r\n    const handlePressShareMess = async(item) => {\r\n        const handleSend = async() => {\r\n            const message = {\r\n                chatId: item.chatId,\r\n                senderId: profile._id,\r\n                text: selectedShareMess.text,\r\n            }\r\n            \r\n             //send message to socket server\r\n            if (!isGroupChat)\r\n            {\r\n                receiverId = chat.members.find((id) => id !== currentUser);\r\n            }\r\n            else\r\n            {\r\n                // console.log('đanggg làm diệc');\r\n                receiverId = chat.members.filter((id) => id !== currentUser);\r\n            }\r\n            // console.log('13123', receiverId);\r\n            setSendMessage({...message, receiverId});\r\n            // console.log('test223: ', sendMessage)\r\n            // send message to database\r\n            try {\r\n                const {data} = await addMessage(message);\r\n                // console.log('313',data)\r\n                setMessages([...messages, data])\r\n                setMess(\"\");\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n            // setSendMessage({...message, receiverId});\r\n        } \r\n        // const handleSendImage = async () => {\r\n        //     const formData = new FormData();\r\n        //     formData.append('chatId', item.chatId);\r\n        //     formData.append('senderId', profile._id);\r\n        \r\n        //     // Duyệt qua mảng media và thêm từng item vào formData\r\n        //     for (const mediaUri of selectedImages) {\r\n        //         const fileName = mediaUri.split('/').pop(); // Lấy tên file từ URI\r\n        //         const fileType = mediaUri.match(/\\.(jpg|jpeg|png|mp4)$/i) ? 'image/jpeg' : 'video/mp4'; // Xác định loại file dựa trên đuôi file\r\n        \r\n        //         // Tạo một đối tượng Blob từ URI (giả định rằng bạn đã có hàm convertUriToBlob)\r\n        //         // const blob = await convertUriToBlob(mediaUri);\r\n        \r\n        //         formData.append('mediaUrl', {\r\n        //             uri: mediaUri,\r\n        //             type: fileType,\r\n        //             name: fileName\r\n        //         });\r\n        //     }\r\n    \r\n        //     try {\r\n        //         const {data} = await client.post('/message/sendImage/', formData, {\r\n        //             onDownloadProgress: ({loaded, total}) => setProgressUpload(loaded / total)\r\n                    \r\n        //         });\r\n        //         // const data = await response.data();\r\n        //         console.log('dâdasc', data);\r\n        //         setMessages([...messages, data]);\r\n        //         imagePiOpen();\r\n        //     } catch (error) {\r\n        //         console.log(error);\r\n        //     }\r\n        // };\r\n        console.log('replyy', selectedShareMess);\r\n        if (selectedShareMess.type === 'text')\r\n        {\r\n            handleSend();\r\n            console.log('gửi tin nhắn');\r\n        }\r\n        else\r\n        {\r\n            console.log('gửi file', selectedShareMess.mediaUrl);\r\n        }\r\n    }\r\n\r\n    // call audio\r\n    const [modalCallAudioVisible, setModalCallAudioVisible] = useState(false);\r\n\r\n\r\n    return (\r\n        <Host>\r\n\r\n        <GestureHandlerRootView style={{flex: 1}}>\r\n        <TouchableWithoutFeedback\r\n            onPress={() => !openImageLib ? imagePiOpen() : null}\r\n        >\r\n        <SafeAreaView style={styles.container}>\r\n            {isGroupChat ? \r\n                <HeaderChatView chat={chat} groupName={chat.groupName} userData={userData} navigation={navigation}></HeaderChatView> :\r\n                <HeaderChatView userData={userData} navigation={navigation} setModalCallAudioVisible={setModalCallAudioVisible}></HeaderChatView>\r\n\r\n            }\r\n            <KeyboardAvoidingView\r\n                // style={{flex: 1}}\r\n                keyboardVerticalOffset={0}\r\n                behavior={Platform.OS === \"ios\" ? \"padding\" : undefined}\r\n            >\r\n                <View style={{width: '100%', height: '100%', backgroundColor: '#fff', justifyContent: 'space-between', alignItems: 'center'}}>\r\n                    {/* <ScrollView\r\n                        style={{width: width, minHeight: '10%'}}\r\n                        nestedScrollEnabled={true}\r\n                    > */}\r\n                        <FlatList\r\n                            ref={flatListRef}\r\n                            data={messages}\r\n                            // renderItem={({item}) => <Message {...item} onLongPress={onLongPress} onPressIn={setSender} emoji={current ? items[current === null ? 0 : current].emojis : null}></Message>}\r\n                            renderItem={({item}) => (\r\n                                <BubbleMessage\r\n                                    key={item._id}\r\n                                    author={item.senderId}\r\n                                    message={item.text}\r\n                                    createdAt={item.createdAt}\r\n                                    mediaUrl={item.text === '' ? item.mediaUrl : null}\r\n                                    // Thêm các props khác nếu cần\r\n                                    _id={item._id}\r\n                                    senderId={item.senderId}\r\n                                    replyMess = {item}\r\n                                />\r\n                            )}\r\n                            keyExtractor={item => item.createdAt}\r\n                            contentContainerStyle= {{paddingHorizontal: 10, gap: 10}}\r\n                            style={{width: width, minHeight: '85%', height: '80%'}}\r\n                            automaticallyAdjustKeyboardInsets\r\n                            onContentSizeChange={scrollToBottom} // Cuộn đến cuối mỗi khi nội dung thay đổi\r\n                            onLayout={scrollToBottom} // Cuộn đến cuối khi layout thay đổi\r\n                        ></FlatList>\r\n                        {/* <ChatBox></ChatBox> */}\r\n                    {/* </ScrollView> */}\r\n                    <PortalView\r\n                        selectedMessage={selectedMessage}\r\n                        messageCordinates={messageCordinates}\r\n                        yLocation={yLocation}\r\n                        setSelectedMessage={setSelectedMessage}\r\n                        isSender={isSender}\r\n                        items = {items}\r\n                    ></PortalView>\r\n                    <ChatViewBT currentUser={currentUser} chat={chat} setMessages={setMessages} messages={messages} setSendMessage socket={socket} imagePiOpen={imagePiOpen} selectedImages={selectedImages} setSelectedImages={setSelectedImages} replyTo={replyTo} setReplyTo={setReplyTo} listPinMessge={listPinMessge} setListPinMessge={setListPinMessage}></ChatViewBT>\r\n                    {/* <View style={{width: width, height: 500, backgroundColor: 'red', position: 'absolute', bottom: 0}}>\r\n                        <EmojiPicker></EmojiPicker>\r\n                    </View> */}\r\n                </View>\r\n            </KeyboardAvoidingView>\r\n        </SafeAreaView>\r\n\r\n        </TouchableWithoutFeedback>\r\n        <Animated.View style={{width: '100%', height: heightAnim, backgroundColor: '#fff', marginTop: 50}}>\r\n            <ScrollView\r\n                style={{width: '100%', height: '100%'}}\r\n            >\r\n                <View style={{flexDirection: 'row', width: '100%', flexWrap: 'wrap'}}>\r\n                    <TouchableOpacity\r\n                        style={{width: 125, height: 120}}\r\n                    ></TouchableOpacity>\r\n                    {testAlbum.map((item, index) => (\r\n                        <TouchableOpacity\r\n                            style={{width: 125, height: 120, backgroundColor: 'pink', borderWidth: 1, borderColor: '#fff'}}\r\n                            key={index}\r\n                        >\r\n                            <Image\r\n                                source={{uri: item}}\r\n                                style={{width: '100%', height: '100%'}}\r\n                                resizeMode='cover'\r\n                            ></Image>\r\n                            <TouchableOpacity\r\n                                style={{width: 24, height: 24, borderRadius: 20, position: 'absolute', right: 0, margin: 10, borderWidth: 1, borderColor: '#fff', backgroundColor: selectedImages.includes(item) ? '#009ef9' : 'rgba(0,0,0,0.2)', justifyContent: 'center', alignItems: 'center'}}\r\n                                onPress={() => handleSelectImage(item)}\r\n                            >\r\n                                {selectedImages.indexOf(item) > 0 ? \r\n                                    <Text style={{color: '#fff', fontWeight: 'bold'}}>{selectedImages.indexOf(item) + 1}</Text> : null\r\n                                }\r\n                            </TouchableOpacity>\r\n                        </TouchableOpacity>\r\n                    ))}\r\n                </View>\r\n            </ScrollView>\r\n        </Animated.View>\r\n        <ActionSheet\r\n            ref={actionSheet}\r\n            // title=''\r\n            options={['Thu hồi với mọi người', 'Thu hồi với bạn', 'Huỷ']}\r\n            cancelButtonIndex={2}\r\n            onPress={(index) => {handleActionSheetPress(index)}}\r\n        ></ActionSheet>\r\n        <BottomSheet \r\n            ref={bottomSheetRefShareMess} \r\n            // index={0} \r\n            snapPoints={snapPoints} \r\n            style={{shadowColor: \"#000\",\r\n            shadowOffset: {\r\n                width: 0,\r\n                height: 2,\r\n            },\r\n            shadowOpacity: 0.25,\r\n            shadowRadius: 3.84,\r\n            \r\n            elevation: 5}} \r\n            onChange={(index) => {index != 0 ? setIsBottomSheetShareMess(true) : setIsBottomSheetShareMess(false)}}\r\n            handleIndicatorStyle={{backgroundColor: '#fff'}}\r\n        >\r\n            <View style={{width: '100%', alignItems: 'center'}}>\r\n                <View style={{width: '90%', alignItems: 'center', justifyContent: 'space-between', flexDirection: 'row'}}>\r\n                    <TouchableOpacity\r\n                        onPress={() => handleClosePress()}\r\n                    >\r\n                        <Text style={{color: '#2f79e7', fontWeight: '700'}}>Xong</Text>\r\n                    </TouchableOpacity>\r\n                    <Text style={{fontWeight: 'bold', fontSize: 16}}>Gửi đến</Text>\r\n                    <TouchableOpacity>\r\n                        <Text style={{color: '#2f79e7', fontWeight: '700'}}>Tạo nhóm</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n                <View style={{width: '90%', height: 45, backgroundColor: '#f5f5f5', borderRadius: 10, padding: 10, flexDirection: 'row', alignItems: 'center', marginTop: 15}}>\r\n                    <Image\r\n                        source={require('./Icon/Search114.png')}\r\n                        resizeMode='contain'\r\n                        style={{width: 20, height: 20, marginRight: 10}}\r\n                    ></Image>\r\n                    <TextInput\r\n                        placeholder='Tìm kiếm'\r\n                        style={{width: '90%'}}\r\n                    ></TextInput>\r\n                </View>\r\n                <View style={{width: '90%', alignItems: 'center'}}>\r\n                    <ScrollView\r\n                        style={{width: '100%', height: '100%'}}\r\n                    >\r\n                        {conversition.map((item, index) => (\r\n                            <View style={{width: '100%', height: 50, flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', marginVertical: 15}}>\r\n                                <View\r\n                                    style={{width: 50, height: 50}}\r\n                                >\r\n                                    <Image\r\n                                        source={{uri: item.type === 'group' ? item.groupAvatar : item.avatar}}\r\n                                        resizeMode='cover'\r\n                                        style={{width: '100%', height: '100%', borderRadius: 50}}\r\n                                    ></Image>\r\n                                </View>\r\n                                <Text style={{fontSize: 16, fontWeight: 'bold', width: '62%', marginLeft: 20}}>{item.type === 'group' ? item.groupName : item.userName}</Text>\r\n                                <TouchableOpacity\r\n                                    style={{width: 50, height: 30, backgroundColor: '#f5f5f5', justifyContent: 'center', alignItems: 'center', borderRadius: 30}}\r\n                                    onPress={() => handlePressShareMess(item)}\r\n                                >\r\n                                    <Text style={{fontSize: 16, fontWeight: 'bold'}}>Gửi</Text>\r\n                                </TouchableOpacity>\r\n                            </View>\r\n                        ))}\r\n                    </ScrollView>\r\n                </View>\r\n            </View>\r\n        </BottomSheet>\r\n        {/* call audio modal*/}\r\n        <Modal\r\n            animationType='fade'\r\n            transparent={true}\r\n            visible={modalCallAudioVisible}\r\n        >\r\n            <CallAudio setModalCallAudioVisible={setModalCallAudioVisible} userData={userData}></CallAudio>\r\n        </Modal>\r\n        </GestureHandlerRootView>\r\n        </Host>\r\n    )\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n    //   height: height,\r\n      alignItems: 'center',\r\n      justifyContent: 'space-between',\r\n      backgroundColor: '#009ef9',\r\n    },\r\n});"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACA,OAAOA,cAAc,MAAM,cAAc;AACzC,OAAOC,UAAU,MAAM,cAAc;AACrC,SAAQC,WAAW,QAAO,+BAA+B;AACzD,OAAOC,WAAW,MAAM,0CAA0C;AAClE,OAAOC,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnE,SAASC,SAAS,QAAQ,qBAAqB;AAC/C,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,UAAU,EAAEC,SAAS,EAAEC,eAAe,EAAEC,WAAW,EAAEC,aAAa,EAAEC,UAAU,EAAEC,WAAW,EAAEC,aAAa,EAAEC,YAAY,QAAQ,wBAAwB;AACjK,SAASC,OAAO,QAAQ,qBAAqB;AAC7C,SAASC,UAAU,QAAQ,uBAAuB;AAClD,OAAOC,aAAa,MAAM,4BAA4B;AACtD,OAAOC,OAAO,MAAM,6BAA6B;AAEjD,OAAOC,SAAS,MAAM,8BAA8B;AACpD,OAAOC,SAAS,MAAM,8BAA8B;AACpD,OAAOC,SAAS,MAAM,8BAA8B;AACpD,OAAOC,SAAS,MAAM,8BAA8B;AACpD,OAAOC,QAAQ,MAAM,6BAA6B;AAClD,OAAOC,QAAQ,MAAM,6BAA6B;AAClD,OAAOC,UAAU,MAAM,+BAA+B;AACtD,SAAQC,QAAQ,EAAEC,eAAe,QAAO,MAAM;AAC9C,OAAOC,QAAQ,MAAM,uBAAuB;AAC5C,OAAOC,SAAS,MAAM,wBAAwB;AAC9C,OAAOC,IAAI,MAAM,mBAAmB;AACpC,SAAQC,iBAAiB,QAAQ,8BAA8B;AAC/D,SAASC,sBAAsB,QAAQ,8BAA8B;AACrE,OAAO,KAAKC,YAAY,MAAM,oBAAoB;AAClD,OAAOC,UAAU,MAAM,gCAAgC;AACvD,SAAQC,IAAI,QAAO,wBAAwB;AAC3C,OAAOC,WAAW,MAAM,0BAA0B;AAClD,OAAOC,WAAW,MAAM,sBAAsB;AAC9C,OAAOC,SAAS,MAAM,kCAAkC;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAOzD,MAAMC,YAAY,GAAG,CAAC;EAClBC,IAAI,EAAE,MAAM;EACZC,OAAO,EAAE;IACLC,IAAI,EAAE;EACV,CAAC;EACDC,MAAM,EAAE;IACJC,IAAI,EAAE,OAAO;IACbC,MAAM,EAAE;EACZ,CAAC;EACDC,QAAQ,EAAE,KAAK;EACfC,SAAS,EAAE;AACX,CAAC,EACD;EACIP,IAAI,EAAE,OAAO;EACbC,OAAO,EAAE;IACPO,QAAQ,EAAE;EACZ,CAAC;EACDL,MAAM,EAAE;IACNC,IAAI,EAAE,MAAM;IACZC,MAAM,EACJ;EACJ;AACJ,CAAC,EACD;EACIL,IAAI,EAAE,MAAM;EACZC,OAAO,EAAE;IACPC,IAAI,EAAE;EACR,CAAC;EACDC,MAAM,EAAE;IACNC,IAAI,EAAE,MAAM;IACZC,MAAM,EAAE;EACV,CAAC;EACDC,QAAQ,EAAE,IAAI;EACdC,SAAS,EAAE;AACf,CAAC,EACD;EACIP,IAAI,EAAE,MAAM;EACZC,OAAO,EAAE;IACPC,IAAI,EAAE;EACR,CAAC;EACDC,MAAM,EAAE;IACNC,IAAI,EAAE,MAAM;IACZC,MAAM,EAAE;EACV,CAAC;EACDC,QAAQ,EAAE,IAAI;EACdC,SAAS,EAAE;AACf,CAAC,EACD;EACIP,IAAI,EAAE,OAAO;EACbC,OAAO,EAAE;IACPO,QAAQ,EAAE;EACZ,CAAC;EACDL,MAAM,EAAE;IACNC,IAAI,EAAE,MAAM;IACZC,MAAM,EACJ;EACJ;AACJ,CAAC,CACJ;AACD,MAAM;EAACI,MAAM;EAAEC;AAAK,CAAC,GAAGC,UAAU,CAACC,GAAG,CAAC,QAAQ,CAAC;AAChD,MAAMC,KAAK,GAAG,CACV;EAACC,MAAM,EAAElB,OAAA,CAACrB,SAAS;IAAAwC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAC,CAAC;EAAEC,KAAK,EAAE,MAAM;EAAEC,KAAK,EAAE;AAAmB,CAAC,EACjE;EAACN,MAAM,EAAElB,OAAA,CAACpB,SAAS;IAAAuC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAC,CAAC;EAAEC,KAAK,EAAE,MAAM;EAAEC,KAAK,EAAE;AAAkB,CAAC,EAChE;EAACN,MAAM,EAAElB,OAAA,CAACnB,SAAS;IAAAsC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAC,CAAC;EAAEC,KAAK,EAAE,MAAM;EAAEC,KAAK,EAAE;AAAmB,CAAC,EACjE;EAACN,MAAM,EAAElB,OAAA,CAAClB,SAAS;IAAAqC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAC,CAAC;EAAEC,KAAK,EAAE,MAAM;EAAEC,KAAK,EAAE;AAAmB,CAAC,EACjE;EAACN,MAAM,EAAElB,OAAA,CAACjB,QAAQ;IAAAoC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAC,CAAC;EAAEC,KAAK,EAAE,KAAK;EAAEC,KAAK,EAAE;AAAmB,CAAC,EAC/D;EAACN,MAAM,EAAElB,OAAA,CAAChB,QAAQ;IAAAmC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAC,CAAC;EAAEC,KAAK,EAAE,KAAK;EAAEC,KAAK,EAAE;AAAmB,CAAC,EAC/D;EAACN,MAAM,EAAElB,OAAA,CAACf,UAAU;IAAAkC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAC,CAAC;EAAEC,KAAK,EAAE,OAAO;EAAEC,KAAK,EAAE;AAAmB,CAAC,CACtE;AACD,eAAe,SAASC,IAAIA,CAAC;EAACC,UAAU;EAAEC;AAAK,CAAC,EAAE;EAE9C,MAAMC,OAAO,GAAG/D,WAAW,CAACgE,KAAK,IAAIA,KAAK,CAACC,OAAO,CAACC,WAAW,CAAC;EAE/D,MAAMC,IAAI,GAAGL,KAAK,CAACM,MAAM,CAACD,IAAI;EAC9B,MAAME,WAAW,GAAGP,KAAK,CAACM,MAAM,CAACC,WAAW;EAC5C,MAAMC,cAAc,GAAGR,KAAK,CAACM,MAAM,CAACE,cAAc;EAGlD,MAAMC,MAAM,GAAGT,KAAK,CAACM,MAAM,CAACG,MAAM;EAClC,MAAMC,WAAW,GAAGV,KAAK,CAACM,MAAM,CAACI,WAAW;EAE5C,MAAM;IAACC,cAAc;IAAEC;EAAiB,CAAC,GAAG/D,UAAU,CAAC,CAAC;EAGxD,MAAMgE,WAAW,GAAGR,IAAI,CAAC5B,IAAI,KAAK,OAAO;EAEzC,MAAMqC,WAAW,GAAGD,WAAW,GAAGR,IAAI,CAACU,SAAS,GAAGf,KAAK,CAACM,MAAM,CAACU,QAAQ;EAExE,MAAMC,MAAM,GAAGjB,KAAK,CAACM,MAAM,CAACW,MAAM;EAIlCrF,SAAS,CAAC,MAAM;IACZ,MAAMsF,iBAAiB,GAAG,MAAAA,CAAA,KAAY;MAClC,IACA;QACI,MAAMC,GAAG,GAAG,MAAM9E,eAAe,CAAC4D,OAAO,CAACmB,GAAG,CAAC;QAE9CH,MAAM,CAACE,GAAG,CAACE,IAAI,CAAC;MACpB,CAAC,CACD,OAAOC,KAAK,EACZ;QACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IACD,MAAMG,QAAQ,GAAG,MAAAA,CAAA,KAAW;MACxB,IACA;QACI,MAAMN,GAAG,GAAG,MAAM1E,WAAW,CAAC;UAACiF,MAAM,EAAErB,IAAI,CAACe,GAAG;UAAEO,MAAM,EAAE1B,OAAO,CAACmB;QAAG,CAAC,CAAC;QACtEG,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEL,GAAG,CAACE,IAAI,CAAC;MAGxC,CAAC,CACD,OAAOC,KAAK,EACZ;QACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IACDG,QAAQ,CAAC,CAAC;IACVP,iBAAiB,CAAC,CAAC;EACvB,CAAC,EAAE,CAACb,IAAI,CAACe,GAAG,CAAC,CAAC;EAEd,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAG9F,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAAC+F,QAAQ,EAAEC,WAAW,CAAC,GAAGhG,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAM,CAACiG,OAAO,EAAEC,UAAU,CAAC,GAAGlG,QAAQ,CAAC,IAAI,CAAC;EAE5C,MAAM,CAACmG,aAAa,EAAEC,iBAAiB,CAAC,GAAGpG,QAAQ,CAAC,IAAI,CAAC;EACzDH,SAAS,CAAC,MAAM;IACZ,MAAMwG,eAAe,GAAG,MAAAA,CAAA,KAAW;MAC/B,IACA;QACI,MAAMjB,GAAG,GAAG,MAAM5E,aAAa,CAAC8D,IAAI,CAACe,GAAG,CAAC;QAEzC,IAAID,GAAG,CAACE,IAAI,CAACgB,OAAO,EACpB;UAEIF,iBAAiB,CAAChB,GAAG,CAACE,IAAI,CAACiB,qBAAqB,CAAC;QACrD,CAAC,MAEGH,iBAAiB,CAAC,EAAE,CAAC;MAC7B,CAAC,CACD,OAAOb,KAAK,EACZ;QACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IACDc,eAAe,CAAC,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAGNxG,SAAS,CAAC,MAAM;IACZ,MAAMwG,eAAe,GAAG,MAAAA,CAAA,KAAW;MAC/B,IACA;QACI,MAAMjB,GAAG,GAAG,MAAM5E,aAAa,CAAC8D,IAAI,CAACe,GAAG,CAAC;QACzC,IAAID,GAAG,CAACE,IAAI,CAACgB,OAAO,EAChBF,iBAAiB,CAAChB,GAAG,CAACE,IAAI,CAACiB,qBAAqB,CAAC;MACzD,CAAC,CACD,OAAOhB,KAAK,EACZ;QACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IAEDb,MAAM,CAAC8B,OAAO,CAACC,EAAE,CAAC,oBAAoB,EAAGnB,IAAI,IAAK;MAC9C,MAAM;UAAEoB;QAA2B,CAAC,GAAGpB,IAAI;QAApBqB,WAAW,GAAAC,wBAAA,CAAKtB,IAAI,EAAAuB,SAAA;MAE3C,IAAIV,aAAa,KAAK,IAAI,EACtBE,eAAe,CAAC,CAAC,CAAC,KAElBD,iBAAiB,CAACU,kBAAkB,IAAI,CAAC,GAAGA,kBAAkB,EAAEH,WAAW,CAAC,CAAC;IACrF,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAGN9G,SAAS,CAAC,MAAM;IACZ,MAAMwG,eAAe,GAAG,MAAAA,CAAA,KAAW;MAC/B,IACA;QACI,MAAMjB,GAAG,GAAG,MAAM5E,aAAa,CAAC8D,IAAI,CAACe,GAAG,CAAC;QACzC,IAAID,GAAG,CAACE,IAAI,CAACgB,OAAO,EAChBF,iBAAiB,CAAChB,GAAG,CAACE,IAAI,CAACiB,qBAAqB,CAAC;MACzD,CAAC,CACD,OAAOhB,KAAK,EACZ;QACIa,iBAAiB,CAAC,IAAI,CAAC;QACvBZ,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IAEDb,MAAM,CAAC8B,OAAO,CAACC,EAAE,CAAC,sBAAsB,EAAGnB,IAAI,IAAK;MAEhDe,eAAe,CAAC,CAAC;IACrB,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAGN,MAAM,CAACU,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGhH,QAAQ,CAAC,IAAI,CAAC;EAChE,MAAM,CAACiH,YAAY,EAAEC,eAAe,CAAC,GAAGlH,QAAQ,CAAC,EAAE,CAAC;EACnD,MAAM,CAACmH,sBAAsB,EAAEC,yBAAyB,CAAC,GAAGpH,QAAQ,CAAC,KAAK,CAAC;EAC3E,MAAMqH,UAAU,GAAGvH,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAE,EAAE,EAAE,CAAC;EAC3D,MAAMwH,uBAAuB,GAAGvH,MAAM,CAAC,IAAI,CAAC;EAC5C,MAAMwH,gBAAgB,GAAGA,CAAA,KACzB;IACGP,oBAAoB,CAAC,IAAI,CAAC;IAC1BM,uBAAuB,CAACd,OAAO,EAAEgB,WAAW,CAAC,CAAC,CAAC;EAClD,CAAC;EACD,MAAMC,eAAe,GAAG,MAAMpC,GAAG,IAAK;IAEnC,MAAMqC,eAAe,GAAG3B,QAAQ,CAAC4B,IAAI,CAACC,IAAI,IAAIA,IAAI,CAACvC,GAAG,KAAKA,GAAG,CAAC;IAE/D2B,oBAAoB,CAACU,eAAe,CAAC;IACrCJ,uBAAuB,CAACd,OAAO,EAAEgB,WAAW,CAAC,CAAC,CAAC;IAC/CJ,yBAAyB,CAAC,IAAI,CAAC;IAC/B,IACA;MACI,MAAMhC,GAAG,GAAG,MAAM9E,eAAe,CAAC4D,OAAO,CAACmB,GAAG,CAAC;MAG9C6B,eAAe,CAAC9B,GAAG,CAACE,IAAI,CAAC;IAE7B,CAAC,CACD,OAAOC,KAAK,EACZ;MACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACtB;EAEJ,CAAC;EAID,SAASsC,aAAaA,CAAC;IAACC,MAAM;IAAEC,OAAO;IAAEC,QAAQ;IAAExD,WAAW;IAAEa,GAAG;IAAE4C,QAAQ;IAAEC;EAAS,CAAC,EAAE;IAGvF,IAAIC,cAAc,GAAG,IAAI;IACzB,MAAMC,QAAQ,GAAGjC,aAAa,IAAIA,aAAa,CAACkC,IAAI,CAACT,IAAI,IAAIA,IAAI,CAACU,SAAS,KAAKjD,GAAG,CAAC;IACpFG,OAAO,CAACC,GAAG,CAAC,MAAM,EAAE2C,QAAQ,CAAC;IAC7B,IAAIF,SAAS,CAACjC,OAAO,EACrB;MAEIkC,cAAc,GAAGpC,QAAQ,CAAC4B,IAAI,CAACI,OAAO,IAAIA,OAAO,CAAC1C,GAAG,KAAK6C,SAAS,CAACjC,OAAO,CAAC;MAC5ET,OAAO,CAACC,GAAG,CAAC,MAAM,EAAE0C,cAAc,CAAC;IACvC;IACA,MAAMI,mBAAmB,GAAG,MAAAA,CAAA,KAAW;MACnC/C,OAAO,CAACC,GAAG,CAACJ,GAAG,CAAC;MAChB,MAAMC,IAAI,GAAG;QACTgD,SAAS,EAAEjD,GAAG;QACd4C,QAAQ,EAAEA;MACd,CAAC;MACD,IACA;QACI,MAAM7C,GAAG,GAAG,MAAMzE,aAAa,CAAC2E,IAAI,CAAC;QACrC,IAAIF,GAAG,CAACE,IAAI,CAACgB,OAAO,EACpB;UACIN,WAAW,CAAEwC,YAAY,IAAK;YAC1B,OAAOA,YAAY,CAACC,GAAG,CAAEV,OAAO,IAAK;cACjC,IAAIA,OAAO,CAAC1C,GAAG,KAAKA,GAAG,EAAE;gBAErB,IAAI0C,OAAO,CAACrF,IAAI,KAAK,MAAM,EAAE;kBACzB,OAAAgG,aAAA,CAAAA,aAAA,KAAYX,OAAO;oBAAEnF,IAAI,EAAE;kBAAuB;gBACtD,CAAC,MAEI,IAAImF,OAAO,CAACrF,IAAI,KAAK,OAAO,EAAE;kBAC/B,OAAAgG,aAAA,CAAAA,aAAA,KAAYX,OAAO;oBAAEnF,IAAI,EAAE,mBAAmB;oBAAEoF,QAAQ,EAAE;kBAAE;gBAChE;cACJ;cACA,OAAOD,OAAO;YAClB,CAAC,CAAC;UACN,CAAC,CAAC;QACN;MACJ,CAAC,CACD,OAAOxC,KAAK,EACZ;QACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IAED,MAAMoD,eAAe,GAAG,MAAAA,CAAA,KAAW;MAC/B,MAAMrD,IAAI,GAAG;QACTsD,UAAU,EAAEvD,GAAG;QACfA,GAAG,EAAEnB,OAAO,CAACmB;MACjB,CAAC;MAED,IACA;QACI,MAAMD,GAAG,GAAG,MAAM/E,SAAS,CAACiF,IAAI,CAAC;QACjC,IAAIF,GAAG,CAACE,IAAI,CAACgB,OAAO,EACpB;UACIN,WAAW,CAACD,QAAQ,CAAC8C,MAAM,CAACd,OAAO,IAAIA,OAAO,CAAC1C,GAAG,KAAKC,IAAI,CAACsD,UAAU,CAAC,CAAC;UACxEpD,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;QACjC;MACJ,CAAC,CACD,OAAOF,KAAK,EACZ;QACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IAEDuD,sBAAsB,GAAIC,KAAK,IAAK;MAChC,QAAOA,KAAK;QAER,KAAK,CAAC;UACN;YACI,IAAIjE,WAAW,EACf;cACI,MAAM4B,UAAU,GAAGpC,IAAI,CAAC0E,OAAO,CAACH,MAAM,CAAEI,EAAE,IAAKA,EAAE,KAAK/E,OAAO,CAACmB,GAAG,CAAC;cAClEG,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEiB,UAAU,CAAC;cACpCpB,IAAI,GAAG;gBACH2D,EAAE,EAAE5D,GAAG;gBACPqB,UAAU,EAAEA;cAChB,CAAC;YACL,CAAC,MAED;cACI,MAAMA,UAAU,GAAGpC,IAAI,CAAC0E,OAAO,CAACrB,IAAI,CAAEsB,EAAE,IAAKA,EAAE,KAAK/E,OAAO,CAACmB,GAAG,CAAC;cAChEC,IAAI,GAAG;gBACH2D,EAAE,EAAE5D,GAAG;gBACPqB,UAAU,EAAEA;cAChB,CAAC;YACL;YACAlB,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEH,IAAI,CAAC;YAC3BZ,MAAM,CAAC8B,OAAO,CAAC0C,IAAI,CAAC,gBAAgB,EAAE5D,IAAI,CAAC;YAC3CiD,mBAAmB,CAAC,CAAC;YACrB;UACJ;QACA,KAAK,CAAC;UACN;YACII,eAAe,CAAC,CAAC;YACjB;UACJ;QACA;UACI;MACR;IACJ,CAAC;IAED,MAAM,CAACnC,OAAO,EAAE2C,UAAU,CAAC,GAAGnJ,QAAQ,CAAC,IAAI,CAAC;IAC5C,MAAM,CAACoJ,IAAI,EAAEC,OAAO,CAAC,GAAGrJ,QAAQ,CAAC,KAAK,CAAC;IACvC,MAAM,CAACsJ,QAAQ,EAAEC,WAAW,CAAC,GAAGvJ,QAAQ,CAAC,KAAK,CAAC;IAE/C,MAAMwJ,eAAe,GAAGA,CAAA,KAAM;MAC1BL,UAAU,CAAC,IAAI,CAAC;MAChBE,OAAO,CAAC,IAAI,CAAC;MACbE,WAAW,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,MAAME,OAAO,GAAGA,CAAA,KAAM;MAClBJ,OAAO,CAAC,KAAK,CAAC;MACdE,WAAW,CAAC,KAAK,CAAC;MAClBJ,UAAU,CAAC,IAAI,CAAC;IACpB,CAAC;IAED,MAAMO,SAAS,GAAIC,KAAK,IAAK;MAEzB,IACIA,KAAK,CAACC,WAAW,CAACC,SAAS,IAAI,CAAC,IAChCF,KAAK,CAACC,WAAW,CAACC,SAAS,IAAI,GAAG,IAClCF,KAAK,CAACC,WAAW,CAACE,SAAS,IAAI,EAAE,IACjCH,KAAK,CAACC,WAAW,CAACE,SAAS,IAAI,GAAG,EAClC;QACAP,WAAW,CAAC,KAAK,CAAC;QAElB,MAAMQ,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACN,KAAK,CAACC,WAAW,CAACM,CAAC,GAAG,EAAE,CAAC;QACxD,IAAIH,WAAW,IAAI,CAAC,IAAIA,WAAW,GAAGxG,KAAK,CAAC4G,MAAM,EAAE;UAClDhB,UAAU,CAACY,WAAW,CAAC;QACzB,CAAC,MAAM;UACLZ,UAAU,CAAC,IAAI,CAAC;QAClB;MACF,CAAC,MAAM;QACLA,UAAU,CAAC,IAAI,CAAC;QAChBI,WAAW,CAAC,IAAI,CAAC;MACnB;IACN,CAAC;IAED,MAAMa,YAAY,GAAGA,CAAA,KAAM;MACvBf,OAAO,CAAC,KAAK,CAAC;MACdE,WAAW,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,MAAMc,gBAAgB,GAAItB,KAAK,IAAK;MAChCM,OAAO,CAAC,KAAK,CAAC;MACdE,WAAW,CAAC,KAAK,CAAC;MAClBJ,UAAU,CAACJ,KAAK,CAAC;IACrB,CAAC;IAEDlJ,SAAS,CAAC,MAAM;MAEZ6E,MAAM,CAAC8B,OAAO,CAACC,EAAE,CAAC,wBAAwB,EAAGnB,IAAI,IAAK;QAClD,MAAM;UAAE2D;QAAG,CAAC,GAAG3D,IAAI;QAGnBU,WAAW,CAAEwC,YAAY,IAAK;UAC1B,OAAOA,YAAY,CAACC,GAAG,CAAEV,OAAO,IAAK;YACjC,IAAIA,OAAO,CAAC1C,GAAG,KAAK4D,EAAE,EAAE;cAEpB,IAAIlB,OAAO,CAACrF,IAAI,KAAK,MAAM,EAAE;gBACzB,OAAAgG,aAAA,CAAAA,aAAA,KAAYX,OAAO;kBAAEnF,IAAI,EAAE;gBAAuB;cACtD,CAAC,MAEI,IAAImF,OAAO,CAACrF,IAAI,KAAK,OAAO,EAAE;gBAC/B,OAAAgG,aAAA,CAAAA,aAAA,KAAYX,OAAO;kBAAEnF,IAAI,EAAE,mBAAmB;kBAAEoF,QAAQ,EAAE;gBAAE;cAChE;YACJ;YACA,OAAOD,OAAO;UAClB,CAAC,CAAC;QACN,CAAC,CAAC;MACN,CAAC,CAAC;IAKN,CAAC,EAAE,EAAE,CAAC;IAIN,MAAMuC,gBAAgB,GAAG,MAAAA,CAAA,KAAW;MAChC,MAAMhF,IAAI,GAAG;QACTK,MAAM,EAAErB,IAAI,CAACe,GAAG;QAChBiD,SAAS,EAAEjD,GAAG;QACdO,MAAM,EAAE1B,OAAO,CAACmB;MACpB,CAAC;MACD,IACA;QACI,MAAMD,GAAG,GAAG,MAAM3E,UAAU,CAAC6E,IAAI,CAAC;QAElC,IAAIF,GAAG,CAACE,IAAI,CAACgB,OAAO,EACpB;UACI,MAAMlB,GAAG,GAAG,MAAM5E,aAAa,CAAC8D,IAAI,CAACe,GAAG,CAAC;UAEzCe,iBAAiB,CAAChB,GAAG,CAACE,IAAI,CAACiB,qBAAqB,CAAC;UAGjD,IAAI,CAACzB,WAAW,EAChB;YACI4B,UAAU,GAAGpC,IAAI,CAAC0E,OAAO,CAACrB,IAAI,CAAEsB,EAAE,IAAKA,EAAE,KAAK/E,OAAO,CAACmB,GAAG,CAAC;UAC9D,CAAC,MAED;YACIqB,UAAU,GAAGpC,IAAI,CAAC0E,OAAO,CAACH,MAAM,CAAEI,EAAE,IAAKA,EAAE,KAAK/E,OAAO,CAACmB,GAAG,CAAC;UAChE;UACA,MAAMC,IAAI,GAAAoD,aAAA,CAAAA,aAAA,KAAQtD,GAAG,CAACE,IAAI,CAACiB,qBAAqB;YAAEG;UAAU,EAAE;UAC9DhC,MAAM,CAAC8B,OAAO,CAAC0C,IAAI,CAAC,YAAY,EAAE5D,IAAI,CAAC;QAC3C;MACJ,CAAC,CACD,OAAOC,KAAK,EACZ;QACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IAGD,MAAMgF,kBAAkB,GAAG,MAAAA,CAAA,KAAW;MAGlC,MAAMjF,IAAI,GAAG;QACTK,MAAM,EAAErB,IAAI,CAACe,GAAG;QAChBiD,SAAS,EAAEjD;MACf,CAAC;MACD,IACA;QACI,MAAMD,GAAG,GAAG,MAAMxE,YAAY,CAAC0E,IAAI,CAAC;QACpC,IAAIF,GAAG,CAACE,IAAI,CAACgB,OAAO,EACpB;UAEI,IAAI,CAACxB,WAAW,EAChB;YACI4B,UAAU,GAAGpC,IAAI,CAAC0E,OAAO,CAACrB,IAAI,CAAEsB,EAAE,IAAKA,EAAE,KAAK/E,OAAO,CAACmB,GAAG,CAAC;UAC9D,CAAC,MAED;YACIqB,UAAU,GAAGpC,IAAI,CAAC0E,OAAO,CAACH,MAAM,CAAEI,EAAE,IAAKA,EAAE,KAAK/E,OAAO,CAACmB,GAAG,CAAC;UAChE;UACA,MAAMC,IAAI,GAAI;YAACD,GAAG;YAAEqB;UAAU,CAAE;UAChChC,MAAM,CAAC8B,OAAO,CAAC0C,IAAI,CAAC,cAAc,EAAE5D,IAAI,CAAC;UAEzC,MAAMkF,IAAI,GAAG,MAAMhK,aAAa,CAAC8D,IAAI,CAACe,GAAG,CAAC;UAC1CG,OAAO,CAACC,GAAG,CAAC,OAAO,EAAE+E,IAAI,CAAClF,IAAI,CAAC;UAG/Bc,iBAAiB,CAACoE,IAAI,CAAClF,IAAI,CAACiB,qBAAqB,CAAC;QAEtD;MACJ,CAAC,CACD,OAAOhB,KAAK,EACZ;QACIa,iBAAiB,CAAC,IAAI,CAAC;QAEtB,IAAI,CAACtB,WAAW,EAChB;UACI4B,UAAU,GAAGpC,IAAI,CAAC0E,OAAO,CAACrB,IAAI,CAAEsB,EAAE,IAAKA,EAAE,KAAK/E,OAAO,CAACmB,GAAG,CAAC;QAC9D,CAAC,MAED;UACIqB,UAAU,GAAGpC,IAAI,CAAC0E,OAAO,CAACH,MAAM,CAAEI,EAAE,IAAKA,EAAE,KAAK/E,OAAO,CAACmB,GAAG,CAAC;QAChE;QACA,MAAMC,IAAI,GAAAoD,aAAA,CAAAA,aAAA,KAAQtD,GAAG,CAACE,IAAI,CAACiB,qBAAqB;UAAEG;QAAU,EAAE;QAC9DhC,MAAM,CAAC8B,OAAO,CAAC0C,IAAI,CAAC,cAAc,EAAE5D,IAAI,CAAC;QAC1CE,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IAED,OACIjD,OAAA,CAAAE,SAAA;MAAAiI,QAAA,GACAnI,OAAA,CAACb,eAAe;QAAAgJ,QAAA,EACXrB,IAAI,IACL9G,OAAA,CAAAE,SAAA;UAAAiI,QAAA,GACAnI,OAAA,CAACT,iBAAiB;YAAC6I,cAAc,EAAEhB,SAAU;YAACiB,OAAO,EAAEP,YAAa;YAAAK,QAAA,EAChEnI,OAAA,CAACd,QAAQ;cACLoJ,KAAK,EAAE;gBAACC,QAAQ,EAAE,UAAU;gBAAE1H,MAAM,EAAE,EAAE;gBAAE2H,cAAc,EAAE,QAAQ;gBAAEC,MAAM,EAAE,GAAG;gBAAEC,GAAG,EAAE,CAAC;cAAE,CAAE;cAC3FC,IAAI,EAAE;gBAACC,OAAO,EAAE;cAAC,CAAE;cACnBC,OAAO,EAAE;gBAACD,OAAO,EAAE;cAAC,CAAE;cAAAT,QAAA,EAEtBnI,OAAA,CAACd,QAAQ;gBACLoJ,KAAK,EAAE;kBAACQ,UAAU,EAAE;gBAAQ,CAAE;gBAC9BH,IAAI,EAAE;kBAACI,UAAU,EAAE,EAAE;kBAAEH,OAAO,EAAE;gBAAC,CAAE;gBACnCC,OAAO,EAAE;kBAACE,UAAU,EAAE,CAAC;kBAAEH,OAAO,EAAE;gBAAC,CAAE;gBACrCI,IAAI,EAAE;kBAACD,UAAU,EAAE,EAAE;kBAAEH,OAAO,EAAE;gBAAC,CAAE;gBACnCK,UAAU,EAAE;kBAACC,QAAQ,EAAE;gBAAG,CAAE;gBAAAf,QAAA,EAE5BnI,OAAA,CAACmJ,IAAI;kBACDb,KAAK,EAAE;oBACHc,aAAa,EAAE,KAAK;oBACpBC,YAAY,EAAE,EAAE;oBAChBC,eAAe,EAAE,MAAM;oBACvBC,WAAW,EAAE,MAAM;oBACnBC,YAAY,EAAE;sBACV1I,KAAK,EAAE,CAAC;sBACRD,MAAM,EAAE;oBACZ,CAAC;oBACD4I,aAAa,EAAE,CAAC;oBAChBC,YAAY,EAAE;kBAClB,CAAE;kBAAAvB,QAAA,EAEDlH,KAAK,CAACkF,GAAG,CAAC,CAACb,IAAI,EAAEmB,KAAK,KACvBzG,OAAA,CAACX,SAAS;oBACNsK,OAAO,EAAGA,CAAA,KAAM5B,gBAAgB,CAACtB,KAAK,CAAE;oBACvBzD,IAAI,EAAEsC,IAAK;oBAC5BmB,KAAK,EAAEA,KAAM;oBACbmD,MAAM,EAAE1F,OAAO,KAAKuC;kBAAM,GAFrBnB,IAAI,CAAC/D,KAAK;oBAAAJ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAGlB,CACA;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACA;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACD;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC,EACpBtB,OAAA,CAACT,iBAAiB;YAAC6I,cAAc,EAAEhB,SAAU;YAACiB,OAAO,EAAEP,YAAa;YAAAK,QAAA,EAChEnI,OAAA,CAACd,QAAQ;cACLoJ,KAAK,EAAE;gBAACC,QAAQ,EAAE,UAAU;gBAAE1H,MAAM,EAAE,EAAE;gBAAE2H,cAAc,EAAE,QAAQ;gBAAEC,MAAM,EAAE,GAAG;gBAAEC,GAAG,EAAE;cAAG,CAAE;cAC3FC,IAAI,EAAE;gBAACC,OAAO,EAAE;cAAC,CAAE;cACnBC,OAAO,EAAE;gBAACD,OAAO,EAAE;cAAC,CAAE;cAAAT,QAAA,EAEtBnI,OAAA,CAACd,QAAQ;gBACLoJ,KAAK,EAAE;kBAACQ,UAAU,EAAE;gBAAQ,CAAE;gBAC9BH,IAAI,EAAE;kBAACI,UAAU,EAAE,EAAE;kBAAEH,OAAO,EAAE;gBAAC,CAAE;gBACnCC,OAAO,EAAE;kBAACE,UAAU,EAAE,CAAC;kBAAEH,OAAO,EAAE;gBAAC,CAAE;gBACrCI,IAAI,EAAE;kBAACD,UAAU,EAAE,EAAE;kBAAEH,OAAO,EAAE;gBAAC,CAAE;gBACnCK,UAAU,EAAE;kBAACC,QAAQ,EAAE;gBAAG,CAAE;gBAAAf,QAAA,EAE5BnI,OAAA,CAACmJ,IAAI;kBACDb,KAAK,EAAE;oBAEHxH,KAAK,EAAE,GAAG;oBACVuI,YAAY,EAAE,CAAC;oBACfC,eAAe,EAAE,MAAM;oBACvBC,WAAW,EAAE,MAAM;oBACnBC,YAAY,EAAE;sBACV1I,KAAK,EAAE,CAAC;sBACRD,MAAM,EAAE;oBACZ,CAAC;oBACD4I,aAAa,EAAE,CAAC;oBAChBC,YAAY,EAAE,CAAC;oBACfG,OAAO,EAAE,EAAE;oBAEXtB,QAAQ,EAAE,UAAU;oBACpBuB,IAAI,EAAE,CAAC;oBACPrB,MAAM,EAAE;kBACZ,CAAE;kBAAAN,QAAA,EAEFnI,OAAA,CAACmJ,IAAI;oBAACb,KAAK,EAAE;sBAACxH,KAAK,EAAE,MAAM;sBAAE4H,GAAG,EAAE,CAAC;oBAAG,CAAE;oBAAAP,QAAA,GACpCnI,OAAA,CAAC+J,gBAAgB;sBACbzB,KAAK,EAAE;wBAACxH,KAAK,EAAE,MAAM;wBAAEsI,aAAa,EAAE,KAAK;wBAAEN,UAAU,EAAE,QAAQ;wBAAEN,cAAc,EAAE,eAAe;wBAAEwB,iBAAiB,EAAE,CAAC;wBAAEnJ,MAAM,EAAE,EAAE;wBAAEoJ,WAAW,EAAE;sBAAS,CAAE;sBAC9JN,OAAO,EAAEA,CAAA,KAAM/F,UAAU,CAAC;wBAACoC,SAAS,EAAEjD,GAAG;wBAAEA,GAAG,EAAE4C,QAAQ;wBAAEF,OAAO,EAAEA;sBAAO,CAAC,CAAE;sBAAA0C,QAAA,GAE7EnI,OAAA,CAACkK,IAAI;wBAAA/B,QAAA,EAAC;sBAAO;wBAAAhH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC,EACpBtB,OAAA,CAACmK,KAAK;wBACFC,MAAM,EAAEC,OAAO,CAAC,sBAAsB,CAAE;wBACxCC,UAAU,EAAC,SAAS;wBACpBhC,KAAK,EAAE;0BAACiC,SAAS,EAAE,CAAC;4BAACC,MAAM,EAAE,CAAC;0BAAC,CAAC,CAAC;0BAAE1J,KAAK,EAAE,EAAE;0BAAED,MAAM,EAAE;wBAAE;sBAAE;wBAAAM,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACtD,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACK,CAAC,EACnBtB,OAAA,CAAC+J,gBAAgB;sBACbzB,KAAK,EAAE;wBAACxH,KAAK,EAAE,MAAM;wBAAEsI,aAAa,EAAE,KAAK;wBAAEN,UAAU,EAAE,QAAQ;wBAAEN,cAAc,EAAE,eAAe;wBAAEwB,iBAAiB,EAAE,CAAC;wBAAEnJ,MAAM,EAAE,EAAE;wBAAEoJ,WAAW,EAAE;sBAAS,CAAE;sBAAA9B,QAAA,GAE9JnI,OAAA,CAACkK,IAAI;wBAAA/B,QAAA,EAAC;sBAAQ;wBAAAhH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC,EACrBtB,OAAA,CAACmK,KAAK;wBACFC,MAAM,EAAEC,OAAO,CAAC,kBAAkB,CAAE;wBACpCC,UAAU,EAAC,SAAS;wBACpBhC,KAAK,EAAE;0BAACiC,SAAS,EAAE,CAAC;4BAACC,MAAM,EAAE,CAAC;0BAAC,CAAC,CAAC;0BAAE1J,KAAK,EAAE,EAAE;0BAAED,MAAM,EAAE;wBAAE;sBAAE;wBAAAM,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACtD,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACK,CAAC,EACnBtB,OAAA,CAAC+J,gBAAgB;sBACbzB,KAAK,EAAE;wBAACxH,KAAK,EAAE,MAAM;wBAAEsI,aAAa,EAAE,KAAK;wBAAEN,UAAU,EAAE,QAAQ;wBAAEN,cAAc,EAAE,eAAe;wBAAEwB,iBAAiB,EAAE,CAAC;wBAAEnJ,MAAM,EAAE,EAAE;wBAAEoJ,WAAW,EAAE;sBAAS,CAAE;sBAC9JN,OAAO,EAAEA,CAAA,KAAMxE,eAAe,CAACpC,GAAG,CAAE;sBAAAoF,QAAA,GAEpCnI,OAAA,CAACkK,IAAI;wBAAA/B,QAAA,EAAC;sBAAW;wBAAAhH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC,EACxBtB,OAAA,CAACmK,KAAK;wBACFC,MAAM,EAAEC,OAAO,CAAC,sBAAsB,CAAE;wBACxCC,UAAU,EAAC,SAAS;wBACpBhC,KAAK,EAAE;0BAACiC,SAAS,EAAE,CAAC;4BAACC,MAAM,EAAE,CAAC;0BAAC,CAAC,CAAC;0BAAE1J,KAAK,EAAE,EAAE;0BAAED,MAAM,EAAE;wBAAE;sBAAE;wBAAAM,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACtD,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACK,CAAC,EACnBtB,OAAA,CAAC+J,gBAAgB;sBACbzB,KAAK,EAAE;wBAACxH,KAAK,EAAE,MAAM;wBAAEsI,aAAa,EAAE,KAAK;wBAAEN,UAAU,EAAE,QAAQ;wBAAEN,cAAc,EAAE,eAAe;wBAAE3H,MAAM,EAAE;sBAAE,CAAE;sBAChH8I,OAAO,EAAEA,CAAA,KAAM,CAAC7D,QAAQ,GAAGkC,gBAAgB,CAAC,CAAC,GAAGC,kBAAkB,CAAC,CAAE;sBAAAE,QAAA,GAErEnI,OAAA,CAACkK,IAAI;wBAAC5B,KAAK,EAAE;0BAAC9G,KAAK,EAAEsE,QAAQ,GAAG,KAAK,GAAG;wBAAI,CAAE;wBAAAqC,QAAA,EAAE,CAACrC,QAAQ,GAAG,MAAM,GAAG;sBAAS;wBAAA3E,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAO,CAAC,EACtFtB,OAAA,CAACmK,KAAK;wBACFC,MAAM,EAAEC,OAAO,CAAC,qBAAqB,CAAE;wBACvCC,UAAU,EAAC,SAAS;wBACpBhC,KAAK,EAAE;0BAACxH,KAAK,EAAE,EAAE;0BAAED,MAAM,EAAE;wBAAE;sBAAE;wBAAAM,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAC3B,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACK,CAAC,EACnBtB,OAAA,CAAC+J,gBAAgB;sBACbzB,KAAK,EAAE;wBAACxH,KAAK,EAAE,MAAM;wBAAEsI,aAAa,EAAE,KAAK;wBAAEN,UAAU,EAAE,QAAQ;wBAAEN,cAAc,EAAE,eAAe;wBAAE3H,MAAM,EAAE;sBAAE,CAAE;sBAChH8I,OAAO,EAAEA,CAAA,KAAMc,WAAW,CAACvG,OAAO,CAAC4C,IAAI,CAAC,CAAE;sBAAAqB,QAAA,GAE1CnI,OAAA,CAACkK,IAAI;wBAAC5B,KAAK,EAAE;0BAAC9G,KAAK,EAAE;wBAAK,CAAE;wBAAA2G,QAAA,EAAC;sBAAY;wBAAAhH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC,EAChDtB,OAAA,CAACmK,KAAK;wBACFC,MAAM,EAAEC,OAAO,CAAC,qBAAqB,CAAE;wBACvCC,UAAU,EAAC,SAAS;wBACpBhC,KAAK,EAAE;0BAACiC,SAAS,EAAE,CAAC;4BAACC,MAAM,EAAE,CAAC;0BAAC,CAAC,CAAC;0BAAE1J,KAAK,EAAE,EAAE;0BAAED,MAAM,EAAE;wBAAE;sBAAE;wBAAAM,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACtD,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACK,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAEjB;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACL;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACD;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC;QAAA,eAClB;MACL;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACgB,CAAC,EACjBwF,IAAI,IAAI9G,OAAA,CAACV,IAAI;QAACoL,IAAI,EAAE1D;MAAS;QAAA7F,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,EACrCwF,IAAI,IAAI9G,OAAA,CAACZ,QAAQ;QAACuK,OAAO,EAAExC;MAAQ;QAAAhG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,EACtCtB,OAAA,CAACvB,aAAa;QACVkM,WAAW,EAAEzD,eAAgB;QAC7B1B,MAAM,EAAEA,MAAO;QACflF,IAAI,EAAEmF,OAAQ;QACd7D,OAAO,EAAEA,OAAQ;QACjBJ,KAAK,EAAE0C,OAAO,KAAK,IAAI,GAAG,MAAM,GAAGjD,KAAK,CAACiD,OAAO,CAAC,CAAC1C,KAAM;QACxDoJ,KAAK,EAAE1G,OAAO,GAAGjD,KAAK,CAACiD,OAAO,KAAK,IAAI,GAAG,CAAC,GAAGA,OAAO,CAAC,CAAChD,MAAM,GAAG,IAAK;QACrEwE,QAAQ,EAAEA,QAAS;QACnBxD,WAAW,EAAEA,WAAY;QACzBM,WAAW,EAAEA,WAAY;QACzBd,UAAU,EAAEA,UAAW;QACvBiE,QAAQ,EAAEA,QAAS;QACnBC,SAAS,EAAEA,SAAU;QACrBC,cAAc,EAAEA;MAAe;QAAA1E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnB,CAAC;IAAA,eAEf,CAAC;EAgBX;EAeA/D,SAAS,CAAC,MAAM;IACZ,MAAMsN,aAAa,GAAG,MAAAA,CAAA,KAAY;MAC9B,IACA;QAEI,MAAM;UAAC7H;QAAI,CAAC,GAAG,MAAM/E,WAAW,CAAC+D,IAAI,CAACe,GAAG,EAAEnB,OAAO,CAACmB,GAAG,CAAC;QAEvDW,WAAW,CAACV,IAAI,CAAC;MAErB,CAAC,CACD,OAAOC,KAAK,EACZ;QACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IACDb,MAAM,CAAC8B,OAAO,CAACC,EAAE,CAAC,eAAe,EAAGnB,IAAI,IAAK;MAEzC6H,aAAa,CAAC,CAAC;IACnB,CAAC,CAAC;EACN,CAAC,EAAE,CAACpJ,IAAI,EAAEgC,QAAQ,CAAC,CAAC;EA8BpB,MAAM,CAACqH,UAAU,EAAEC,aAAa,CAAC,GAAGrN,QAAQ,CAAC,EAAE,CAAC;EAGhDH,SAAS,CAAC,MAAM;IACZ,IAAI+E,cAAc,KAAK,IAAI,IAAIA,cAAc,CAACe,MAAM,KAAKrB,IAAI,CAACe,GAAG,EACjE;MACIW,WAAW,CAAC,CAAC,GAAGD,QAAQ,EAAEnB,cAAc,CAAC,CAAC;IAC9C;EACJ,CAAC,EAAE,CAACA,cAAc,CAAC,CAAC;EAIpB/E,SAAS,CAAC,MAAM;IAEZ,MAAM+F,MAAM,GAAGtB,IAAI,EAAE0E,OAAO,EAAErB,IAAI,CAAEsB,EAAE,IAAKA,EAAE,KAAKzE,WAAW,CAAC;IAC9DgB,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEG,MAAM,CAAC;IAC3B,MAAM0H,WAAW,GAAG,MAAAA,CAAA,KAAW;MAC3B,IACA;QACI,MAAMlI,GAAG,GAAG,MAAMvE,OAAO,CAAC+E,MAAM,CAAC;QACjC,IAAIR,GAAG,CAACE,IAAI,CAACgB,OAAO,EAChBR,WAAW,CAACV,GAAG,CAACE,IAAI,CAACiI,IAAI,CAAC;QAC1B/H,OAAO,CAACC,GAAG,CAAC,UAAU,EAACL,GAAG,CAACE,IAAI,CAACiI,IAAI,CAAC;MAC7C,CAAC,CACD,OAAOhI,KAAK,EACZ;QACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IAED,IAAIjB,IAAI,KAAK,IAAI,EACbgJ,WAAW,CAAC,CAAC;EACrB,CAAC,EAAE,CAAChJ,IAAI,EAAEE,WAAW,CAAC,CAAC;EAGvB3E,SAAS,CAAC,MAAM;IACZ,MAAMsN,aAAa,GAAG,MAAAA,CAAA,KAAY;MAC9B,IACA;QAEI,MAAM;UAAC7H;QAAI,CAAC,GAAG,MAAM/E,WAAW,CAAC+D,IAAI,CAACe,GAAG,EAAEnB,OAAO,CAACmB,GAAG,CAAC;QAEvDW,WAAW,CAACV,IAAI,CAAC;MAErB,CAAC,CACD,OAAOC,KAAK,EACZ;QACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC;IAED,IAAIjB,IAAI,KAAK,IAAI,EACb6I,aAAa,CAAC,CAAC;EACvB,CAAC,EAAE,CAAC7I,IAAI,CAAC,CAAC;EAkBV,MAAMkJ,UAAU,GAAGzN,MAAM,CAAC,IAAI0N,QAAQ,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAClH,OAAO;EACxD,MAAM,CAACmH,YAAY,EAAEC,eAAe,CAAC,GAAG5N,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM6N,WAAW,GAAGA,CAAA,KAAM;IACtBC,QAAQ,CAACC,OAAO,CAAC,CAAC;IAClBvI,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEkI,YAAY,CAAC;IACjCK,WAAW,CAAC,CAAC;IACbJ,eAAe,CAAC,CAACD,YAAY,CAAC;IAC9BF,QAAQ,CAACQ,MAAM,CAACT,UAAU,EAAE;MACxBU,OAAO,EAAEP,YAAY,GAAG,GAAG,GAAG,CAAC;MAC/BnC,QAAQ,EAAE,GAAG;MACb2C,eAAe,EAAE;IACrB,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;IACVC,iBAAiB,CAAC,EAAE,CAAC;EACzB,CAAC;EAGD,MAAM,CAACC,SAAS,EAAEC,QAAQ,CAAC,GAAGvO,QAAQ,CAAC,EAAE,CAAC;EAE1C,MAAMgO,WAAW,GAAG,MAAAA,CAAA,KAAY;IAE5B,MAAM;MAAEQ;IAAO,CAAC,GAAG,MAAMzM,YAAY,CAAC0M,uBAAuB,CAAC,CAAC;IAC/D,IAAID,MAAM,KAAK,SAAS,EAAE;MACtBE,KAAK,CAAC,gDAAgD,CAAC;MACvD;IACJ;IAGA,MAAMC,KAAK,GAAG,MAAM5M,YAAY,CAAC6M,cAAc,CAAC;MAC5CC,SAAS,EAAE,KAAK;MAChBC,KAAK,EAAE;IACX,CAAC,CAAC;IAGF,MAAMC,kBAAkB,GAAGJ,KAAK,CAACK,MAAM,CAACvG,GAAG,CAAC,MAAOwG,KAAK,IAAK;MACzD,MAAMC,SAAS,GAAG,MAAMnN,YAAY,CAACoN,iBAAiB,CAACF,KAAK,CAAChG,EAAE,CAAC;MAChE,OAAOiG,SAAS,CAACE,QAAQ;IAC7B,CAAC,CAAC;IAGF,MAAMC,UAAU,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACR,kBAAkB,CAAC;IACxDR,QAAQ,CAACc,UAAU,CAAC;EACxB,CAAC;EAGD,MAAM,CAACG,cAAc,EAAEnB,iBAAiB,CAAC,GAAGrO,QAAQ,CAAC,EAAE,CAAC;EAGxD,MAAMyP,iBAAiB,GAAIC,GAAG,IAAK;IAC/B,IAAIF,cAAc,CAACG,QAAQ,CAACD,GAAG,CAAC,EAAE;MAE9BrB,iBAAiB,CAACmB,cAAc,CAAC3G,MAAM,CAACjB,IAAI,IAAIA,IAAI,KAAK8H,GAAG,CAAC,CAAC;IAClE,CAAC,MAAM;MAEHrB,iBAAiB,CAAC,CAAC,GAAGmB,cAAc,EAAEE,GAAG,CAAC,CAAC;IAC/C;IACAlK,OAAO,CAACC,GAAG,CAAC,MAAM,EAAC6I,SAAS,CAAC,CAAC,CAAC,CAAC;EACpC,CAAC;EACD,MAAMsB,WAAW,GAAG7P,MAAM,CAAC,CAAC;EAG5B,MAAM8P,cAAc,GAAGA,CAAA,KAAM;IACzBD,WAAW,CAACpJ,OAAO,CAACsJ,WAAW,CAAC;MAAEC,QAAQ,EAAE;IAAK,CAAC,CAAC;EACvD,CAAC;EAGD,MAAM;IAACC;EAAO,CAAC,GAAGC,mBAAmB,CAAC,CAAC;EACvC,MAAM,CAACC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGnQ,QAAQ,CAAC;IAACkK,CAAC,EAAE,CAAC;IAAEkG,CAAC,EAAE;EAAC,CAAC,CAAC;EACxE,MAAM,CAAC1I,eAAe,EAAE2I,kBAAkB,CAAC,GAAGrQ,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAACsQ,SAAS,EAAEC,YAAY,CAAC,GAAGvQ,QAAQ,CAAC;IAACkK,CAAC,EAAE,CAAC;IAAEkG,CAAC,EAAE;EAAC,CAAC,CAAC;EACxD,MAAM,CAACpN,QAAQ,EAAEwN,SAAS,CAAC,GAAGxQ,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAMiN,WAAW,GAAGA,CAACwD,CAAC,EAAE1I,OAAO,EAAE2I,WAAW,KAAK;IAE7C,MAAM;MAACC,KAAK;MAAEC;IAAS,CAAC,GAAGH,CAAC,CAAC7G,WAAW;IACxC,IAAIwG,CAAC,GAAGO,KAAK,GAAGC,SAAS;IAEzB,MAAMC,sBAAsB,GAAGT,CAAC,GAAG,GAAG;IACtC,MAAMU,yBAAyB,GAAGd,OAAO,GAAGI,CAAC,GAAGrI,OAAO,EAAEgJ,YAAY;IAKrE,IAAID,yBAAyB,EAC7B;MACItL,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;MACtB2K,CAAC,GAAGA,CAAC,GAAGrI,OAAO,EAAEgJ,YAAY;IAGjC;IAEA,IAAIF,sBAAsB,EAC1B;MACIrL,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;MACzB2K,CAAC,GAAGA,CAAC,GAAGrI,OAAO,EAAEgJ,YAAY;IAIjC;IACAvL,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEoL,sBAAsB,CAAC;IAE/CV,oBAAoB,CAAC;MACjBjG,CAAC,EAAE,CAAC;MACJkG,CAAC,EAAEO,KAAK,GAAGC;IACf,CAAC,CAAC;IACFpL,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEiL,WAAW,CAAC;IACrCH,YAAY,CAAC;MAACrG,CAAC,EAAE,CAAC;MAAEkG,CAAC,EAAEM,WAAW,IAAIC,KAAK,GAAGC,SAAS;IAAC,CAAC,CAAC;IAE1DP,kBAAkB,CAACtI,OAAO,CAAC;EAC/B,CAAC;EAID,IAAIgF,WAAW,GAAGnN,KAAK,CAACoR,SAAS,CAAC,CAAC;EAInC,MAAMC,oBAAoB,GAAG,MAAMrJ,IAAI,IAAK;IACxC,MAAMsJ,UAAU,GAAG,MAAAA,CAAA,KAAW;MAC1B,MAAMnJ,OAAO,GAAG;QACZpC,MAAM,EAAEiC,IAAI,CAACjC,MAAM;QACnBsC,QAAQ,EAAE/D,OAAO,CAACmB,GAAG;QACrBzC,IAAI,EAAEmE,iBAAiB,CAACnE;MAC5B,CAAC;MAGD,IAAI,CAACkC,WAAW,EAChB;QACI4B,UAAU,GAAGpC,IAAI,CAAC0E,OAAO,CAACrB,IAAI,CAAEsB,EAAE,IAAKA,EAAE,KAAKzE,WAAW,CAAC;MAC9D,CAAC,MAED;QAEIkC,UAAU,GAAGpC,IAAI,CAAC0E,OAAO,CAACH,MAAM,CAAEI,EAAE,IAAKA,EAAE,KAAKzE,WAAW,CAAC;MAChE;MAEAC,cAAc,CAAAiE,aAAA,CAAAA,aAAA,KAAKX,OAAO;QAAErB;MAAU,EAAC,CAAC;MAGxC,IAAI;QACA,MAAM;UAACpB;QAAI,CAAC,GAAG,MAAMlF,UAAU,CAAC2H,OAAO,CAAC;QAExC/B,WAAW,CAAC,CAAC,GAAGD,QAAQ,EAAET,IAAI,CAAC,CAAC;QAChC6L,OAAO,CAAC,EAAE,CAAC;MACf,CAAC,CAAC,OAAO5L,KAAK,EAAE;QACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IAEJ,CAAC;IAkCDC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEsB,iBAAiB,CAAC;IACxC,IAAIA,iBAAiB,CAACrE,IAAI,KAAK,MAAM,EACrC;MACIwO,UAAU,CAAC,CAAC;MACZ1L,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;IAC/B,CAAC,MAED;MACID,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEsB,iBAAiB,CAACiB,QAAQ,CAAC;IACvD;EACJ,CAAC;EAGD,MAAM,CAACoJ,qBAAqB,EAAEC,wBAAwB,CAAC,GAAGrR,QAAQ,CAAC,KAAK,CAAC;EAGzE,OACIsC,OAAA,CAACL,IAAI;IAAAwI,QAAA,EAELnI,OAAA,CAACR,sBAAsB;MAAC8I,KAAK,EAAE;QAAC0G,IAAI,EAAE;MAAC,CAAE;MAAA7G,QAAA,GACzCnI,OAAA,CAACiP,wBAAwB;QACrBtF,OAAO,EAAEA,CAAA,KAAM,CAAC0B,YAAY,GAAGE,WAAW,CAAC,CAAC,GAAG,IAAK;QAAApD,QAAA,EAExDnI,OAAA,CAACkP,YAAY;UAAC5G,KAAK,EAAE6G,MAAM,CAACC,SAAU;UAAAjH,QAAA,GACjC3F,WAAW,GACRxC,OAAA,CAAC9C,cAAc;YAAC8E,IAAI,EAAEA,IAAK;YAACU,SAAS,EAAEV,IAAI,CAACU,SAAU;YAACa,QAAQ,EAAEA,QAAS;YAAC7B,UAAU,EAAEA;UAAW;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAiB,CAAC,GACpHtB,OAAA,CAAC9C,cAAc;YAACqG,QAAQ,EAAEA,QAAS;YAAC7B,UAAU,EAAEA,UAAW;YAACqN,wBAAwB,EAAEA;UAAyB;YAAA5N,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAiB,CAAC,EAGrItB,OAAA,CAACqP,oBAAoB;YAEjBC,sBAAsB,EAAE,CAAE;YAC1BC,QAAQ,EAAEC,QAAQ,CAACC,EAAE,KAAK,KAAK,GAAG,SAAS,GAAGC,SAAU;YAAAvH,QAAA,EAExDnI,OAAA,CAACmJ,IAAI;cAACb,KAAK,EAAE;gBAACxH,KAAK,EAAE,MAAM;gBAAED,MAAM,EAAE,MAAM;gBAAEyI,eAAe,EAAE,MAAM;gBAAEd,cAAc,EAAE,eAAe;gBAAEM,UAAU,EAAE;cAAQ,CAAE;cAAAX,QAAA,GAKrHnI,OAAA,CAAC2P,QAAQ;gBACLC,GAAG,EAAEtC,WAAY;gBACjBtK,IAAI,EAAES,QAAS;gBAEfoM,UAAU,EAAEA,CAAC;kBAACvK;gBAAI,CAAC,KACftF,OAAA,CAACuF,aAAa;kBAEVC,MAAM,EAAEF,IAAI,CAACK,QAAS;kBACtBF,OAAO,EAAEH,IAAI,CAAChF,IAAK;kBACnBK,SAAS,EAAE2E,IAAI,CAAC3E,SAAU;kBAC1B+E,QAAQ,EAAEJ,IAAI,CAAChF,IAAI,KAAK,EAAE,GAAGgF,IAAI,CAACI,QAAQ,GAAG,IAAK;kBAElD3C,GAAG,EAAEuC,IAAI,CAACvC,GAAI;kBACd4C,QAAQ,EAAEL,IAAI,CAACK,QAAS;kBACxBC,SAAS,EAAIN;gBAAK,GARbA,IAAI,CAACvC,GAAG;kBAAA5B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAShB,CACH;gBACFwO,YAAY,EAAExK,IAAI,IAAIA,IAAI,CAAC3E,SAAU;gBACrCoP,qBAAqB,EAAG;kBAACC,iBAAiB,EAAE,EAAE;kBAAEC,GAAG,EAAE;gBAAE,CAAE;gBACzD3H,KAAK,EAAE;kBAACxH,KAAK,EAAEA,KAAK;kBAAEoP,SAAS,EAAE,KAAK;kBAAErP,MAAM,EAAE;gBAAK,CAAE;gBACvDsP,iCAAiC;gBACjCC,mBAAmB,EAAE7C,cAAe;gBACpC8C,QAAQ,EAAE9C;cAAe;gBAAApM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClB,CAAC,EAGhBtB,OAAA,CAACN,UAAU;gBACP0F,eAAe,EAAEA,eAAgB;gBACjCwI,iBAAiB,EAAEA,iBAAkB;gBACrCI,SAAS,EAAEA,SAAU;gBACrBD,kBAAkB,EAAEA,kBAAmB;gBACvCrN,QAAQ,EAAEA,QAAS;gBACnBO,KAAK,EAAIA;cAAM;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,EACdtB,OAAA,CAAC7C,UAAU;gBAAC+E,WAAW,EAAEA,WAAY;gBAACF,IAAI,EAAEA,IAAK;gBAAC0B,WAAW,EAAEA,WAAY;gBAACD,QAAQ,EAAEA,QAAS;gBAACtB,cAAc;gBAACC,MAAM,EAAEA,MAAO;gBAACmJ,WAAW,EAAEA,WAAY;gBAAC2B,cAAc,EAAEA,cAAe;gBAACnB,iBAAiB,EAAEA,iBAAkB;gBAACpI,OAAO,EAAEA,OAAQ;gBAACC,UAAU,EAAEA,UAAW;gBAACC,aAAa,EAAEA,aAAc;gBAACyM,gBAAgB,EAAExM;cAAkB;gBAAA3C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAa,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAIvV;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACW,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACb;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEW,CAAC,EAC3BtB,OAAA,CAACmL,QAAQ,CAAChC,IAAI;QAACb,KAAK,EAAE;UAACxH,KAAK,EAAE,MAAM;UAAED,MAAM,EAAEqK,UAAU;UAAE5B,eAAe,EAAE,MAAM;UAAEiH,SAAS,EAAE;QAAE,CAAE;QAAApI,QAAA,EAC9FnI,OAAA,CAACwQ,UAAU;UACPlI,KAAK,EAAE;YAACxH,KAAK,EAAE,MAAM;YAAED,MAAM,EAAE;UAAM,CAAE;UAAAsH,QAAA,EAEvCnI,OAAA,CAACmJ,IAAI;YAACb,KAAK,EAAE;cAACc,aAAa,EAAE,KAAK;cAAEtI,KAAK,EAAE,MAAM;cAAE2P,QAAQ,EAAE;YAAM,CAAE;YAAAtI,QAAA,GACjEnI,OAAA,CAAC+J,gBAAgB;cACbzB,KAAK,EAAE;gBAACxH,KAAK,EAAE,GAAG;gBAAED,MAAM,EAAE;cAAG;YAAE;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClB,CAAC,EACnB0K,SAAS,CAAC7F,GAAG,CAAC,CAACb,IAAI,EAAEmB,KAAK,KACvBzG,OAAA,CAAC+J,gBAAgB;cACbzB,KAAK,EAAE;gBAACxH,KAAK,EAAE,GAAG;gBAAED,MAAM,EAAE,GAAG;gBAAEyI,eAAe,EAAE,MAAM;gBAAEoH,WAAW,EAAE,CAAC;gBAAEzG,WAAW,EAAE;cAAM,CAAE;cAAA9B,QAAA,GAG/FnI,OAAA,CAACmK,KAAK;gBACFC,MAAM,EAAE;kBAACgD,GAAG,EAAE9H;gBAAI,CAAE;gBACpBgD,KAAK,EAAE;kBAACxH,KAAK,EAAE,MAAM;kBAAED,MAAM,EAAE;gBAAM,CAAE;gBACvCyJ,UAAU,EAAC;cAAO;gBAAAnJ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACd,CAAC,EACTtB,OAAA,CAAC+J,gBAAgB;gBACbzB,KAAK,EAAE;kBAACxH,KAAK,EAAE,EAAE;kBAAED,MAAM,EAAE,EAAE;kBAAEwI,YAAY,EAAE,EAAE;kBAAEd,QAAQ,EAAE,UAAU;kBAAEoI,KAAK,EAAE,CAAC;kBAAEC,MAAM,EAAE,EAAE;kBAAEF,WAAW,EAAE,CAAC;kBAAEzG,WAAW,EAAE,MAAM;kBAAEX,eAAe,EAAE4D,cAAc,CAACG,QAAQ,CAAC/H,IAAI,CAAC,GAAG,SAAS,GAAG,iBAAiB;kBAAEkD,cAAc,EAAE,QAAQ;kBAAEM,UAAU,EAAE;gBAAQ,CAAE;gBAClQa,OAAO,EAAEA,CAAA,KAAMwD,iBAAiB,CAAC7H,IAAI,CAAE;gBAAA6C,QAAA,EAEtC+E,cAAc,CAAC2D,OAAO,CAACvL,IAAI,CAAC,GAAG,CAAC,GAC7BtF,OAAA,CAACkK,IAAI;kBAAC5B,KAAK,EAAE;oBAAC9G,KAAK,EAAE,MAAM;oBAAEsP,UAAU,EAAE;kBAAM,CAAE;kBAAA3I,QAAA,EAAE+E,cAAc,CAAC2D,OAAO,CAACvL,IAAI,CAAC,GAAG;gBAAC;kBAAAnE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,GAAG;cAAI;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAExF,CAAC;YAAA,GAddmF,KAAK;cAAAtF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAeI,CACrB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,EAChBtB,OAAA,CAACJ,WAAW;QACRgQ,GAAG,EAAEnF,WAAY;QAEjBsG,OAAO,EAAE,CAAC,uBAAuB,EAAE,iBAAiB,EAAE,KAAK,CAAE;QAC7DC,iBAAiB,EAAE,CAAE;QACrBrH,OAAO,EAAGlD,KAAK,IAAK;UAACD,sBAAsB,CAACC,KAAK,CAAC;QAAA;MAAE;QAAAtF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1C,CAAC,EACftB,OAAA,CAACH,WAAW;QACR+P,GAAG,EAAE5K,uBAAwB;QAE7BD,UAAU,EAAEA,UAAW;QACvBuD,KAAK,EAAE;UAACiB,WAAW,EAAE,MAAM;UAC3BC,YAAY,EAAE;YACV1I,KAAK,EAAE,CAAC;YACRD,MAAM,EAAE;UACZ,CAAC;UACD4I,aAAa,EAAE,IAAI;UACnBC,YAAY,EAAE,IAAI;UAElBuH,SAAS,EAAE;QAAC,CAAE;QACdC,QAAQ,EAAGzK,KAAK,IAAK;UAACA,KAAK,IAAI,CAAC,GAAG3B,yBAAyB,CAAC,IAAI,CAAC,GAAGA,yBAAyB,CAAC,KAAK,CAAC;QAAA,CAAE;QACvGqM,oBAAoB,EAAE;UAAC7H,eAAe,EAAE;QAAM,CAAE;QAAAnB,QAAA,EAEhDnI,OAAA,CAACmJ,IAAI;UAACb,KAAK,EAAE;YAACxH,KAAK,EAAE,MAAM;YAAEgI,UAAU,EAAE;UAAQ,CAAE;UAAAX,QAAA,GAC/CnI,OAAA,CAACmJ,IAAI;YAACb,KAAK,EAAE;cAACxH,KAAK,EAAE,KAAK;cAAEgI,UAAU,EAAE,QAAQ;cAAEN,cAAc,EAAE,eAAe;cAAEY,aAAa,EAAE;YAAK,CAAE;YAAAjB,QAAA,GACrGnI,OAAA,CAAC+J,gBAAgB;cACbJ,OAAO,EAAEA,CAAA,KAAM1E,gBAAgB,CAAC,CAAE;cAAAkD,QAAA,EAElCnI,OAAA,CAACkK,IAAI;gBAAC5B,KAAK,EAAE;kBAAC9G,KAAK,EAAE,SAAS;kBAAEsP,UAAU,EAAE;gBAAK,CAAE;gBAAA3I,QAAA,EAAC;cAAI;gBAAAhH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjD,CAAC,EACnBtB,OAAA,CAACkK,IAAI;cAAC5B,KAAK,EAAE;gBAACwI,UAAU,EAAE,MAAM;gBAAEM,QAAQ,EAAE;cAAE,CAAE;cAAAjJ,QAAA,EAAC;YAAO;cAAAhH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,EAC/DtB,OAAA,CAAC+J,gBAAgB;cAAA5B,QAAA,EACbnI,OAAA,CAACkK,IAAI;gBAAC5B,KAAK,EAAE;kBAAC9G,KAAK,EAAE,SAAS;kBAAEsP,UAAU,EAAE;gBAAK,CAAE;gBAAA3I,QAAA,EAAC;cAAQ;gBAAAhH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjB,CAAC,EACPtB,OAAA,CAACmJ,IAAI;YAACb,KAAK,EAAE;cAACxH,KAAK,EAAE,KAAK;cAAED,MAAM,EAAE,EAAE;cAAEyI,eAAe,EAAE,SAAS;cAAED,YAAY,EAAE,EAAE;cAAEQ,OAAO,EAAE,EAAE;cAAET,aAAa,EAAE,KAAK;cAAEN,UAAU,EAAE,QAAQ;cAAEyH,SAAS,EAAE;YAAE,CAAE;YAAApI,QAAA,GAC1JnI,OAAA,CAACmK,KAAK;cACFC,MAAM,EAAEC,OAAO,CAAC,sBAAsB,CAAE;cACxCC,UAAU,EAAC,SAAS;cACpBhC,KAAK,EAAE;gBAACxH,KAAK,EAAE,EAAE;gBAAED,MAAM,EAAE,EAAE;gBAAEwQ,WAAW,EAAE;cAAE;YAAE;cAAAlQ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5C,CAAC,EACTtB,OAAA,CAACsR,SAAS;cACNC,WAAW,EAAC,kBAAU;cACtBjJ,KAAK,EAAE;gBAACxH,KAAK,EAAE;cAAK;YAAE;cAAAK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACd,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACX,CAAC,EACPtB,OAAA,CAACmJ,IAAI;YAACb,KAAK,EAAE;cAACxH,KAAK,EAAE,KAAK;cAAEgI,UAAU,EAAE;YAAQ,CAAE;YAAAX,QAAA,EAC9CnI,OAAA,CAACwQ,UAAU;cACPlI,KAAK,EAAE;gBAACxH,KAAK,EAAE,MAAM;gBAAED,MAAM,EAAE;cAAM,CAAE;cAAAsH,QAAA,EAEtCxD,YAAY,CAACwB,GAAG,CAAC,CAACb,IAAI,EAAEmB,KAAK,KAC1BzG,OAAA,CAACmJ,IAAI;gBAACb,KAAK,EAAE;kBAACxH,KAAK,EAAE,MAAM;kBAAED,MAAM,EAAE,EAAE;kBAAEuI,aAAa,EAAE,KAAK;kBAAEN,UAAU,EAAE,QAAQ;kBAAEN,cAAc,EAAE,eAAe;kBAAEgJ,cAAc,EAAE;gBAAE,CAAE;gBAAArJ,QAAA,GACtInI,OAAA,CAACmJ,IAAI;kBACDb,KAAK,EAAE;oBAACxH,KAAK,EAAE,EAAE;oBAAED,MAAM,EAAE;kBAAE,CAAE;kBAAAsH,QAAA,EAE/BnI,OAAA,CAACmK,KAAK;oBACFC,MAAM,EAAE;sBAACgD,GAAG,EAAE9H,IAAI,CAAClF,IAAI,KAAK,OAAO,GAAGkF,IAAI,CAACmM,WAAW,GAAGnM,IAAI,CAAC7E;oBAAM,CAAE;oBACtE6J,UAAU,EAAC,OAAO;oBAClBhC,KAAK,EAAE;sBAACxH,KAAK,EAAE,MAAM;sBAAED,MAAM,EAAE,MAAM;sBAAEwI,YAAY,EAAE;oBAAE;kBAAE;oBAAAlI,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACrD;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACP,CAAC,EACPtB,OAAA,CAACkK,IAAI;kBAAC5B,KAAK,EAAE;oBAAC8I,QAAQ,EAAE,EAAE;oBAAEN,UAAU,EAAE,MAAM;oBAAEhQ,KAAK,EAAE,KAAK;oBAAE4Q,UAAU,EAAE;kBAAE,CAAE;kBAAAvJ,QAAA,EAAE7C,IAAI,CAAClF,IAAI,KAAK,OAAO,GAAGkF,IAAI,CAAC5C,SAAS,GAAG4C,IAAI,CAACqM;gBAAQ;kBAAAxQ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,EAC9ItB,OAAA,CAAC+J,gBAAgB;kBACbzB,KAAK,EAAE;oBAACxH,KAAK,EAAE,EAAE;oBAAED,MAAM,EAAE,EAAE;oBAAEyI,eAAe,EAAE,SAAS;oBAAEd,cAAc,EAAE,QAAQ;oBAAEM,UAAU,EAAE,QAAQ;oBAAEO,YAAY,EAAE;kBAAE,CAAE;kBAC7HM,OAAO,EAAEA,CAAA,KAAMgF,oBAAoB,CAACrJ,IAAI,CAAE;kBAAA6C,QAAA,EAE1CnI,OAAA,CAACkK,IAAI;oBAAC5B,KAAK,EAAE;sBAAC8I,QAAQ,EAAE,EAAE;sBAAEN,UAAU,EAAE;oBAAM,CAAE;oBAAA3I,QAAA,EAAC;kBAAG;oBAAAhH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7C,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACjB,CACT;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACX,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,EAEdtB,OAAA,CAAC4R,KAAK;QACFC,aAAa,EAAC,MAAM;QACpBC,WAAW,EAAE,IAAK;QAClBC,OAAO,EAAEjD,qBAAsB;QAAA3G,QAAA,EAE/BnI,OAAA,CAACF,SAAS;UAACiP,wBAAwB,EAAEA,wBAAyB;UAACxL,QAAQ,EAAEA;QAAS;UAAApC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5F,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACgB;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACnB,CAAC;AAEf;AAAC;AAED,MAAM6N,MAAM,GAAG6C,UAAU,CAACC,MAAM,CAAC;EAC7B7C,SAAS,EAAE;IACTJ,IAAI,EAAE,CAAC;IAEPlG,UAAU,EAAE,QAAQ;IACpBN,cAAc,EAAE,eAAe;IAC/Bc,eAAe,EAAE;EACnB;AACJ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}