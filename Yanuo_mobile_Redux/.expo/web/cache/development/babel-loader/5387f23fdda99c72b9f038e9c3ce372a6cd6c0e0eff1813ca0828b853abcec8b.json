{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DinhPhongIUH\\\\Desktop\\\\nhap\\\\Yanuo_mobile_Redux\\\\screens\\\\HomeChatScreen.js\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { parse, format, differenceInMinutes, differenceInHours, getDay } from 'date-fns';\nimport { useContext, useEffect, useRef, useState } from 'react';\nimport { setOpenDropMenu } from '../redux/slices/HomeScreenSlice';\nimport { useDispatch, useSelector } from 'react-redux';\nimport client from '../api/client';\nimport { addNewFriendRequest, inviteFriendRequest } from '../redux/slices/friendSlice';\nimport { userChats } from '../api/ChatRequests';\nimport { getConversition } from '../api/MessageRequests';\nimport TimeAgo from 'react-native-timeago';\nimport { io } from 'socket.io-client';\nimport { getUser } from '../api/UserRequests';\nimport { useMessage } from './context/chatContext';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\nimport { Host } from 'react-native-portalize';\nimport { REACT_APP_API_URL } from '../constants';\nimport { useSocket } from './context/socketContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  height,\n  width\n} = Dimensions.get('window');\nexport default function HomeChat({\n  navigation\n}) {\n  const openDropMenu = useSelector(state => state.homeScreenSlice.openDropMenu);\n  const data = [{\n    'image': require('../assets/test.png'),\n    \"userName\": \"user1\",\n    \"message\": \"ok chưa\",\n    \"unreadmessages\": 0,\n    \"timeSend\": '5/2/2024, 17:07:47',\n    \"role\": \"group\"\n  }, {\n    'image': require('../assets/test.png'),\n    \"userName\": \"user2\",\n    \"message\": \"Có gì đó không ổn?\",\n    \"unreadmessages\": 5,\n    \"timeSend\": '6/2/2024, 12:30:15',\n    \"role\": \"user\"\n  }, {\n    'image': require('../assets/test.png'),\n    \"userName\": \"user3\",\n    \"message\": \"Hôm nay thời tiết thế nào?\",\n    \"unreadmessages\": 1,\n    \"timeSend\": '7/2/2024, 09:45:32',\n    \"role\": \"user\"\n  }, {\n    'image': require('../assets/test.png'),\n    \"userName\": \"user4\",\n    \"message\": \"Bạn đã ăn sáng chưa?\",\n    \"unreadmessages\": 20,\n    \"timeSend\": '8/2/2024, 20:15:59',\n    \"role\": \"group\"\n  }, {\n    'image': require('../assets/test.png'),\n    \"userName\": \"user5\",\n    \"message\": \"Chúc bạn một ngày tốt lành!\",\n    \"unreadmessages\": 0,\n    \"timeSend\": '9/2/2024, 14:28:47',\n    \"role\": \"user\"\n  }, {\n    'image': require('../assets/test.png'),\n    \"userName\": \"user5\",\n    \"message\": \"Chúc bạn một ngày tốt lành!\",\n    \"unreadmessages\": 0,\n    \"timeSend\": '9/2/2024, 14:28:47',\n    \"role\": \"user\"\n  }, {\n    'image': require('../assets/test.png'),\n    \"userName\": \"user5\",\n    \"message\": \"Chúc bạn một ngày tốt lành!\",\n    \"unreadmessages\": 0,\n    \"timeSend\": '9/2/2024, 14:28:47',\n    \"role\": \"user\"\n  }, {\n    'image': require('../assets/test.png'),\n    \"userName\": \"user5\",\n    \"message\": \"Chúc bạn một ngày tốt lành!\",\n    \"unreadmessages\": 0,\n    \"timeSend\": '9/2/2024, 14:28:47',\n    \"role\": \"user\"\n  }, {\n    'image': require('../assets/test.png'),\n    \"userName\": \"user5\",\n    \"message\": \"Chúc bạn một ngày tốt lành!\",\n    \"unreadmessages\": 0,\n    \"timeSend\": '9/2/2024, 14:28:47',\n    \"role\": \"user\"\n  }];\n  function compareDateTime(timeSendString) {\n    const currentTime = new Date().toLocaleString();\n    const timeSend = parse(timeSendString, 'd/M/yyyy, HH:mm:ss', new Date());\n    const currentDate = parse(currentTime, 'd/M/yyyy, HH:mm:ss', new Date());\n    if (timeSend.getDate() !== currentDate.getDate()) {\n      if (differenceInMinutes(currentDate, timeSend) < 7 * 24 * 60) {\n        const dayOfWeek = getDay(timeSend);\n        return format(timeSend, \"EEEE\");\n      } else {\n        return format(timeSend, \"d/M/yyyy\");\n      }\n    } else {\n      const diffMinutes = differenceInMinutes(currentDate, timeSend);\n      if (diffMinutes < 60) {\n        return `${diffMinutes} P`;\n      } else {\n        const diffHours = differenceInHours(currentDate, timeSend);\n        if (diffHours < 24) {\n          return `${diffHours} giờ`;\n        } else {\n          return format(timeSend, \"EEEE\");\n        }\n      }\n    }\n  }\n  const scrollViewRefs = useRef([]);\n  const handleScroll = index => {\n    scrollViewRefs.current.forEach((ref, idx) => {\n      if (idx !== index && ref) {\n        ref.scrollTo({\n          x: 0,\n          y: 0,\n          animated: true\n        });\n      }\n    });\n  };\n  const handleHorizontalScroll = (event, index) => {\n    const offsetX = event.nativeEvent.contentOffset.x;\n    if (offsetX < 0) {\n      scrollViewRefs.current[index].scrollTo({\n        x: 0,\n        animated: false\n      });\n    }\n  };\n  const tranlate_x = useRef(new Animated.Value(1)).current;\n  const mess = () => {\n    console.log(\"ok\");\n    Animated.timing(tranlate_x, {\n      toValue: 0,\n      duration: 100,\n      useNativeDriver: false\n    }).start();\n  };\n  const dispatch = useDispatch();\n  const profile = useSelector(state => state.meSlice.userProfile);\n  const fetchFriendRequest = async () => {\n    try {\n      const res = await client.get(`/friend-requests/${profile._id}`);\n      if (res.data.success) {\n        dispatch(addNewFriendRequest(res.data.requestsData));\n      } else {}\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n  useEffect(() => {\n    const fetchData = async () => {\n      await fetchFriendRequest();\n    };\n    fetchData();\n  }, []);\n  const socket = useRef();\n  console.log('asdasd', socket);\n  const [chats, setChats] = useState([]);\n  const [currentChat, setCurrentChat] = useState(null);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const {\n    sendMessage,\n    setSendMessage\n  } = useMessage();\n  const {\n    receiveMessage,\n    setReceiveMessage\n  } = useMessage();\n  const [conversition, setConversition] = useState([]);\n  useEffect(() => {\n    socket.current = io(REACT_APP_API_URL);\n    socket.current.emit(\"new-user-add\", profile._id);\n    socket.current.on('get-users', users => {\n      setOnlineUsers(users);\n      console.log('online: ', onlineUsers);\n    });\n  }, [profile]);\n  useEffect(() => {\n    const getChats = async () => {\n      try {\n        const {\n          data\n        } = await userChats(profile._id);\n        setChats(data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getChats();\n  }, [profile._id, conversition]);\n  const [otherMemberIds, setOtherMemberIds] = useState([]);\n  useEffect(() => {\n    chats.forEach(chat => {\n      if (chat.members.includes(profile._id)) {\n        const otherId = chat.members.find(memberId => memberId !== profile._id);\n        if (otherId) {\n          otherMemberIds.push(otherId);\n        }\n      }\n    });\n  }, [chats, profile._id]);\n  useEffect(() => {\n    const fetchConversition = async () => {\n      try {\n        const res = await getConversition(profile._id);\n        setConversition(res.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchConversition();\n    socket.current.on(\"receive-message\", data => {\n      fetchConversition();\n    });\n  }, [profile._id]);\n  console.log('chatsId: ', conversition);\n  const checkOnlineStatus = chat => {\n    const chatMember = chat.members.find(members => members !== profile._id);\n    const online = onlineUsers.find(user => user.userId === chatMember);\n    return online ? true : false;\n  };\n  const handleChatOpen = chat => {\n    const selectedChat = chats.find(c => c._id === chat.chatId);\n    setCurrentChat(selectedChat);\n    const otherMemberId = selectedChat.members.find(memberId => memberId !== profile._id);\n    console.log('ottt', selectedChat.members);\n    if (selectedChat.type === 'group') {\n      let groupName = selectedChat.groupName;\n      const otherMemberIds = selectedChat.members.filter(memberId => memberId !== profile._id);\n      console.log('olsr', otherMemberIds);\n      return !openDropMenu ? navigation.push('ChatSCR', {\n        chat: selectedChat,\n        currentUser: profile._id,\n        setSendMessage,\n        receiveMessage: {\n          receiveMessage\n        },\n        memberId: otherMemberIds,\n        socket: socket,\n        sendMessage: sendMessage,\n        setReceiveMessage\n      }) : dispatch(setOpenDropMenu(!openDropMenu));\n      ;\n    }\n    return !openDropMenu ? navigation.push('ChatSCR', {\n      chat: selectedChat,\n      currentUser: profile._id,\n      setSendMessage,\n      receiveMessage: {\n        receiveMessage\n      },\n      memberId: otherMemberId,\n      socket: socket,\n      sendMessage: sendMessage,\n      setReceiveMessage,\n      setCon: setConversition\n    }) : dispatch(setOpenDropMenu(!openDropMenu));\n    ;\n  };\n  return _jsxDEV(SafeAreaView, {\n    style: styles.container,\n    children: conversition.map((item, index) => _jsxDEV(Animated.ScrollView, {\n      ref: ref => scrollViewRefs.current[index] = ref,\n      style: {\n        width: '97%',\n        height: 80,\n        marginBottom: 0,\n        marginTop: 0,\n        transform: [{\n          translateX: tranlate_x\n        }]\n      },\n      horizontal: true,\n      pagingEnabled: true,\n      showsHorizontalScrollIndicator: false,\n      onMomentumScrollBegin: () => handleScroll(index),\n      onScroll: event => handleHorizontalScroll(event, index),\n      children: [_jsxDEV(TouchableOpacity, {\n        delayLongPress: 1500,\n        onLongPress: mess,\n        style: {\n          flexDirection: 'row',\n          width: width - 10,\n          height: '100%',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        onPress: () => handleChatOpen(item),\n        children: [_jsxDEV(View, {\n          style: {\n            width: '20%'\n          },\n          children: [item.members.length > 2 ? _jsxDEV(Image, {\n            source: {\n              uri: item.groupAvatar\n            },\n            resizeMode: \"cover\",\n            style: styles.userImage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 29\n          }, this) : _jsxDEV(Image, {\n            source: {\n              uri: item.avatar\n            },\n            resizeMode: \"cover\",\n            style: styles.userImage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 29\n          }, this), _jsxDEV(View, {\n            style: [checkOnlineStatus(item) ? styles.onlineStatus : null]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 25\n        }, this), _jsxDEV(View, {\n          style: {\n            justifyContent: 'flex-start',\n            width: '55%',\n            paddingLeft: 10\n          },\n          children: [_jsxDEV(View, {\n            style: {\n              flexDirection: 'row',\n              justifyContent: 'flex-start',\n              alignItems: 'center'\n            },\n            children: [item.members.length > 2 ? _jsxDEV(View, {\n              style: {\n                width: 25,\n                height: 20,\n                backgroundColor: '#e2f0f3',\n                justifyContent: 'center',\n                alignItems: 'center',\n                marginRight: 10,\n                borderRadius: 5\n              },\n              children: _jsxDEV(Image, {\n                source: require('./Icon/groupIcon.png'),\n                style: {\n                  width: 22,\n                  height: 18,\n                  backgroundColor: '#e2f0f3'\n                },\n                resizeMode: \"contain\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 37\n            }, this) : null, item.members.length > 2 ? _jsxDEV(Text, {\n              numberOfLines: 1,\n              ellipsizeMode: \"tail\",\n              style: styles.userText,\n              children: item.groupName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 37\n            }, this) : _jsxDEV(Text, {\n              numberOfLines: 1,\n              ellipsizeMode: \"tail\",\n              style: styles.userText,\n              children: item.userName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 29\n          }, this), item.type === 'group' ? _jsxDEV(Text, {\n            numberOfLines: 1,\n            ellipsizeMode: \"tail\",\n            style: [styles.messagerText, {\n              color: item.unreadmessages > 0 ? '#212121' : '#7e8389',\n              fontWeight: item.unreadmessages > 0 ? '500' : '300'\n            }],\n            children: item.text ? `${item.senderUserName}: ${item.text}` : '[Hình ảnh]'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 33\n          }, this) : _jsxDEV(Text, {\n            numberOfLines: 1,\n            ellipsizeMode: \"tail\",\n            style: [styles.messagerText, {\n              color: item.unreadmessages > 0 ? '#212121' : '#7e8389',\n              fontWeight: item.unreadmessages > 0 ? '500' : '300'\n            }],\n            children: item.type === 'text' ? item.text : '[Hình ảnh]'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 25\n        }, this), _jsxDEV(View, {\n          style: {\n            width: '26%',\n            justifyContent: 'center',\n            alignItems: 'center'\n          },\n          children: [_jsxDEV(Text, {\n            children: _jsxDEV(TimeAgo, {\n              time: item.lastMessageTime,\n              hideAgo: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 35\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 29\n          }, this), _jsxDEV(View, {\n            style: {\n              backgroundColor: '#ee4f47',\n              borderRadius: 10,\n              width: 25\n            },\n            children: item.unreadmessages > 0 ? _jsxDEV(Text, {\n              style: {\n                textAlign: 'center',\n                color: '#fff6f4'\n              },\n              children: item.unreadmessages > 10 ? 'N' : item.unreadmessages\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 37\n            }, this) : null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 25\n      }, this), _jsxDEV(View, {\n        style: {\n          width: width,\n          position: 'absolute',\n          bottom: 0,\n          justifyContent: 'flex-end'\n        },\n        children: _jsxDEV(View, {\n          style: {\n            width: '80%',\n            position: 'absolute',\n            bottom: 0,\n            borderBottomWidth: 1,\n            right: 0,\n            borderColor: '#ededed'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 25\n      }, this), _jsxDEV(ScrollView, {\n        style: {\n          width: width / 1.6,\n          height: 80\n        },\n        children: _jsxDEV(View, {\n          style: {\n            width: '100%',\n            height: 'auto',\n            flexDirection: 'row',\n            justifyContent: 'space-between'\n          },\n          children: [_jsxDEV(TouchableOpacity, {\n            style: {\n              backgroundColor: '#909aa4',\n              width: '33.40%',\n              height: 80,\n              justifyContent: 'center',\n              alignItems: 'center'\n            },\n            children: [_jsxDEV(Image, {\n              source: require('./Icon/dsIcon.png'),\n              resizeMode: \"contain\",\n              style: {\n                width: '30%',\n                height: '30%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 37\n            }, this), _jsxDEV(Text, {\n              style: {\n                color: '#fbfcff',\n                fontSize: 12,\n                padding: 4,\n                fontWeight: 400\n              },\n              children: \"Th\\xEAm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 33\n          }, this), _jsxDEV(TouchableOpacity, {\n            style: {\n              backgroundColor: '#4752bb',\n              width: '33.33%',\n              height: 80,\n              justifyContent: 'center',\n              alignItems: 'center'\n            },\n            children: [_jsxDEV(Image, {\n              source: require('./Icon/pinIcon.png'),\n              resizeMode: \"contain\",\n              style: {\n                width: '30%',\n                height: '30%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 37\n            }, this), _jsxDEV(Text, {\n              style: {\n                color: '#fbfcff',\n                fontSize: 12,\n                padding: 4,\n                fontWeight: 400\n              },\n              children: \"Ghim\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 33\n          }, this), _jsxDEV(TouchableOpacity, {\n            style: {\n              backgroundColor: '#f04e49',\n              width: '33.33%',\n              height: 80,\n              justifyContent: 'center',\n              alignItems: 'center'\n            },\n            children: [_jsxDEV(Image, {\n              source: require('./Icon/delIcon.png'),\n              resizeMode: \"contain\",\n              style: {\n                width: '30%',\n                height: '30%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 37\n            }, this), _jsxDEV(Text, {\n              style: {\n                color: '#fbfcff',\n                fontSize: 12,\n                padding: 4,\n                fontWeight: 400\n              },\n              children: \"X\\xF3a\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 25\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 21\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 294,\n    columnNumber: 13\n  }, this);\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'flex-end',\n    justifyContent: 'space-between'\n  },\n  userImage: {\n    width: '80%',\n    height: '75%',\n    borderRadius: 500\n  },\n  userText: {\n    fontSize: 18,\n    fontWeight: '600'\n  },\n  messagerText: {\n    fontSize: 16\n  },\n  onlineStatus: {\n    width: 14,\n    height: 14,\n    borderRadius: 10,\n    backgroundColor: '#45d750',\n    position: 'absolute',\n    bottom: 0,\n    right: 15,\n    borderWidth: 1,\n    borderColor: '#ccc'\n  }\n});","map":{"version":3,"names":["parse","format","differenceInMinutes","differenceInHours","getDay","useContext","useEffect","useRef","useState","setOpenDropMenu","useDispatch","useSelector","client","addNewFriendRequest","inviteFriendRequest","userChats","getConversition","TimeAgo","io","getUser","useMessage","GestureHandlerRootView","Host","REACT_APP_API_URL","useSocket","jsxDEV","_jsxDEV","height","width","Dimensions","get","HomeChat","navigation","openDropMenu","state","homeScreenSlice","data","require","compareDateTime","timeSendString","currentTime","Date","toLocaleString","timeSend","currentDate","getDate","dayOfWeek","diffMinutes","diffHours","scrollViewRefs","handleScroll","index","current","forEach","ref","idx","scrollTo","x","y","animated","handleHorizontalScroll","event","offsetX","nativeEvent","contentOffset","tranlate_x","Animated","Value","mess","console","log","timing","toValue","duration","useNativeDriver","start","dispatch","profile","meSlice","userProfile","fetchFriendRequest","res","_id","success","requestsData","error","message","fetchData","socket","chats","setChats","currentChat","setCurrentChat","onlineUsers","setOnlineUsers","sendMessage","setSendMessage","receiveMessage","setReceiveMessage","conversition","setConversition","emit","on","users","getChats","otherMemberIds","setOtherMemberIds","chat","members","includes","otherId","find","memberId","push","fetchConversition","checkOnlineStatus","chatMember","online","user","userId","handleChatOpen","selectedChat","c","chatId","otherMemberId","type","groupName","filter","currentUser","setCon","SafeAreaView","style","styles","container","children","map","item","ScrollView","marginBottom","marginTop","transform","translateX","horizontal","pagingEnabled","showsHorizontalScrollIndicator","onMomentumScrollBegin","onScroll","TouchableOpacity","delayLongPress","onLongPress","flexDirection","justifyContent","alignItems","onPress","View","length","Image","source","uri","groupAvatar","resizeMode","userImage","fileName","_jsxFileName","lineNumber","columnNumber","avatar","onlineStatus","paddingLeft","backgroundColor","marginRight","borderRadius","Text","numberOfLines","ellipsizeMode","userText","userName","messagerText","color","unreadmessages","fontWeight","text","senderUserName","time","lastMessageTime","hideAgo","textAlign","position","bottom","borderBottomWidth","right","borderColor","fontSize","padding","StyleSheet","create","flex","borderWidth"],"sources":["C:/Users/DinhPhongIUH/Desktop/nhap/Yanuo_mobile_Redux/screens/HomeChatScreen.js"],"sourcesContent":["import { StyleSheet, Text, View, Image, TouchableOpacity, SafeAreaView, Dimensions, Animated, TouchableWithoutFeedback, ScrollView, PanResponder, ActivityIndicator} from 'react-native';\r\nimport { parse, format, differenceInMinutes, differenceInHours, getDay } from 'date-fns';\r\nimport { useContext, useEffect, useRef, useState } from 'react';\r\nimport { setOpenDropMenu } from '../redux/slices/HomeScreenSlice';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport client from '../api/client';\r\nimport { addNewFriendRequest, inviteFriendRequest } from '../redux/slices/friendSlice';\r\nimport { userChats } from '../api/ChatRequests';\r\nimport { getConversition } from '../api/MessageRequests'; \r\nimport TimeAgo from 'react-native-timeago';\r\nimport {io} from 'socket.io-client';\r\nimport { getUser } from '../api/UserRequests';\r\nimport { useMessage } from './context/chatContext';\r\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\r\n// import { getSocket } from '../utils/socketClient';\r\nimport {Host} from 'react-native-portalize';\r\nimport { REACT_APP_API_URL } from '../constants';\r\nimport { useSocket } from './context/socketContext';\r\n\r\nconst {height ,width} = Dimensions.get('window');\r\nexport default function HomeChat({navigation}) {\r\n    const openDropMenu = useSelector(state => state.homeScreenSlice.openDropMenu);\r\n\r\n    const data = [\r\n        {'image': require('../assets/test.png'), \"userName\": \"user1\", \"message\": \"ok chưa\", \"unreadmessages\": 0, \"timeSend\": '5/2/2024, 17:07:47', \"role\": \"group\"},\r\n        {'image': require('../assets/test.png'), \"userName\": \"user2\", \"message\": \"Có gì đó không ổn?\", \"unreadmessages\": 5, \"timeSend\": '6/2/2024, 12:30:15', \"role\": \"user\"},\r\n        {'image': require('../assets/test.png'), \"userName\": \"user3\", \"message\": \"Hôm nay thời tiết thế nào?\", \"unreadmessages\": 1, \"timeSend\": '7/2/2024, 09:45:32', \"role\": \"user\"},\r\n        {'image': require('../assets/test.png'), \"userName\": \"user4\", \"message\": \"Bạn đã ăn sáng chưa?\", \"unreadmessages\": 20, \"timeSend\": '8/2/2024, 20:15:59', \"role\": \"group\"},\r\n        {'image': require('../assets/test.png'), \"userName\": \"user5\", \"message\": \"Chúc bạn một ngày tốt lành!\", \"unreadmessages\": 0, \"timeSend\": '9/2/2024, 14:28:47', \"role\": \"user\"},\r\n        {'image': require('../assets/test.png'), \"userName\": \"user5\", \"message\": \"Chúc bạn một ngày tốt lành!\", \"unreadmessages\": 0, \"timeSend\": '9/2/2024, 14:28:47', \"role\": \"user\"},\r\n        {'image': require('../assets/test.png'), \"userName\": \"user5\", \"message\": \"Chúc bạn một ngày tốt lành!\", \"unreadmessages\": 0, \"timeSend\": '9/2/2024, 14:28:47', \"role\": \"user\"},\r\n        {'image': require('../assets/test.png'), \"userName\": \"user5\", \"message\": \"Chúc bạn một ngày tốt lành!\", \"unreadmessages\": 0, \"timeSend\": '9/2/2024, 14:28:47', \"role\": \"user\"},\r\n        {'image': require('../assets/test.png'), \"userName\": \"user5\", \"message\": \"Chúc bạn một ngày tốt lành!\", \"unreadmessages\": 0, \"timeSend\": '9/2/2024, 14:28:47', \"role\": \"user\"},\r\n    ];\r\n\r\n    function compareDateTime(timeSendString) {\r\n        const currentTime = new Date().toLocaleString();\r\n        \r\n        // Chuyển đổi chuỗi thời gian thành đối tượng Date\r\n        const timeSend = parse(timeSendString, 'd/M/yyyy, HH:mm:ss', new Date());\r\n        const currentDate = parse(currentTime, 'd/M/yyyy, HH:mm:ss', new Date());\r\n    \r\n        // So sánh ngày\r\n        if (timeSend.getDate() !== currentDate.getDate()) {\r\n            // Kiểm tra xem thời điểm hiện tại và thời điểm đã gửi có cách nhau ít hơn 1 tuần không\r\n            if (differenceInMinutes(currentDate, timeSend) < 7 * 24 * 60) {\r\n                // Lấy ngày trong tuần của thời gian gửi\r\n                const dayOfWeek = getDay(timeSend);\r\n    \r\n                // Trả về thứ\r\n                return format(timeSend, \"EEEE\");\r\n            } else {\r\n                // Trả về ngày đầy đủ\r\n                return format(timeSend, \"d/M/yyyy\");\r\n            }\r\n        } else {\r\n            // So sánh thời gian\r\n            const diffMinutes = differenceInMinutes(currentDate, timeSend);\r\n            if (diffMinutes < 60) {\r\n                // Trả về số phút\r\n                return `${diffMinutes} P`;\r\n            } else {\r\n                // Tính số giờ\r\n                const diffHours = differenceInHours(currentDate, timeSend);\r\n                if (diffHours < 24) {\r\n                    // Trả về số giờ\r\n                    return `${diffHours} giờ`;\r\n                } else {\r\n                    // Trả về ngày trong tuần\r\n                    return format(timeSend, \"EEEE\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    // Sử dụng hàm so sánh thời gian\r\n    // const timeSendString = '7/3/2024, 13:07:47';\r\n    // console.log(compareDateTime(timeSendString)); // Ví dụ về cách sử dụng\r\n\r\n    // role: user, group, system, ads neu la group co icon group trước userName\r\n\r\n    const scrollViewRefs = useRef([]);\r\n\r\n  // Hàm để xử lý việc cuộn mới bắt đầu\r\n    const handleScroll = (index) => {\r\n    // Lặp qua tất cả các ScrollView và reset vị trí nếu không phải là ScrollView hiện tại\r\n        scrollViewRefs.current.forEach((ref, idx) => {\r\n                if (idx !== index && ref) {\r\n                    ref.scrollTo({ x: 0, y: 0, animated: true });\r\n                }\r\n            });\r\n    };\r\n    \r\n    const handleHorizontalScroll = (event, index) => {\r\n        const offsetX = event.nativeEvent.contentOffset.x;\r\n        if (offsetX < 0) {\r\n            scrollViewRefs.current[index].scrollTo({ x: 0, animated: false });\r\n        }\r\n    };\r\n\r\n    const tranlate_x = useRef(new Animated.Value(1)).current;\r\n\r\n    const mess = () => {\r\n        console.log(\"ok\");\r\n        Animated.timing(tranlate_x, {\r\n            // toValue: 30,\r\n            toValue: 0,\r\n            duration: 100,\r\n            useNativeDriver: false\r\n        }).start();\r\n    };\r\n\r\n    // friend\r\n    const dispatch = useDispatch();\r\n    const profile = useSelector(state => state.meSlice.userProfile);\r\n    // const [friendRequest, setFriendRequests] = useState([]);\r\n    const fetchFriendRequest = async() => {\r\n        try\r\n        {\r\n            const res = await client.get(`/friend-requests/${profile._id}`);\r\n            if (res.data.success)\r\n            {\r\n                // console.log('csd', res.data.requestsData);\r\n                // setFriendRequests(res.data.requestsData);\r\n                dispatch(addNewFriendRequest(res.data.requestsData));\r\n                // dispatch(inviteFriendRequest([{'dsđ': 'đas'}]))\r\n            }\r\n            else\r\n            {\r\n                // console.log(\"số điện thoại này chưa tham gia Yanuo\")\r\n                // setModalVisible(true);\r\n            }\r\n        }\r\n        catch (error)\r\n        {\r\n            console.log(error.message);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            await fetchFriendRequest();\r\n        };\r\n    \r\n        fetchData();\r\n    }, []); \r\n\r\n    // chat\r\n    const socket = useRef();\r\n    // console.log('tesstasc', socket);\r\n    // const {socket, onlineUsers} = useSocket();\r\n    console.log('asdasd', socket);\r\n    // const {socket} = useMessage();\r\n    const [chats, setChats] = useState([]);\r\n    const [currentChat, setCurrentChat] = useState(null);\r\n    const [onlineUsers, setOnlineUsers] = useState([]);\r\n    const {sendMessage, setSendMessage} = useMessage();\r\n    const {receiveMessage, setReceiveMessage} = useMessage();\r\n    const [conversition, setConversition] = useState([]);\r\n    \r\n    // console.log('convvv', conversition);\r\n    // socket\r\n    useEffect(() => {\r\n        socket.current = io(REACT_APP_API_URL);\r\n        socket.current.emit(\"new-user-add\", profile._id);\r\n        socket.current.on('get-users', (users) => {\r\n            setOnlineUsers(users);\r\n            console.log('online: ', onlineUsers);\r\n        })\r\n    }, [profile])\r\n    // console.log('eeee: ', sendMessage);\r\n    // send message to socket server\r\n    // useEffect(() => {\r\n    //     if (sendMessage != null)\r\n    //     {\r\n    //         socket.current.emit('send-messege', sendMessage)\r\n    //     }\r\n    // }, [sendMessage])\r\n\r\n    // const [demorecei, setDemorecei] = useState(null);\r\n    //  // receive Message from socketServer\r\n    // useEffect(() => {\r\n    //     socket.current.on(\"receive-message\", (data) => {\r\n    //         setDemorecei(data);\r\n    //         setReceiveMessage(data);\r\n    //     })\r\n    // }, []);\r\n    // console.log(demorecei);\r\n\r\n    // console.log('cur:1 ', profile);\r\n    // console.log('online1: ', onlineUsers);\r\n\r\n    // Get the chat in chat section\r\n    useEffect(() => {\r\n        const getChats = async () => {\r\n        try {\r\n            const { data } = await userChats(profile._id);\r\n            setChats(data);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        };\r\n        getChats(); \r\n    }, [profile._id, conversition,]);\r\n\r\n    const [otherMemberIds, setOtherMemberIds] = useState([]);\r\n    useEffect(() => {\r\n        chats.forEach(chat => {\r\n            if (chat.members.includes(profile._id)) {\r\n              const otherId = chat.members.find(memberId => memberId !== profile._id);\r\n              if (otherId) {\r\n                otherMemberIds.push(otherId);\r\n              }\r\n            }\r\n          });\r\n    }, [chats, profile._id]);\r\n    \r\n    // console.log('chatssd: ', conversition);\r\n    // lấy thông tin tin nhắn\r\n    useEffect(() => {\r\n        const fetchConversition = async () => {\r\n            try\r\n            {\r\n                const res = await getConversition(profile._id);\r\n                // console.log('xx::', res.data);\r\n                setConversition(res.data)\r\n            }\r\n            catch (error)\r\n            {\r\n                console.log(error);\r\n            }\r\n        };\r\n        fetchConversition();\r\n        socket.current.on(\"receive-message\", (data) => {\r\n            // Cập nhật state khi nhận được tin nhắn mới\r\n            fetchConversition();\r\n        });\r\n    }, [profile._id])\r\n\r\n    // useEffect(() => {\r\n    //     const fetchConversition = async () => {\r\n    //         try\r\n    //         {\r\n    //             const res = await getConversition(profile._id);\r\n    //             console.log('xx::', res.data);\r\n    //             setConversition(res.data)\r\n    //         }\r\n    //         catch (error)\r\n    //         {\r\n    //             console.log(error);\r\n    //         }\r\n    //     };\r\n    //     fetchConversition();x``\r\n    //     socket.current.on(\"send-mess-with-listFR\", (data) => {\r\n    //         // Cập nhật state khi nhận được tin nhắn mới\r\n    //         fetchConversition();\r\n    //     });\r\n    // }, [])\r\n    \r\n    console.log('chatsId: ', conversition);\r\n \r\n\r\n    // checkOnlineStatus\r\n    const checkOnlineStatus = (chat) => {\r\n        const chatMember = chat.members.find((members) => members !== profile._id);\r\n        const online = onlineUsers.find((user) => user.userId === chatMember);\r\n        // console.log('đ', chat.members)\r\n        return online ? true : false;\r\n    }\r\n\r\n    // open Chat\r\n    const handleChatOpen = (chat) =>\r\n    {\r\n        //chat.chatId\r\n        const selectedChat = chats.find(c => c._id === chat.chatId)\r\n        setCurrentChat(selectedChat);\r\n        const otherMemberId = selectedChat.members.find(memberId => memberId !== profile._id);\r\n        console.log('ottt', selectedChat.members);\r\n        if (selectedChat.type === 'group')\r\n        {\r\n            let groupName = selectedChat.groupName;\r\n            const otherMemberIds = selectedChat.members.filter(memberId => memberId !== profile._id);\r\n            console.log('olsr', otherMemberIds);\r\n            \r\n            return !openDropMenu ? navigation.push('ChatSCR', {chat :selectedChat, currentUser: profile._id, setSendMessage, receiveMessage: {receiveMessage}, memberId: otherMemberIds, socket: socket, sendMessage: sendMessage, setReceiveMessage}) : dispatch(setOpenDropMenu(!openDropMenu));;\r\n        }\r\n        return !openDropMenu ? navigation.push('ChatSCR', {chat :selectedChat, currentUser: profile._id, setSendMessage, receiveMessage: {receiveMessage}, memberId: otherMemberId, socket: socket, sendMessage: sendMessage, setReceiveMessage, setCon: setConversition}) : dispatch(setOpenDropMenu(!openDropMenu));;\r\n    }\r\n\r\n    // console.log('cadad', conversition);\r\n\r\n    return (\r\n        // <Host>\r\n            <SafeAreaView style={styles.container}>\r\n                {/* <ActivityIndicator\r\n                    style={{width: '100%'}}\r\n                    animating={false}\r\n                ></ActivityIndicator> */}\r\n                {/* <View style={{width: width, height: 60, backgroundColor: 'red', position: 'absolute', top: 0}}></View> */}\r\n                {conversition.map((item, index) => (\r\n                    <Animated.ScrollView\r\n                        key={index}\r\n                        ref={(ref) => (scrollViewRefs.current[index] = ref)}\r\n                        // style={{width: '95%', height: 70, justifyContent: 'flex-start',alignItems: 'center', marginBottom: 15}}\r\n                        style={{width: '97%', height: 80, marginBottom: 0, marginTop: 0, transform: [{translateX: tranlate_x}]}}\r\n                        horizontal={true}\r\n                        pagingEnabled\r\n                        showsHorizontalScrollIndicator={false}\r\n                        onMomentumScrollBegin={() => handleScroll(index)}\r\n                        onScroll={(event) => handleHorizontalScroll(event, index)}\r\n                        // scrollEventThrottle={16}\r\n                    >\r\n                        <TouchableOpacity \r\n                            delayLongPress={1500}\r\n                            onLongPress={mess}\r\n                            style={{flexDirection: 'row', width: width - 10, height: '100%', justifyContent: 'space-between', alignItems: 'center',}}  \r\n                            // onPress={() => navigation.push('ChatSCR')}\r\n                            onPress={() => handleChatOpen(item)}\r\n                        >\r\n                        <View style={{width: '20%'}}>\r\n                            {item.members.length > 2 ? \r\n                            <Image\r\n                            source={{uri: item.groupAvatar}}\r\n                            resizeMode='cover'\r\n                            style={styles.userImage}\r\n                        ></Image> :\r\n                            <Image\r\n                                source={{uri: item.avatar}}\r\n                                resizeMode='cover'\r\n                                style={styles.userImage}\r\n                            ></Image>\r\n                            }\r\n                            {/* online Status */}\r\n                            <View style={[checkOnlineStatus(item) ? styles.onlineStatus : null]}></View>\r\n                        </View>\r\n                        <View style={{justifyContent: 'flex-start', width: '55%', paddingLeft: 10}}>\r\n                            <View style={{flexDirection: 'row', justifyContent: 'flex-start', alignItems: 'center'}}>\r\n                                {item.members.length > 2 ? \r\n                                    <View style={{width: 25, height: 20, backgroundColor: '#e2f0f3', justifyContent: 'center', alignItems: 'center', marginRight: 10, borderRadius: 5}}>\r\n                                        <Image\r\n                                            source={require('./Icon/groupIcon.png')}\r\n                                            style={{width: 22, height: 18, backgroundColor: '#e2f0f3'}}\r\n                                            resizeMode='contain'\r\n                                        ></Image>\r\n                                    </View> : null\r\n                                }\r\n                                {item.members.length > 2 ? \r\n                                    <Text \r\n                                        numberOfLines={1}\r\n                                        ellipsizeMode='tail'\r\n                                        style={styles.userText}>{item.groupName}\r\n                                        </Text> :\r\n                                    <Text \r\n                                        numberOfLines={1}\r\n                                        ellipsizeMode='tail'\r\n                                        style={styles.userText}>{item.userName}\r\n                                    </Text>\r\n                                }\r\n                            </View>\r\n                            {item.type === 'group' ? \r\n                                <Text \r\n                                    numberOfLines={1}\r\n                                    ellipsizeMode='tail'\r\n                                    style={[styles.messagerText, {color: item.unreadmessages > 0 ? '#212121' : '#7e8389', fontWeight: item.unreadmessages > 0 ? '500' : '300'}]}\r\n                                >\r\n                                    {item.text ? `${item.senderUserName}: ${item.text}` : '[Hình ảnh]'}\r\n                                </Text> \r\n                                :\r\n                                <Text \r\n                                    numberOfLines={1}\r\n                                    ellipsizeMode='tail'\r\n                                    style={[styles.messagerText, {color: item.unreadmessages > 0 ? '#212121' : '#7e8389', fontWeight: item.unreadmessages > 0 ? '500' : '300'}]}\r\n                                >\r\n                                    {/* {item.type === 'text' ? item.text : '[Hình ảnh]'} */}\r\n                                    {item.type === 'text' ? item.text : '[Hình ảnh]'}\r\n                                </Text>\r\n                            }\r\n                        </View>\r\n                        <View style={{width: '26%', justifyContent: 'center', alignItems: 'center'}}>\r\n                            {/* <Text>{compareDateTime(item.lastMessageTime)}</Text> */}\r\n                            <Text><TimeAgo time={item.lastMessageTime} hideAgo></TimeAgo></Text>\r\n                            {/* undline tin nhắm chưa đọc */}\r\n                            <View style={{backgroundColor: '#ee4f47', borderRadius: 10, width: 25}}>\r\n                                {item.unreadmessages > 0 ? \r\n                                    <Text style={{textAlign: 'center', color: '#fff6f4'}}>{item.unreadmessages > 10 ? 'N' : item.unreadmessages}</Text> : null\r\n                                }\r\n                            </View>\r\n                        </View>\r\n                        </TouchableOpacity>\r\n                        <View style={{width: width, position: 'absolute', bottom: 0, justifyContent: 'flex-end'}}>\r\n                            <View style={{width: '80%', position: 'absolute', bottom: 0, borderBottomWidth: 1, right: 0, borderColor: '#ededed'}}></View>\r\n                        </View>\r\n                        <ScrollView\r\n                            style={{width: width / 1.6, height: 80}}\r\n                        >\r\n                            <View style={{width: '100%', height: 'auto', flexDirection: 'row', justifyContent: 'space-between'}}>\r\n                                <TouchableOpacity\r\n                                    style={{backgroundColor: '#909aa4', width: '33.40%', height: 80, justifyContent: 'center', alignItems: 'center'}}\r\n                                >\r\n                                    <Image\r\n                                        source={require('./Icon/dsIcon.png')}\r\n                                        resizeMode='contain'\r\n                                        style={{width: '30%', height: '30%'}}\r\n                                    ></Image>\r\n                                    <Text style={{color: '#fbfcff', fontSize: 12, padding: 4, fontWeight: 400}}>Thêm</Text>\r\n                                </TouchableOpacity>\r\n                                <TouchableOpacity\r\n                                    style={{backgroundColor: '#4752bb', width: '33.33%', height: 80, justifyContent: 'center', alignItems: 'center'}}\r\n                                >\r\n                                    <Image\r\n                                        source={require('./Icon/pinIcon.png')}\r\n                                        resizeMode='contain'\r\n                                        style={{width: '30%', height: '30%'}}\r\n                                    ></Image>\r\n                                    <Text style={{color: '#fbfcff', fontSize: 12, padding: 4, fontWeight: 400}}>Ghim</Text>\r\n                                </TouchableOpacity>\r\n                                <TouchableOpacity\r\n                                    style={{backgroundColor: '#f04e49', width: '33.33%', height: 80, justifyContent: 'center', alignItems: 'center'}}\r\n                                >\r\n                                    <Image\r\n                                        source={require('./Icon/delIcon.png')}\r\n                                        resizeMode='contain'\r\n                                        style={{width: '30%', height: '30%'}}\r\n                                    ></Image>\r\n                                    <Text style={{color: '#fbfcff', fontSize: 12, padding: 4, fontWeight: 400}}>Xóa</Text>\r\n                                </TouchableOpacity>\r\n                            </View>\r\n                        </ScrollView>\r\n                    </Animated.ScrollView>\r\n                ))}\r\n            </SafeAreaView>\r\n        // </Host>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      alignItems: 'flex-end',\r\n      justifyContent: 'space-between',\r\n    //   backgroundColor: '#009ef9',\r\n    },\r\n    userImage:\r\n    {\r\n        width: '80%',\r\n        height: '75%',\r\n        borderRadius: 500\r\n    },\r\n    userText:{\r\n        fontSize: 18,\r\n        fontWeight: '600'\r\n    },\r\n    messagerText: {\r\n        fontSize: 16,\r\n        // color: '#7e8389',\r\n    },\r\n    onlineStatus:{\r\n        width: 14,\r\n        height: 14,\r\n        borderRadius: 10,\r\n        backgroundColor: '#45d750',\r\n        position: 'absolute',\r\n        bottom: 0,\r\n        right: 15,\r\n        borderWidth: 1,\r\n        borderColor: '#ccc'\r\n    }\r\n  });"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}